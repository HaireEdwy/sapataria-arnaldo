var dinConfigs={"siteCode":3245,"clientCode":330946,"listCode":1,"updateMode":"AS","crawlForms":true,"formHashConfig":{},"logLevel":2,"dinTargetForm":{"popover":[{"close_buttom":"X","cookie_dead_days":17800,"delay_open":10,"dialog_html":"PCFET0NUWVBFIGh0bWwgUFVCTElDICItLy9XM0MvL0RURCBYSFRNTCAxLjAgVHJhbnNpdGlvbmFsLy9FTiIgImh0dHA6Ly93d3cudzMub3JnL1RSL3hodG1sMS9EVEQveGh0bWwxLXRyYW5zaXRpb25hbC5kdGQiPg0KCQk8aHRtbCB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94aHRtbCI+DQoJCTxoZWFkPg0KCQkgICAgPG1ldGEgaHR0cC1lcXVpdj0iQ29udGVudC1UeXBlIiBjb250ZW50PSJ0ZXh0L2h0bWw7IGNoYXJzZXQ9dXRmLTgiIC8+DQoJCSAgICA8dGl0bGU+SW50ZWdyYcOnw6NvPC90aXRsZT4NCgkJICAgIDxzdHlsZSB0eXBlPSJ0ZXh0L2NzcyI+DQoJCWZvcm0uZm9ybUludGVncmF0aW9uMiAqLA0KCQlmb3JtLmZvcm1JbnRlZ3JhdGlvbjIgKjo6YmVmb3JlLA0KCQlmb3JtLmZvcm1JbnRlZ3JhdGlvbjIgKjo6YWZ0ZXJ7LXdlYmtpdC1ib3gtc2l6aW5nOiBib3JkZXItYm94OyAtbW96LWJveC1zaXppbmc6IGJvcmRlci1ib3g7IGJveC1zaXppbmc6IGJvcmRlci1ib3g7IH0NCg0KCQlmb3JtLmZvcm1JbnRlZ3JhdGlvbjJ7IHdpZHRoOiAxMDAlOyBtYXJnaW46IDAgYXV0bzsgfQ0KCQlmb3JtLmZvcm1JbnRlZ3JhdGlvbjIgaW5wdXRbdHlwZT0idGV4dCJde291dGxpbmU6bm9uZTsgd2lkdGg6IDEwMCU7IH0gICAgDQoJCWZvcm0uZm9ybUludGVncmF0aW9uMiBzZWxlY3R7d2lkdGg6MTAwJTsgb3ZlcmZsb3c6YXV0bzt9DQoJCWZvcm0uZm9ybUludGVncmF0aW9uMiBzZWxlY3QuaW52aS1zZWxlY3R7ZGlzcGxheTpub25lOyB3aWR0aDowcHg7IGhlaWdodDowcHg7IGJvcmRlcjpub25lO30NCgkJZm9ybS5mb3JtSW50ZWdyYXRpb24yIHRleHRhcmVhe3dpZHRoOjEwMCU7IGhlaWdodDo4MHB4OyBvdmVyZmxvdzphdXRvOyByZXNpemU6dmVydGljYWw7fQ0KCQlmb3JtLmZvcm1JbnRlZ3JhdGlvbjIgZGl2LmNvbnRhaW5lck11bHRpcGxlIHt3aWR0aDoxMDAlOyBvdmVyZmxvdzphdXRvOyBib3JkZXI6IDFweCBzb2xpZCAjYmVjNWNiOyBwYWRkaW5nOiAycHg7IGJhY2tncm91bmQtY29sb3I6I0ZGRjsgcG9zaXRpb246cmVsYXRpdmU7fQ0KCQlmb3JtLmZvcm1JbnRlZ3JhdGlvbjIgZGl2LmNvbnRhaW5lck11bHRpcGxlIGRpdiB7bWluLWhlaWdodDogMjBweDt9DQoJCWZvcm0uZm9ybUludGVncmF0aW9uMiBkaXYuY29udGFpbmVyTXVsdGlwbGUgZGl2IGxhYmVse3doaXRlLXNwYWNlOm5vd3JhcDsgZGlzcGxheTppbmxpbmUtYmxvY2s7IHBvc2l0aW9uOnJlbGF0aXZlO30NCgkJZm9ybS5mb3JtSW50ZWdyYXRpb24yIGlucHV0LnR5cGVfUEhOX0RESXt0ZXh0LWFsaWduOmNlbnRlcjt9DQoJCWZvcm0uZm9ybUludGVncmF0aW9uMiBkaXYuZGl2X1BITl9EREkge3dpZHRoOiAyOCU7IG1hcmdpbi1yaWdodDogMiU7IHRleHQtYWxpZ246IGNlbnRlcjsgZGlzcGxheTogaW5saW5lLWJsb2NrOyB9DQoJCWZvcm0uZm9ybUludGVncmF0aW9uMiBkaXYuZGl2X1BITl9OVU0ge3dpZHRoOiA3MCU7IGRpc3BsYXk6IGlubGluZS1ibG9jazsgfQ0KCQlmb3JtLmZvcm1JbnRlZ3JhdGlvbjIgLmRpdl9QSE4uaGlkZGVuX0RESSBkaXYuZGl2X1BITl9EREkge3dpZHRoOiAwOyBkaXNwbGF5OiBub25lOyB9DQoJCWZvcm0uZm9ybUludGVncmF0aW9uMiAuZGl2X1BITi5oaWRkZW5fRERJIGRpdi5kaXZfUEhOX05VTSB7d2lkdGg6IDEwMCU7IGRpc3BsYXk6IGlubGluZS1ibG9jazsgfQ0KCQlmb3JtLmZvcm1JbnRlZ3JhdGlvbjIgLmZpZWxkLWVycm9ye2JvcmRlci1jb2xvcjogI0NDMDAwMCFpbXBvcnRhbnQ7fQ0KCQlmb3JtLmZvcm1JbnRlZ3JhdGlvbjIgLmctcmVjYXB0Y2hhIHttYXJnaW4tYm90dG9tOjVweDt9DQoNCgkJZm9ybS5mb3JtSW50ZWdyYXRpb24yIC5EaW5hbWl6ZURpdk1lc3NhZ2VTdWNjZXNzLA0KCQlmb3JtLmZvcm1JbnRlZ3JhdGlvbjIgLkRpbmFtaXplRGl2TWVzc2FnZUFsZXJ0LA0KCQlmb3JtLmZvcm1JbnRlZ3JhdGlvbjIgLkRpbmFtaXplRGl2TWVzc2FnZUVycm9yLA0KCQlmb3JtLmZvcm1JbnRlZ3JhdGlvbjIgLkRpbmFtaXplRGl2Q2FwdGNoYU1lc3NhZ2Uge2Rpc3BsYXk6IG5vbmU7IG1hcmdpbjogMHB4IDBweCAxMHB4OyBjb2xvcjogcmdiKDI1NSwgMjU1LCAyNTUpOyBmb250LXNpemU6IDE0cHg7IGZvbnQtZmFtaWx5OiBhcmlhbDsgcGFkZGluZzogMTVweDt9DQoNCgkJZm9ybS5mb3JtSW50ZWdyYXRpb24yIC5EaW5hbWl6ZURpdk1lc3NhZ2VTdWNjZXNzIHtiYWNrZ3JvdW5kLWNvbG9yOiByZ2IoMjAsIDExOCwgMTgpO30NCgkJZm9ybS5mb3JtSW50ZWdyYXRpb24yIC5EaW5hbWl6ZURpdk1lc3NhZ2VBbGVydCwNCgkJZm9ybS5mb3JtSW50ZWdyYXRpb24yIC5EaW5hbWl6ZURpdk1lc3NhZ2VFcnJvciwNCgkJZm9ybS5mb3JtSW50ZWdyYXRpb24yIC5EaW5hbWl6ZURpdkNhcHRjaGFNZXNzYWdlIHsgYmFja2dyb3VuZC1jb2xvcjogI2FjMDAwMDsgfQ0KDQoJCWZvcm0uZm9ybUludGVncmF0aW9uMiBkaXYuYmxvY2sge2Rpc3BsYXk6IGJsb2NrOyBtYXJnaW4tYm90dG9tOiAxMHB4OyB9DQoJCWZvcm0uZm9ybUludGVncmF0aW9uMiBkaXYuYmxvY2s6bGFzdC1jaGlsZCB7bWFyZ2luLWJvdHRvbTogMHB4O30NCgkJZm9ybS5mb3JtSW50ZWdyYXRpb24yIGRpdi52ZXJ0aWNhbCB7ZGlzcGxheTogYmxvY2s7fQ0KCQlmb3JtLmZvcm1JbnRlZ3JhdGlvbjIgZGl2Lmhvcml6b250YWwge2Rpc3BsYXk6IGlubGluZS1ibG9jazsgdmVydGljYWwtYWxpZ246IG1pZGRsZTt9DQoJCWZvcm0uZm9ybUludGVncmF0aW9uMiBkaXYuaG9yaXpvbnRhbC5kaXZsYWJlbCB7d2lkdGg6IDI4JTsgbWFyZ2luLXJpZ2h0OiAyJTsgdGV4dC1hbGlnbjogcmlnaHQ7fQ0KCQlmb3JtLmZvcm1JbnRlZ3JhdGlvbjIgZGl2Lmhvcml6b250YWwuZGl2aW5wdXQge3dpZHRoOiA3MCV9DQoNCgkJZm9ybS5mb3JtSW50ZWdyYXRpb24yIGRpdi5jb250YWluZXJBbGxJbmxpbmUgZGl2LmJsb2NrIHtkaXNwbGF5OiBpbmxpbmUtYmxvY2s7IG1hcmdpbi1yaWdodDogNXB4OyBtYXJnaW4tYm90dG9tOiA1cHg7fQ0KCQlmb3JtLmZvcm1JbnRlZ3JhdGlvbjIgZGl2LmNvbnRhaW5lckFsbElubGluZSBkaXYuaG9yaXpvbnRhbC5kaXZpbnB1dCB7d2lkdGg6IDE4MnB4fQ0KDQoJCWZvcm0uZm9ybUludGVncmF0aW9uMiAuc3VibWl0IHtwb3NpdGlvbjogcmVsYXRpdmU7IHdpZHRoOiAxMDAlfQ0KCQlmb3JtLmZvcm1JbnRlZ3JhdGlvbjIgLnN1Ym1pdC5jbGFzczEge3RleHQtYWxpZ246bGVmdDt9DQoJCWZvcm0uZm9ybUludGVncmF0aW9uMiAuc3VibWl0LmNsYXNzMiB7dGV4dC1hbGlnbjpsZWZ0OyB3aWR0aDogNzAlfQ0KCQlmb3JtLmZvcm1JbnRlZ3JhdGlvbjIgLnN1Ym1pdC5jbGFzczMge3RleHQtYWxpZ246Y2VudGVyO30NCgkJZm9ybS5mb3JtSW50ZWdyYXRpb24yIC5zdWJtaXQuY2xhc3M0IHt0ZXh0LWFsaWduOnJpZ2h0O30NCgkJZm9ybS5mb3JtSW50ZWdyYXRpb24yIC5zdWJtaXQuY2xhc3M1IHt0ZXh0LWFsaWduOmNlbnRlcjt9DQoJCWZvcm0uZm9ybUludGVncmF0aW9uMiAuc3VibWl0LmNsYXNzNSBpbnB1dFt0eXBlPXN1Ym1pdF0ge3dpZHRoOjEwMCV9DQoJCWZvcm0uZm9ybUludGVncmF0aW9uMiAuc3Bpbm5lciB7ZGlzcGxheTogbm9uZTt9DQoNCgkJZm9ybS5mb3JtSW50ZWdyYXRpb24yLnN0eWxlMSBsYWJlbHsgY29sb3I6ICM0YTU3NjU7IGZvbnQtZmFtaWx5OiBhcmlhbDsgZm9udC1zaXplOiAxNHB4OyB9DQoJCWZvcm0uZm9ybUludGVncmF0aW9uMi5zdHlsZTEgaW5wdXRbdHlwZT0idGV4dCJdeyBib3JkZXI6IDJweCBzb2xpZCAjYmVjNWNiOyAtd2Via2l0LWJvcmRlci1yYWRpdXM6IDNweDsgLW1vei1ib3JkZXItcmFkaXVzOiAzcHg7IGJvcmRlci1yYWRpdXM6IDNweDsgYm94LXNoYWRvdzogMCAwIDAgNHB4IHRyYW5zcGFyZW50OyBjb2xvcjogIzRhNTc2NjsgZm9udC1zaXplOiAxM3B4OyBwYWRkaW5nOiA5cHggNnB4OyBoZWlnaHQ6IDM4cHg7fQ0KCQlmb3JtLmZvcm1JbnRlZ3JhdGlvbjIuc3R5bGUxIGlucHV0W3R5cGU9InN1Ym1pdCJdeyAtd2Via2l0LWFwcGVhcmFuY2U6IG5vbmU7IGJvcmRlcjogbWVkaXVtIG5vbmU7IGJhY2tncm91bmQtY29sb3I6ICMwZTZlMGU7IGNvbG9yOiAjZmZmZmZmOyBjdXJzb3I6IHBvaW50ZXI7IGZvbnQ6IGJvbGQgMTNweC8zOHB4IEFyaWFsOyBoZWlnaHQ6IDM4cHg7IHBhZGRpbmc6IDAgMTVweDsgZGlzcGxheTogaW5saW5lLWJsb2NrOyAtd2Via2l0LWJvcmRlci1yYWRpdXM6IDNweDsgLW1vei1ib3JkZXItcmFkaXVzOiAzcHg7IGJvcmRlci1yYWRpdXM6IDNweDsgbWFyZ2luOiA1cHggMCAwIDA7fQ0KCQlmb3JtLmZvcm1JbnRlZ3JhdGlvbjIuc3R5bGUxIGRpdi5jb250YWluZXJNdWx0aXBsZSwNCgkJZm9ybS5mb3JtSW50ZWdyYXRpb24yLnN0eWxlMSBzZWxlY3QsDQoJCWZvcm0uZm9ybUludGVncmF0aW9uMi5zdHlsZTEgdGV4dGFyZWF7Ym9yZGVyOiAycHggc29saWQgI2JlYzVjYjsgYm9yZGVyLXJhZGl1czogM3B4OyAtd2Via2l0LWJvcmRlci1yYWRpdXM6IDNweDsgLW1vei1ib3JkZXItcmFkaXVzOiAzcHg7IGJveC1zaGFkb3c6IDAgMCAwIDRweCB0cmFuc3BhcmVudDsgY29sb3I6ICM0YTU3NjY7fQ0KCQlmb3JtLmZvcm1JbnRlZ3JhdGlvbjIuc3R5bGUxIHNlbGVjdHtoZWlnaHQ6NDBweDt9DQoJCWZvcm0uZm9ybUludGVncmF0aW9uMi5zdHlsZTEgdGV4dGFyZWF7bWF4LWhlaWdodDogMjAwcHg7IG1pbi1oZWlnaHQ6IDUycHg7fQ0KCQlmb3JtLmZvcm1JbnRlZ3JhdGlvbjIuc3R5bGUxIC5zcGlubmVyIHsgZGlzcGxheTogbm9uZTsgYm90dG9tOiAwOyBoZWlnaHQ6IDE4cHg7IGxlZnQ6IDA7IG1hcmdpbjogYXV0bzsgcG9zaXRpb246IGFic29sdXRlOyByaWdodDogMDsgdG9wOiAwOyB9DQoJCWZvcm0uZm9ybUludGVncmF0aW9uMi5zdHlsZTEgLnNwaW5uZXIgPiBkaXYgeyB3aWR0aDogMThweDsgaGVpZ2h0OiAxOHB4OyBiYWNrZ3JvdW5kLWNvbG9yOiAjZmZmOyBib3JkZXItcmFkaXVzOiAxMDAlOyBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7IC13ZWJraXQtYW5pbWF0aW9uOiBzay1ib3VuY2VkZWxheSAxLjRzIGluZmluaXRlIGVhc2UtaW4tb3V0IGJvdGg7IGFuaW1hdGlvbjogc2stYm91bmNlZGVsYXkgMS40cyBpbmZpbml0ZSBlYXNlLWluLW91dCBib3RoO30NCgkJZm9ybS5mb3JtSW50ZWdyYXRpb24yLnN0eWxlMSAuc3Bpbm5lciAuYm91bmNlMSB7IC13ZWJraXQtYW5pbWF0aW9uLWRlbGF5OiAtMC4zMnM7IGFuaW1hdGlvbi1kZWxheTogLTAuMzJzO30NCgkJZm9ybS5mb3JtSW50ZWdyYXRpb24yLnN0eWxlMSAuc3Bpbm5lciAuYm91bmNlMiB7IC13ZWJraXQtYW5pbWF0aW9uLWRlbGF5OiAtMC4xNnM7IGFuaW1hdGlvbi1kZWxheTogLTAuMTZzO30NCgkJDQoJCWZvcm0uZm9ybUludGVncmF0aW9uMi5zdHlsZTEgLmNoZWNrYm94LWNvbnRhaW5lciB7ZGlzcGxheTogYmxvY2s7IHBvc2l0aW9uOiBhYnNvbHV0ZSAhaW1wb3J0YW50OyBwYWRkaW5nLWxlZnQ6IDIycHg7IG1hcmdpbi1ib3R0b206IDRweDsgY3Vyc29yOiBwb2ludGVyOyAtd2Via2l0LXVzZXItc2VsZWN0OiBub25lOyAtbW96LXVzZXItc2VsZWN0OiBub25lOyAtbXMtdXNlci1zZWxlY3Q6IG5vbmU7IHVzZXItc2VsZWN0OiBub25lOyB9DQoJCWZvcm0uZm9ybUludGVncmF0aW9uMi5zdHlsZTEgLmNoZWNrYm94LWNvbnRhaW5lciBpbnB1dCB7cG9zaXRpb246IGFic29sdXRlOyBvcGFjaXR5OiAwOyBjdXJzb3I6IHBvaW50ZXI7IGhlaWdodDogMDsgd2lkdGg6IDA7IHRvcDogMDsgbGVmdDogMDt9DQoJCWZvcm0uZm9ybUludGVncmF0aW9uMi5zdHlsZTEgLmNoZWNrbWFyayB7cG9zaXRpb246IGFic29sdXRlOyB0b3A6IDA7IGxlZnQ6IDA7IGhlaWdodDogMThweDsgd2lkdGg6IDE4cHg7IGJhY2tncm91bmQtY29sb3I6ICNGRkY7IGJvcmRlcjogMnB4IHNvbGlkICNCQkI7IGJvcmRlci1yYWRpdXM6IDNweDsgfQ0KCQlmb3JtLmZvcm1JbnRlZ3JhdGlvbjIuc3R5bGUxIC5jaGVja2JveC1jb250YWluZXI6aG92ZXIgaW5wdXQgfiAuY2hlY2ttYXJrIHtib3JkZXI6IDJweCBzb2xpZCAjNzc3OyB9DQoJCWZvcm0uZm9ybUludGVncmF0aW9uMi5zdHlsZTEgLmNoZWNrbWFyazphZnRlciB7Y29udGVudDogIiI7IHBvc2l0aW9uOiBhYnNvbHV0ZTsgZGlzcGxheTogbm9uZTsgfQ0KCQlmb3JtLmZvcm1JbnRlZ3JhdGlvbjIuc3R5bGUxIC5jaGVja2JveC1jb250YWluZXIgaW5wdXQ6Y2hlY2tlZCB+IC5jaGVja21hcms6YWZ0ZXIge2Rpc3BsYXk6IGJsb2NrOyB9DQoJCWZvcm0uZm9ybUludGVncmF0aW9uMi5zdHlsZTEgLmNoZWNrYm94LWNvbnRhaW5lciAuY2hlY2ttYXJrOmFmdGVyIHtsZWZ0OiA1cHg7IHRvcDogMHB4OyB3aWR0aDogNXB4OyBoZWlnaHQ6IDEycHg7IGJvcmRlcjogc29saWQgIzU1NTsgYm9yZGVyLXdpZHRoOiAwIDNweCAzcHggMDsgLXdlYmtpdC10cmFuc2Zvcm06IHJvdGF0ZSg0NWRlZyk7IC1tcy10cmFuc2Zvcm06IHJvdGF0ZSg0NWRlZyk7IHRyYW5zZm9ybTogcm90YXRlKDQ1ZGVnKTsgfSANCg0KCQlmb3JtLmZvcm1JbnRlZ3JhdGlvbjIuc3R5bGUyIGxhYmVseyBmb250LWZhbWlseTogYXJpYWw7IGZvbnQtc2l6ZTogMTRweDsgfQ0KCQlmb3JtLmZvcm1JbnRlZ3JhdGlvbjIuc3R5bGUyIGlucHV0W3R5cGU9InRleHQiXSB7IGJvcmRlcjogMXB4IHNvbGlkICNiZWM1Y2I7IGJveC1zaGFkb3c6IDAgMCAwIDRweCB0cmFuc3BhcmVudDsgY29sb3I6ICM0YTU3NjY7IGZvbnQtc2l6ZTogMTNweDsgcGFkZGluZzogOXB4IDZweDt9DQoJCWZvcm0uZm9ybUludGVncmF0aW9uMi5zdHlsZTIgZGl2LmNvbnRhaW5lck11bHRpcGxlIHttYXgtaGVpZ2h0OjgycHg7fQ0KCQlmb3JtLmZvcm1JbnRlZ3JhdGlvbjIuc3R5bGUyIGRpdi5jb250YWluZXJNdWx0aXBsZSwNCgkJZm9ybS5mb3JtSW50ZWdyYXRpb24yLnN0eWxlMiBzZWxlY3QsDQoJCWZvcm0uZm9ybUludGVncmF0aW9uMi5zdHlsZTIgdGV4dGFyZWEge2JvcmRlcjogMXB4IHNvbGlkICNiZWM1Y2I7IGJveC1zaGFkb3c6IDAgMCAwIDRweCB0cmFuc3BhcmVudDsgY29sb3I6ICM0YTU3NjY7IH0NCgkJZm9ybS5mb3JtSW50ZWdyYXRpb24yLnN0eWxlMiBzZWxlY3R7aGVpZ2h0OjQwcHg7fQ0KCQlmb3JtLmZvcm1JbnRlZ3JhdGlvbjIuc3R5bGUyIHRleHRhcmVhe21heC1oZWlnaHQ6IDIwMHB4OyBtaW4taGVpZ2h0OiA1MnB4O30NCgkJZm9ybS5mb3JtSW50ZWdyYXRpb24yLnN0eWxlMiA6Oi13ZWJraXQtaW5wdXQtcGxhY2Vob2xkZXIgeyBjb2xvcjogIzAwMDAwMDsgfQ0KCQlmb3JtLmZvcm1JbnRlZ3JhdGlvbjIuc3R5bGUyIDo6LW1vei1wbGFjZWhvbGRlciB7IGNvbG9yOiAjMDAwMDAwOyBmb250LWZhbWlseTogYXJpYWw7IH0NCgkJZm9ybS5mb3JtSW50ZWdyYXRpb24yLnN0eWxlMiA6LW1zLWlucHV0LXBsYWNlaG9sZGVyIHsgY29sb3I6ICMwMDAwMDA7IGZvbnQtZmFtaWx5OiBhcmlhbDsgfQ0KCQlmb3JtLmZvcm1JbnRlZ3JhdGlvbjIuc3R5bGUyIDotbW96LXBsYWNlaG9sZGVyIHsgY29sb3I6ICMwMDAwMDA7IGZvbnQtZmFtaWx5OiBhcmlhbDsgfQ0KCQlmb3JtLmZvcm1JbnRlZ3JhdGlvbjIuc3R5bGUyIC5zcGlubmVyIHsgZGlzcGxheTogbm9uZTsgYm90dG9tOiAwOyBoZWlnaHQ6IDE4cHg7IGxlZnQ6IDA7IG1hcmdpbjogYXV0bzsgcG9zaXRpb246IGFic29sdXRlOyByaWdodDogMDsgdG9wOiAwOyB9DQoJCWZvcm0uZm9ybUludGVncmF0aW9uMi5zdHlsZTIgLnNwaW5uZXIgPiBkaXYgeyB3aWR0aDogMThweDsgaGVpZ2h0OiAxOHB4OyBiYWNrZ3JvdW5kLWNvbG9yOiAjZmZmOyBib3JkZXItcmFkaXVzOiAxMDAlOyBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7IC13ZWJraXQtYW5pbWF0aW9uOiBzay1ib3VuY2VkZWxheSAxLjRzIGluZmluaXRlIGVhc2UtaW4tb3V0IGJvdGg7IGFuaW1hdGlvbjogc2stYm91bmNlZGVsYXkgMS40cyBpbmZpbml0ZSBlYXNlLWluLW91dCBib3RoO30NCgkJZm9ybS5mb3JtSW50ZWdyYXRpb24yLnN0eWxlMiAuc3Bpbm5lciAuYm91bmNlMSB7IC13ZWJraXQtYW5pbWF0aW9uLWRlbGF5OiAtMC4zMnM7IGFuaW1hdGlvbi1kZWxheTogLTAuMzJzO30NCgkJZm9ybS5mb3JtSW50ZWdyYXRpb24yLnN0eWxlMiAuc3Bpbm5lciAuYm91bmNlMiB7IC13ZWJraXQtYW5pbWF0aW9uLWRlbGF5OiAtMC4xNnM7IGFuaW1hdGlvbi1kZWxheTogLTAuMTZzO30NCg0KCQlALXdlYmtpdC1rZXlmcmFtZXMgc2stYm91bmNlZGVsYXkgeyAwJSwgODAlLCAxMDAlIHsgLXdlYmtpdC10cmFuc2Zvcm06IHNjYWxlKDApIH0gNDAlIHsgLXdlYmtpdC10cmFuc2Zvcm06IHNjYWxlKDEuMCkgfX0NCgkJQGtleWZyYW1lcyBzay1ib3VuY2VkZWxheSB7IDAlLCA4MCUsIDEwMCUgeyAtd2Via2l0LXRyYW5zZm9ybTogc2NhbGUoMCk7IHRyYW5zZm9ybTogc2NhbGUoMCk7IH0gNDAlIHsgLXdlYmtpdC10cmFuc2Zvcm06IHNjYWxlKDEuMCk7IHRyYW5zZm9ybTogc2NhbGUoMS4wKTsgfX0NCgkJDQoJICAgIEB2aWV3cG9ydCB7IHdpZHRoOiBkZXZpY2Utd2lkdGg7IGhlaWdodDogZGV2aWNlLWhlaWdodDsgem9vbTogMS4wIDsgfQ0KCQlALW1zLXZpZXdwb3J0IHsgd2lkdGg6IGRldmljZS13aWR0aDsgaGVpZ2h0OiBkZXZpY2UtaGVpZ2h0OyB9DQoNCgkgICAgYm9keSB7DQoJCQlmb250LWZhbWlseTogYXJpYWw7DQoJCQlmb250LXNpemU6IDE0cHg7DQoJICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjRkZGRkZGOw0KCSAgICAgICAgcGFkZGluZzogMDsNCgkgICAgICAgIG1hcmdpbjogMDsNCgkgICAgICAgIGhlaWdodDogMTAwJTsNCgkgICAgfQ0KDQoJICAgIC50aXRsZSB7DQoJICAgICAgICB0ZXh0LWFsaWduOiBjZW50ZXI7DQoJCQljb2xvcjogI0ZGRkZGRjsNCgkJCWZvbnQtc2l6ZTogMjRweDsNCgkgICAgICAgIGZvbnQtd2VpZ2h0OiBib2xkOw0KCSAgICAgICAgbWFyZ2luOiAxMHB4IDA7Y29sb3I6ICMwMDAwMDA7DQoJCX0NCgkgICAgLnRleHQgew0KCSAgICAgICAgdGV4dC1hbGlnbjogY2VudGVyOw0KCSAgICAgICAgbWFyZ2luOiAwIDUwcHg7DQoJICAgICAgICBjb2xvcjogIzAwMDAwMDsNCgkgICAgfQ0KDQoNCgkgICAgZm9ybS5mb3JtSW50ZWdyYXRpb24yLnN0eWxlMiAuc3VibWl0IGlucHV0W3R5cGU9c3VibWl0XSB7DQoJICAgICAgICBib3JkZXI6IDA7IA0KCSAgICAgICAgcGFkZGluZzogMTBweCAxNXB4Ow0KCSAgICAgICAgY29sb3I6ICNGRkZGRkY7DQoJICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjMDAwMDAwOw0KCSAgICAgICAgY3Vyc29yOiBwb2ludGVyOw0KCSAgICAgICAgZm9udC13ZWlnaHQ6IGJvbGQ7DQoJICAgIH0NCgkJCUBtZWRpYSBzY3JlZW4gYW5kIChtaW4td2lkdGg6IDUwMXB4KXsNCgkJCQkuaW1nIHsgbWluLWhlaWdodDogNDMzcHggfQ0KCQkJfQ0KCQkJQG1lZGlhIHNjcmVlbiBhbmQgKG1pbi13aWR0aDogMzAwcHgpew0KCQkJCS5zY3JvbGxib3gtMDcgLmltZywNCgkJCQkuc2Nyb2xsYm94LTA4IC5pbWcgeyBtaW4taGVpZ2h0OiA0MzNweCB9DQoJCQl9DQoJICAgIC5pbWcgaW1nIHt3aWR0aDogMTAwJTsgaGVpZ2h0OiBhdXRvO30NCg0KDQoJICAgIC8qb3ZlcnJpZGUqLw0KCSAgICBmb3JtLmZvcm1JbnRlZ3JhdGlvbjIgLkRpbmFtaXplRGl2TWVzc2FnZVN1Y2Nlc3MsDQoJICAgIGZvcm0uZm9ybUludGVncmF0aW9uMiAuRGluYW1pemVEaXZNZXNzYWdlQWxlcnQsDQoJICAgIGZvcm0uZm9ybUludGVncmF0aW9uMiAuRGluYW1pemVEaXZNZXNzYWdlRXJyb3IsDQoJICAgIGZvcm0uZm9ybUludGVncmF0aW9uMiAuRGluYW1pemVEaXZDYXB0Y2hhTWVzc2FnZSB7Y29sb3I6ICMwMDAwMDAgIWltcG9ydGFudDt9DQoNCgkJLnRvcGJhci0wMywgLnRvcGJhci0wNCwgLnRvcGJhci0wNiB7bWF4LXdpZHRoOiA3NTBweDsgbWFyZ2luOiBhdXRvO30NCgkgICAgDQoJCQkJQG1lZGlhIHNjcmVlbiBhbmQgKG1heC13aWR0aDo1MDBweCkgew0KCQkJCQkucG9wb3Zlci0wNiAuZm9ybSB7IHdpZHRoOiBjYWxjKDEwMCUgLSAzMHB4KTsgcGFkZGluZzogMTVweDsgfQ0KCQkJCQkucG9wb3Zlci0wNiAudGV4dGJsb2NrIHsgd2lkdGg6IGNhbGMoMTAwJSAtIDMwcHgpOyBwYWRkaW5nOiAxNXB4OyB9DQoJCQkJfQ0KCQkJCUBtZWRpYSBzY3JlZW4gYW5kIChtaW4td2lkdGg6IDUwMXB4KSBhbmQgKG1heC13aWR0aDo4NTBweCl7DQoJCQkJCS5wb3BvdmVyLTA2IC5mb3JtIHsgd2lkdGg6IGNhbGMoNTAlIC0gNTBweCk7IHBhZGRpbmc6IDI1cHg7IH0NCgkJCQkJLnBvcG92ZXItMDYgLnRleHRibG9jayB7IHdpZHRoOiBjYWxjKDUwJSAtIDUwcHgpOyBwYWRkaW5nOiAyNXB4OyB9DQoJCQkJfQ0KCQkJCUBtZWRpYSBzY3JlZW4gYW5kIChtaW4td2lkdGg6ODUxcHgpew0KCQkJCQkucG9wb3Zlci0wNiAuZm9ybSB7IHdpZHRoOiBjYWxjKDUwJSAtIDUwcHgpOyBwYWRkaW5nOiAyNXB4OyB9DQoJCQkJCS5wb3BvdmVyLTA2IC50ZXh0YmxvY2sgeyB3aWR0aDogY2FsYyg1MCUgLSA1MHB4KTsgcGFkZGluZzogMjVweDsgfQ0KCQkJCX0NCgkJCQkucG9wb3Zlci0wNiAuaW1nIHsgd2lkdGg6IDEwMCU7IH0NCgkJCQkucG9wb3Zlci0wNiAuY29udGVudCB7bWF4LXdpZHRoOjEwMCU7IGRpc3BsYXk6IGZsZXg7IGZsZXgtZmxvdzogcm93IHdyYXA7IGp1c3RpZnktY29udGVudDogc3BhY2UtYXJvdW5kO30NCgkJCQkucG9wb3Zlci0wNiAuaW1nIGltZyB7IG1heC13aWR0aDogMTAwJTsgbWFyZ2luOiBhdXRvOyBkaXNwbGF5OiBibG9jazsgfQ0KCQkJCS5wb3BvdmVyLTA2IC50aXRsZSB7IG1hcmdpbjogMCAwIDEwcHggMDsgfQ0KCQkJCS5wb3BvdmVyLTA2IC50ZXh0IHsgbWFyZ2luOiAwOyB9DQoJCQkJLnBvcG92ZXItMDYgLmNvbnRlbnQgLmZvcm0gLnN1Ym1pdCB7IHBhZGRpbmctdG9wOiAxMHB4OyB9DQoJCQkJPC9zdHlsZT4gICAgIA0KCQk8L2hlYWQ+DQoJCTxib2R5Pg0KCQkgICAgPGRpdiBjbGFzcz0icG9wb3Zlci0wNiI+PGRpdiBjbGFzcz0iY29udGVudCI+PGRpdiBjbGFzcz0iaW1nIj48aW1nIHNyYz0iaHR0cHM6Ly9kbC5kbnpkbnMuY29tL3YvQUlENzBlQUJGMDQ0OCIgLz48L2Rpdj48ZGl2IGNsYXNzPSJ0ZXh0YmxvY2siPg0KICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9InRpdGxlIj5RdWVyIHJlY2ViZXIgbm9zc2FzIG5vdmlkYWRlcyBlIGN1cG9ucyBkZSBkZXNjb250bz88L2Rpdj4NCiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJ0ZXh0Ij5DYWRhc3RyZS1zZSBlIHZvYyZlY2lyYzsgZmljYXImYWFjdXRlOyBwb3IgZGVudHJvIGRlIHR1ZG8hJm5ic3A7PGIgc3R5bGU9ImNvbG9yOiByZ2IoMzIsIDMzLCAzNik7IGZvbnQtZmFtaWx5OiBhcmlhbCwgc2Fucy1zZXJpZjsgZm9udC1zaXplOiAxNnB4OyI+JmhlYXJ0czs8L2I+PC9kaXY+DQogICAgICAgICAgICA8L2Rpdj4NCiAgICAgICAgICAgIDxkaXYgY2xhc3M9ImZvcm0iPjxmb3JtIHZlcnNpb249IjIuMCIgY2xhc3M9ImZvcm1JbnRlZ3JhdGlvbiBmb3JtSW50ZWdyYXRpb24yIHN0eWxlMiIgYWNjZXB0LWNoYXJzZXQ9IlVURi04IiBtZXRob2Q9InBvc3QiIG9uc3VibWl0PSJyZXR1cm4gZGluRm9ybXMuVmFsaWRhdGVGb3JtKHRoaXMpIiBhY3Rpb249Imh0dHBzOi8vcmVjZWl2ZXIuZW1rdC5kaW5hbWl6ZS5jb20vaW4vMzMwOTQ2LzEvZmUwYjgvMCIgdGFyZ2V0PSJEaW5hbWl6ZUlmcmFtZUZvcm1JbnRlZ3JhdGlvbiI+DQoJCSAgICA8aW5wdXQgdHlwZT0iaGlkZGVuIiBuYW1lPSJ1cGRhdGVfbW9kZSIgdmFsdWU9IkFTIi8+DQoJCSAgICA8aW5wdXQgdHlwZT0iaGlkZGVuIiBuYW1lPSJmb3JtLWNvZGUiIHZhbHVlPSI3Ii8+DQoJCSAgICA8aW5wdXQgdHlwZT0iaGlkZGVuIiBuYW1lPSJpc01zZyIgdmFsdWU9InRydWUiLz48ZGl2IGNsYXNzPSJEaW5hbWl6ZURpdkNhcHRjaGFNZXNzYWdlIj5DYXB0Y2hhIG9icmlnYXTDs3JpbzwvZGl2PjxkaXYgY2xhc3M9IkRpbmFtaXplRGl2TWVzc2FnZUFsZXJ0Ij48L2Rpdj4NCgkJICAgICAgICA8ZGl2IGNsYXNzPSJEaW5hbWl6ZURpdk1lc3NhZ2VTdWNjZXNzIj5TZXUgZS1tYWlsIGZvaSBjYWRhc3RyYWRvIGNvbSBzdWNlc3NvICZsdDszPC9kaXY+DQoJCSAgICAgICAgPGRpdiBjbGFzcz0iRGluYW1pemVEaXZNZXNzYWdlRXJyb3IiPjwvZGl2Pg0KCQkgICAgICAgIDxpbnB1dCB0eXBlPSJoaWRkZW4iIG5hbWU9InRleHQtY29uZmlybWF0aW9uIiB2YWx1ZT0iVTJWMUlHVXRiV0ZwYkNCbWIya2dZMkZrWVhOMGNtRmtieUJqYjIwZ2MzVmpaWE56YnlBbWJIUTdNdz09Ii8+DQoJCSAgICAgICAgPGlucHV0IHR5cGU9ImhpZGRlbiIgbmFtZT0idGV4dC1lcnJvciIgdmFsdWU9IiIvPg0KCQkgICAgICAgIDxpbnB1dCB0eXBlPSJoaWRkZW4iIG5hbWU9InRleHQtYWxlcnQiIHZhbHVlPSIiLz48aW5wdXQgdHlwZT0iaGlkZGVuIiBuYW1lPSJjbXA0IiB2YWx1ZT0iUG9wLXVwIi8+PGlucHV0IHR5cGU9ImhpZGRlbiIgbmFtZT0iaWdub3JlLWZpZWxkcyIgdmFsdWU9Im9uIi8+PGlucHV0IHR5cGU9ImhpZGRlbiIgbmFtZT0icGhhc2UtY2hhbmdlIiB2YWx1ZT0ib24iLz48ZGl2IGNsYXNzPSIiPjxkaXYgY2xhc3M9ImJsb2NrIj48ZGl2IGNsYXNzPSJ2ZXJ0aWNhbCBkaXZpbnB1dCI+PGlucHV0IHR5cGU9InRleHQiIG5hbWU9ImNtcDEiICBwbGFjZWhvbGRlcj0iRS1tYWlsIiBmb3JtYXQ9IiIgIGNsYXNzPSJ0eXBlX0VNQUlMIGZpZWxkLXJlcXVpcmVkICIgbWF4bGVuZ3RoPSI4MCIgLz4NCgkJICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2Pg0KCQkgICAgICAgICAgICA8L2Rpdj48ZGl2IGNsYXNzPSJibG9jayI+PGRpdiBjbGFzcz0idmVydGljYWwgZGl2aW5wdXQiPjxpbnB1dCB0eXBlPSJ0ZXh0IiBuYW1lPSJjbXAyIiAgcGxhY2Vob2xkZXI9Ik5vbWUiIGZvcm1hdD0iIiAgY2xhc3M9InR5cGVfVkMgICIgbWF4bGVuZ3RoPSI4MCIgLz4NCgkJICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2Pg0KCQkgICAgICAgICAgICA8L2Rpdj48ZGl2IGNsYXNzPSJibG9jayI+DQoJCSAgICAgICAgICAgIDxkaXYgY2xhc3M9InZlcnRpY2FsIGNsYXNzMyBzdWJtaXQgc3VibWl0LWJ1dHRvbi10ZCI+DQoJCSAgICAgICAgICAgICAgICA8aW5wdXQgdHlwZT0ic3VibWl0IiB2YWx1ZT0iQ2FkYXN0cmFyIiBvcmlnaW5hbC12YWx1ZT0iQ2FkYXN0cmFyIiBjbGFzcz0iZGluU3VibWl0IiAvPg0KCQkgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0ic3Bpbm5lciI+PGRpdiBjbGFzcz0iYm91bmNlMSI+PC9kaXY+PGRpdiBjbGFzcz0iYm91bmNlMiI+PC9kaXY+PGRpdiBjbGFzcz0iYm91bmNlMyI+PC9kaXY+PC9kaXY+DQoJCSAgICAgICAgICAgIDwvZGl2Pg0KCQkgICAgICAgIDwvZGl2Pg0KCQkgICAgPC9kaXY+DQoJCTwvZm9ybT4NCgkJICAgICAgICAgICAgPC9kaXY+DQoJCSAgICAgICAgICAgIDxkaXYgc3R5bGU9ImNsZWFyOiBib3RoOyI+PC9kaXY+DQoJCSAgICAgICAgPC9kaXY+ICANCgkJICAgIDwvZGl2Pg0KCQk8L2JvZHk+DQoJCTwvaHRtbD48c2NyaXB0IHR5cGU9InRleHQvamF2YXNjcmlwdCI+DQoNCgkJLyogU3VnZ2VzdGVkIFBob25lIFZhbGlkYXRpb24gPT0+IGh0dHA6Ly9qYWNrb2Nuci5jb20vaW50bC10ZWwtaW5wdXQuaHRtbCovDQoNCgkJIWZ1bmN0aW9uKHQsZSl7ImZ1bmN0aW9uIj09dHlwZW9mIGRlZmluZSYmZGVmaW5lLmFtZD9kZWZpbmUoZSk6Im9iamVjdCI9PXR5cGVvZiBleHBvcnRzP21vZHVsZS5leHBvcnRzPWUoKTp0LlZNYXNrZXI9ZSgpfSh0aGlzLGZ1bmN0aW9uKCl7dmFyIHQ9IjkiLGU9IkEiLG49IlMiLGk9WzgsOSwxNiwxNywxOCwzNiwzNywzOCwzOSw0MCw5MSw5Miw5M10sbz1mdW5jdGlvbih0KXtmb3IodmFyIGU9MCxuPWkubGVuZ3RoO24+ZTtlKyspaWYodD09aVtlXSlyZXR1cm4hMTtyZXR1cm4hMH0scj1mdW5jdGlvbih0KXtyZXR1cm4gdD10fHx7fSx0PXtwcmVjaXNpb246dC5oYXNPd25Qcm9wZXJ0eSgicHJlY2lzaW9uIik/dC5wcmVjaXNpb246MixzZXBhcmF0b3I6dC5zZXBhcmF0b3J8fCIsIix1bml0OnQudW5pdCYmdC51bml0LnJlcGxhY2UoL1tcc10vZywiIikrIiAifHwiIixzdWZmaXhVbml0OnQuc3VmZml4VW5pdCYmIiAiK3Quc3VmZml4VW5pdC5yZXBsYWNlKC9bXHNdL2csIiIpfHwiIix6ZXJvQ2VudHM6dC56ZXJvQ2VudHMsbGFzdE91dHB1dDp0Lmxhc3RPdXRwdXR9LHQubW9uZXlQcmVjaXNpb249dC56ZXJvQ2VudHM/MDp0LnByZWNpc2lvbix0fSxzPWZ1bmN0aW9uKGksbyxyKXtmb3IoO288aS5sZW5ndGg7bysrKShpW29dPT09dHx8aVtvXT09PWV8fGlbb109PT1uKSYmKGlbb109cik7cmV0dXJuIGl9LGw9ZnVuY3Rpb24odCl7dGhpcy5lbGVtZW50cz10fTtsLnByb3RvdHlwZS51bmJpbmRFbGVtZW50VG9NYXNrPWZ1bmN0aW9uKCl7Zm9yKHZhciB0PTAsZT10aGlzLmVsZW1lbnRzLmxlbmd0aDtlPnQ7dCsrKXRoaXMuZWxlbWVudHNbdF0ubGFzdE91dHB1dD0iIix0aGlzLmVsZW1lbnRzW3RdLm9ua2V5dXA9ITEsdGhpcy5lbGVtZW50c1t0XS5vbmtleWRvd249ITEsdGhpcy5lbGVtZW50c1t0XS52YWx1ZS5sZW5ndGgmJih0aGlzLmVsZW1lbnRzW3RdLnZhbHVlPXRoaXMuZWxlbWVudHNbdF0udmFsdWUucmVwbGFjZSgvXEQvZywiIikpfSxsLnByb3RvdHlwZS5iaW5kRWxlbWVudFRvTWFzaz1mdW5jdGlvbih0KXtmb3IodmFyIGU9dGhpcyxuPWZ1bmN0aW9uKG4pe249bnx8d2luZG93LmV2ZW50O3ZhciBpPW4udGFyZ2V0fHxuLnNyY0VsZW1lbnQ7byhuLmtleUNvZGUpJiZzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7ZS5vcHRzLmxhc3RPdXRwdXQ9aS5sYXN0T3V0cHV0LGkudmFsdWU9YVt0XShpLnZhbHVlLGUub3B0cyksaS5sYXN0T3V0cHV0PWkudmFsdWUsaS5zZXRTZWxlY3Rpb25SYW5nZSYmZS5vcHRzLnN1ZmZpeFVuaXQmJmkuc2V0U2VsZWN0aW9uUmFuZ2UoaS52YWx1ZS5sZW5ndGgsaS52YWx1ZS5sZW5ndGgtZS5vcHRzLnN1ZmZpeFVuaXQubGVuZ3RoKX0sMCl9LGk9MCxyPXRoaXMuZWxlbWVudHMubGVuZ3RoO3I+aTtpKyspdGhpcy5lbGVtZW50c1tpXS5sYXN0T3V0cHV0PSIiLHRoaXMuZWxlbWVudHNbaV0ub25rZXl1cD1uLHRoaXMuZWxlbWVudHNbaV0udmFsdWUubGVuZ3RoJiYodGhpcy5lbGVtZW50c1tpXS52YWx1ZT1hW3RdKHRoaXMuZWxlbWVudHNbaV0udmFsdWUsdGhpcy5vcHRzKSl9LGwucHJvdG90eXBlLm1hc2tNb25leT1mdW5jdGlvbih0KXt0aGlzLm9wdHM9cih0KSx0aGlzLmJpbmRFbGVtZW50VG9NYXNrKCJ0b01vbmV5Iil9LGwucHJvdG90eXBlLm1hc2tOdW1iZXI9ZnVuY3Rpb24oKXt0aGlzLm9wdHM9e30sdGhpcy5iaW5kRWxlbWVudFRvTWFzaygidG9OdW1iZXIiKX0sbC5wcm90b3R5cGUubWFza0FscGhhTnVtPWZ1bmN0aW9uKCl7dGhpcy5vcHRzPXt9LHRoaXMuYmluZEVsZW1lbnRUb01hc2soInRvQWxwaGFOdW1lcmljIil9LGwucHJvdG90eXBlLm1hc2tQYXR0ZXJuPWZ1bmN0aW9uKHQpe3RoaXMub3B0cz17cGF0dGVybjp0fSx0aGlzLmJpbmRFbGVtZW50VG9NYXNrKCJ0b1BhdHRlcm4iKX0sbC5wcm90b3R5cGUudW5NYXNrPWZ1bmN0aW9uKCl7dGhpcy51bmJpbmRFbGVtZW50VG9NYXNrKCl9O3ZhciBhPWZ1bmN0aW9uKHQpe2lmKCF0KXRocm93IG5ldyBFcnJvcigiVmFuaWxsYU1hc2tlcjogVGhlcmUgaXMgbm8gZWxlbWVudCB0byBiaW5kLiIpO3ZhciBlPSJsZW5ndGgiaW4gdD90Lmxlbmd0aD90OltdOlt0XTtyZXR1cm4gbmV3IGwoZSl9O3JldHVybiBhLnRvTW9uZXk9ZnVuY3Rpb24odCxlKXtpZihlPXIoZSksZS56ZXJvQ2VudHMpe2UubGFzdE91dHB1dD1lLmxhc3RPdXRwdXR8fCIiO3ZhciBuPSIoIitlLnNlcGFyYXRvcisiWzBdezAsIitlLnByZWNpc2lvbisifSkiLGk9bmV3IFJlZ0V4cChuLCJnIiksbz10LnRvU3RyaW5nKCkucmVwbGFjZSgvW1xEXS9nLCIiKS5sZW5ndGh8fDAscz1lLmxhc3RPdXRwdXQudG9TdHJpbmcoKS5yZXBsYWNlKC9bXERdL2csIiIpLmxlbmd0aHx8MDt0PXQudG9TdHJpbmcoKS5yZXBsYWNlKGksIiIpLHM+byYmKHQ9dC5zbGljZSgwLHQubGVuZ3RoLTEpKX12YXIgbD10LnRvU3RyaW5nKCkucmVwbGFjZSgvW1xEXS9nLCIiKSxhPW5ldyBSZWdFeHAoIihcXCIrZS5zZXBhcmF0b3IrIikkIiksdT1sLnN1YnN0cigwLGwubGVuZ3RoLWUubW9uZXlQcmVjaXNpb24pLHA9dS5zdWJzdHIoMCx1Lmxlbmd0aCUzKSxoPW5ldyBBcnJheShlLnByZWNpc2lvbisxKS5qb2luKCIiKTt1PXUuc3Vic3RyKHUubGVuZ3RoJTMsdS5sZW5ndGgpO2Zvcih2YXIgYz0wLGY9dS5sZW5ndGg7Zj5jO2MrKylwKz11W2NdO2lmKCFlLnplcm9DZW50cyl7dmFyIGc9bC5sZW5ndGgtZS5wcmVjaXNpb24sbT1sLnN1YnN0cihnLGUucHJlY2lzaW9uKSx2PW0ubGVuZ3RoLHk9ZS5wcmVjaXNpb24+dj9lLnByZWNpc2lvbjp2O2g9KGgrbSkuc2xpY2UoLXkpfXZhciBiPWUudW5pdCtwK2Uuc2VwYXJhdG9yK2grZS5zdWZmaXhVbml0O3JldHVybiBiLnJlcGxhY2UoYSwiIil9LGEudG9QYXR0ZXJuPWZ1bmN0aW9uKGksbyl7dmFyIHIsbD0ib2JqZWN0Ij09dHlwZW9mIG8/by5wYXR0ZXJuOm8sYT1sLnJlcGxhY2UoL1xXL2csIiIpLHU9bC5zcGxpdCgiIikscD1pLnRvU3RyaW5nKCkucmVwbGFjZSgvXFcvZywiIiksaD1wLnJlcGxhY2UoL1xXL2csIiIpLGM9MCxmPXUubGVuZ3RoLGc9Im9iamVjdCI9PXR5cGVvZiBvP28ucGxhY2Vob2xkZXI6dm9pZCAwO2ZvcihyPTA7Zj5yO3IrKyl7aWYoYz49cC5sZW5ndGgpe2lmKGEubGVuZ3RoPT1oLmxlbmd0aClyZXR1cm4gdS5qb2luKCIiKTtpZih2b2lkIDAhPT1nJiZhLmxlbmd0aD5oLmxlbmd0aClyZXR1cm4gcyh1LHIsZykuam9pbigiIik7YnJlYWt9aWYodVtyXT09PXQmJnBbY10ubWF0Y2goL1swLTldLyl8fHVbcl09PT1lJiZwW2NdLm1hdGNoKC9bYS16QS1aXS8pfHx1W3JdPT09biYmcFtjXS5tYXRjaCgvWzAtOWEtekEtWl0vKSl1W3JdPXBbYysrXTtlbHNlIGlmKHVbcl09PT10fHx1W3JdPT09ZXx8dVtyXT09PW4pcmV0dXJuIHZvaWQgMCE9PWc/cyh1LHIsZykuam9pbigiIik6dS5zbGljZSgwLHIpLmpvaW4oIiIpfXJldHVybiB1LmpvaW4oIiIpLnN1YnN0cigwLHIpfSxhLnRvTnVtYmVyPWZ1bmN0aW9uKHQpe3JldHVybiB0LnRvU3RyaW5nKCkucmVwbGFjZSgvKD8hXi0pW14wLTldL2csIiIpfSxhLnRvQWxwaGFOdW1lcmljPWZ1bmN0aW9uKHQpe3JldHVybiB0LnRvU3RyaW5nKCkucmVwbGFjZSgvW15hLXowLTkgXSsvaSwiIil9LGF9KTsNCg0KCQkvLyBNYW50ZW0gYXBlbmFzIGEgdmVyc8OjbyBtYWlzIHJlY2VudGUgZG8gc2NyaXB0DQoJCWlmICh0eXBlb2YgZGluRm9ybXMgPT0gInVuZGVmaW5lZCIgfHwgZGluRm9ybXMudmVyc2lvbiA8IDEuMykgew0KCQkgICAgdmFyIGRpbkZvcm1zID0gew0KCQkgICAgCXZlcnNpb246MS4zLA0KCQkgICAgICAgIG9uTG9hZDogZnVuY3Rpb24oKXsNCgkJICAgICAgICAgICAgLy8NCgkJICAgICAgICAgICAgdmFyIGZvcm1zID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSgiZm9ybUludGVncmF0aW9uIik7DQoJCSAgICAgICAgICAgIGZvciAodmFyIGsgPSAwOyBrIDwgZm9ybXMubGVuZ3RoOyArK2spIHsNCgkJICAgICAgICAgICAgICAgIHZhciBpbnB1dEVsZW1lbnQgPSBmb3Jtc1trXS5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCJkaW4taW5wdXQtbWFzayIpOw0KCQkgICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBpbnB1dEVsZW1lbnQubGVuZ3RoOyArK2kpIHsNCgkJICAgICAgICAgICAgICAgICAgICBzd2l0Y2goaW5wdXRFbGVtZW50W2ldLmdldEF0dHJpYnV0ZSgiZGluLW1hc2stdHlwZSIpKXsNCgkJICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAiRFQiOg0KCQkgICAgICAgICAgICAgICAgICAgICAgICBjYXNlICJESCI6DQoJCSAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgc3RyID0gaW5wdXRFbGVtZW50W2ldLmdldEF0dHJpYnV0ZSgiZm9ybWF0Iik7DQoJCSAgICAgICAgICAgICAgICAgICAgICAgICAgICBWTWFza2VyKGlucHV0RWxlbWVudFtpXSkubWFza1BhdHRlcm4oc3RyLnJlcGxhY2UoL0R8TXxBfFl8SC9nLCAiOSIpKTsNCgkJICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOw0KCQkgICAgICAgICAgICAgICAgICAgICAgICBjYXNlICJJTlQiOg0KCQkgICAgICAgICAgICAgICAgICAgICAgICAgICAgVk1hc2tlcihpbnB1dEVsZW1lbnRbaV0pLm1hc2tOdW1iZXIoKTsNCgkJICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOw0KCQkgICAgICAgICAgICAgICAgICAgICAgICBjYXNlICJGTFQiOg0KCQkgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHN0ciA9IGlucHV0RWxlbWVudFtpXS5nZXRBdHRyaWJ1dGUoImZvcm1hdCIpOw0KCQkgICAgICAgICAgICAgICAgICAgICAgICAgICAgVk1hc2tlcihpbnB1dEVsZW1lbnRbaV0pLm1hc2tNb25leSh7c2VwYXJhdG9yOnN0cn0pOw0KCQkgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7DQoJCSAgICAgICAgICAgICAgICAgICAgfQ0KCQkgICAgICAgICAgICAgICAgfSAgICAgICAgICAgICAgICANCgkJICAgICAgICAgICAgfQ0KDQoJCSAgICAgICAgICAgIC8vDQoJCSAgICAgICAgICAgIHZhciByZWZlcmVyID0gZG9jdW1lbnQucmVmZXJyZXIgPyBkb2N1bWVudC5yZWZlcnJlci5tYXRjaCgvOlwvXC8oLlteL10rKS8pWzFdIDogIiI7DQoJCSAgICAgICAgICAgIHZhciBob3N0bmFtZSA9IHdpbmRvdy5sb2NhdGlvbi5ob3N0bmFtZTsNCgkJICAgICAgICAgICAgaWYgKHJlZmVyZXIgIT0gaG9zdG5hbWUpIHsNCgkJICAgICAgICAgICAgICAgIHZhciBqc29uUGFyYW1zID0geyJ1cmwiOndpbmRvdy5sb2NhdGlvbi5ocmVmLCAicmVmZXJlciI6ZG9jdW1lbnQucmVmZXJyZXJ9Ow0KCQkgICAgICAgICAgICAgICAgdmFyIGNvb2tpZURhdGEgPSBidG9hKEpTT04uc3RyaW5naWZ5KGpzb25QYXJhbXMpKTsNCgkJICAgICAgICAgICAgICAgIGRpbkZvcm1zLlNldENvb2tpZSgiZGluVHJhZmZpY1NvdXJjZSIsIGNvb2tpZURhdGEsIDkwKTsNCgkJICAgICAgICAgICAgfQ0KCQkgICAgICAgIH0sDQoJCSAgICAgICAgVmFsaWRhdGVGb3JtOiBmdW5jdGlvbihmb3JtKXsNCgkJICAgICAgICAgICAgdGhpcy5MaW1wYUF2aXNvcyhmb3JtKTsNCg0KCQkgICAgICAgICAgICAvKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovDQoJCSAgICAgICAgICAgIC8vIHZhbGlkYcOnw6NvIGRlIGNhZGEgdGlwbyBkZSBjYW1wbw0KCQkgICAgICAgICAgICAvKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovDQoJCSAgICAgICAgICAgIHZhciBlbGVtID0gZm9ybS5lbGVtZW50czsNCgkJICAgICAgICAgICAgdmFyIGVudmlhciA9IHRydWU7DQoJCSAgICAgICAgICAgIGZvcih2YXIgaSA9IDA7IGkgPCBlbGVtLmxlbmd0aDsgaSsrKXsNCgkJICAgICAgICAgICAgICAgIGlmKCBlbGVtW2ldLnR5cGUgPT0gImhpZGRlbiIgKXsNCgkJICAgICAgICAgICAgICAgICAgICBjb250aW51ZQ0KCQkgICAgICAgICAgICAgICAgfQ0KDQoJCSAgICAgICAgICAgICAgICB2YXIgY2xhc3NMaXN0ID0gZWxlbVtpXS5jbGFzc05hbWUuc3BsaXQoIiAiKTsNCg0KCQkgICAgICAgICAgICAgICAgdGhpcy5yZW1vdmVDbGFzcygiZmllbGQtZXJyb3IiLCBlbGVtW2ldKTsNCgkJICAgICAgICAgICAgICAgIGVsZW1baV0udmFsdWUgPSBlbGVtW2ldLnZhbHVlLnRyaW0oKTsNCgkJICAgICAgICAgICAgICAgIA0KCQkgICAgICAgICAgICAgICAgaWYoY2xhc3NMaXN0LmluZGV4T2YoInR5cGVfRU1BSUwiKSAhPSAtMSl7DQoJCSAgICAgICAgICAgICAgICAgICAgaWYoIXRoaXMudmFsaWRhdGVFbWFpbChlbGVtW2ldLnZhbHVlKSApew0KCQkgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmFkZENsYXNzKCJmaWVsZC1lcnJvciIsIGVsZW1baV0pOw0KCQkgICAgICAgICAgICAgICAgICAgICAgICBlbnZpYXIgPSBmYWxzZTsNCgkJICAgICAgICAgICAgICAgICAgICB9DQoJCSAgICAgICAgICAgICAgICB9DQoJCSAgICAgICAgICAgICAgICBlbHNlIGlmKGNsYXNzTGlzdC5pbmRleE9mKCJ0eXBlX0RUIikgIT0gLTEpew0KCQkgICAgICAgICAgICAgICAgICAgIGlmKGVsZW1baV0udmFsdWUgIT0gIiIgJiYgIXRoaXMuZXhpc3REYXRlKHRoaXMucHJlcGFyZURhdGUoZWxlbVtpXS52YWx1ZSwgZWxlbVtpXS5nZXRBdHRyaWJ1dGUoImZvcm1hdCIpKSxmYWxzZSkpew0KCQkgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmFkZENsYXNzKCJmaWVsZC1lcnJvciIsIGVsZW1baV0pOw0KCQkgICAgICAgICAgICAgICAgICAgICAgICBlbnZpYXIgPSBmYWxzZTsNCgkJICAgICAgICAgICAgICAgICAgICB9DQoJCSAgICAgICAgICAgICAgICB9DQoJCSAgICAgICAgICAgICAgICBlbHNlIGlmKGNsYXNzTGlzdC5pbmRleE9mKCJ0eXBlX0RIIikgIT0gLTEpew0KCQkgICAgICAgICAgICAgICAgICAgIGlmKGVsZW1baV0udmFsdWUgIT0gIiIgJiYgIXRoaXMuZXhpc3REYXRlKHRoaXMucHJlcGFyZURhdGUoZWxlbVtpXS52YWx1ZSwgZWxlbVtpXS5nZXRBdHRyaWJ1dGUoImZvcm1hdCIpKSx0cnVlKSl7DQoJCSAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuYWRkQ2xhc3MoImZpZWxkLWVycm9yIiwgZWxlbVtpXSk7DQoJCSAgICAgICAgICAgICAgICAgICAgICAgIGVudmlhciA9IGZhbHNlOw0KCQkgICAgICAgICAgICAgICAgICAgIH0NCgkJICAgICAgICAgICAgICAgIH0NCgkJICAgICAgICAgICAgICAgIGVsc2UgaWYoIGNsYXNzTGlzdC5pbmRleE9mKCJ0eXBlX1BITl9OVU0iKSAhPSAtMSApew0KCQkgICAgICAgICAgICAgICAgICAgIHZhciBmaWVsZE5hbWUgPSBlbGVtW2ldLmdldEF0dHJpYnV0ZSgiaGQtbmFtZSIpOw0KCQkgICAgICAgICAgICAgICAgICAgIHZhciB0ZXh0ID0gZWxlbVtpXS52YWx1ZTsNCgkJICAgICAgICAgICAgICAgICAgICB2YXIgcGF0UGhvbmUgPSAvXGQrL2c7DQoJCSAgICAgICAgICAgICAgICAgICAgdmFyIHJlczsNCgkJICAgICAgICAgICAgICAgICAgICB2YXIgcmVzdWx0TnVtID0gIiI7DQoJCSAgICAgICAgICAgICAgICAgICAgdmFyIHJlc3VsdERESSA9ICIiOw0KCQkgICAgICAgICAgICAgICAgICAgIHJlcyA9IHRleHQubWF0Y2gocGF0UGhvbmUpOw0KDQoJCSAgICAgICAgICAgICAgICAgICAgaWYgKHJlcyAhPT0gbnVsbCl7DQoJCSAgICAgICAgICAgICAgICAgICAgICAgICByZXN1bHROdW0gPSByZXMuam9pbigiIik7DQoJCSAgICAgICAgICAgICAgICAgICAgfQ0KDQoJCSAgICAgICAgICAgICAgICAgICAgZm9ybS5lbGVtZW50c1tmaWVsZE5hbWVdLnZhbHVlID0gIiI7DQoNCgkJICAgICAgICAgICAgICAgICAgICBpZih0ZXh0ICE9ICIiICYmIHJlc3VsdE51bS5sZW5ndGggPCAzICl7DQoJCSAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuYWRkQ2xhc3MoImZpZWxkLWVycm9yIiwgZWxlbVtpXSk7DQoJCSAgICAgICAgICAgICAgICAgICAgICAgIGVudmlhciA9IGZhbHNlOw0KCQkgICAgICAgICAgICAgICAgICAgIH1lbHNlIGlmIChyZXN1bHROdW0ubGVuZ3RoID49IDMgKXsNCg0KCQkgICAgICAgICAgICAgICAgICAgICAgICB0ZXh0ID0gZm9ybS5lbGVtZW50c1tmaWVsZE5hbWUrIl9EREkiXS52YWx1ZQ0KCQkgICAgICAgICAgICAgICAgICAgICAgICByZXMgPSB0ZXh0Lm1hdGNoKHBhdFBob25lKTsNCg0KCQkgICAgICAgICAgICAgICAgICAgICAgICBpZiAocmVzICE9PSBudWxsKXsNCgkJICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdERESSA9IHJlcy5qb2luKCIiKTsNCgkJICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvcm0uZWxlbWVudHNbZmllbGROYW1lXS52YWx1ZSA9IHJlc3VsdERESStyZXN1bHROdW07DQoJCSAgICAgICAgICAgICAgICAgICAgICAgIH1lbHNlew0KCQkgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5hZGRDbGFzcygiZmllbGQtZXJyb3IiLCBmb3JtLmVsZW1lbnRzW2ZpZWxkTmFtZSsiX0RESSJdKTsNCgkJICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVudmlhciA9IGZhbHNlOw0KCQkgICAgICAgICAgICAgICAgICAgICAgICB9DQoJCSAgICAgICAgICAgICAgICAgICAgfQ0KCQkgICAgICAgICAgICAgICAgfQ0KDQoJCSAgICAgICAgICAgICAgICAvLyBDQU1QT1MgT0JSSUdBVE9SSU9TDQoJCSAgICAgICAgICAgICAgICBpZiggY2xhc3NMaXN0LmluZGV4T2YoImZpZWxkLXJlcXVpcmVkIikgIT0gLTEgKXsNCg0KCQkgICAgICAgICAgICAgICAgICAgIC8vIFRvZG9zIG9zIGNhbXBvcyBuw6NvLUxWTQ0KCQkgICAgICAgICAgICAgICAgICAgIGlmKGNsYXNzTGlzdC5pbmRleE9mKCJ0eXBlX0xWTSIpID09IC0xKXsNCgkJICAgICAgICAgICAgICAgICAgICAgICAgaWYoIGVsZW1baV0udmFsdWUudHJpbSgpID09ICIiICl7DQoJCSAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmFkZENsYXNzKCJmaWVsZC1lcnJvciIsIGVsZW1baV0pOw0KCQkgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW52aWFyID0gZmFsc2U7DQoJCSAgICAgICAgICAgICAgICAgICAgICAgIH0NCgkJICAgICAgICAgICAgICAgICAgICB9DQoNCgkJICAgICAgICAgICAgICAgICAgICAvLyBlbHNlIGx2bS4uLg0KCQkgICAgICAgICAgICAgICAgICAgIGlmKGNsYXNzTGlzdC5pbmRleE9mKCJ0eXBlX0xWTSIpICE9IC0xKXsNCgkJICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGhkTmFtZSA9IGVsZW1baV0uZ2V0QXR0cmlidXRlKCJoZC1uYW1lIik7DQoJCSAgICAgICAgICAgICAgICAgICAgICAgIHZhciBvayA9IGZhbHNlOw0KDQoJCSAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucmVtb3ZlQ2xhc3MoImZpZWxkLWVycm9yIiwgZm9ybS5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCJjb250YWluZXJNdWx0aXBsZV8iK2hkTmFtZSlbMF0pOyAvLyDDqSBvIMO6bmljbyBjYXNvIHF1ZSBhIGNsYXNzZSDDqSByZW1vdmlkYSBkZXN0ZSBqZWl0bw0KDQoJCSAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjaGVja2JveGVzID0gZm9ybS5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCJjaGtfIitoZE5hbWUpOw0KCQkgICAgICAgICAgICAgICAgICAgICAgICBmb3IodmFyIGo9MDsgaiA8IGNoZWNrYm94ZXMubGVuZ3RoOyBqKyspew0KCQkgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoY2hlY2tib3hlc1tqXS5jaGVja2VkID09IHRydWUpew0KCQkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9rID0gdHJ1ZTsNCgkJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsNCgkJICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0NCgkJICAgICAgICAgICAgICAgICAgICAgICAgfQ0KCQkgICAgICAgICAgICAgICAgICAgICAgICBpZighb2spew0KCQkgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5hZGRDbGFzcygiZmllbGQtZXJyb3IiLCBmb3JtLmdldEVsZW1lbnRzQnlDbGFzc05hbWUoImNvbnRhaW5lck11bHRpcGxlXyIraGROYW1lKVswXSApOw0KCQkgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW52aWFyID0gZmFsc2U7DQoJCSAgICAgICAgICAgICAgICAgICAgICAgIH0NCgkJICAgICAgICAgICAgICAgICAgICB9DQoJCSAgICAgICAgICAgICAgICB9DQoJCSAgICAgICAgICAgICAgICANCgkJICAgICAgICAgICAgfQ0KCQkgICAgICAgICAgICAvKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovDQoJCSAgICAgICAgICAgIC8vIEVtIGNhc28gZGUgZmFsaGEgbmEgdmFsaWRhw6fDo28uLi4NCgkJICAgICAgICAgICAgLy8gTWVuc2FnZW0gZGUgQ2FtcG8gT2JyaWdhdMOzcmlvDQoJCSAgICAgICAgICAgIC8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi8NCgkJICAgICAgICAgICAgaWYoIWVudmlhcil7DQoJCSAgICAgICAgICAgICAgICB2YXIgbXNnRXJyb3IgPSBmb3JtLmdldEVsZW1lbnRzQnlDbGFzc05hbWUoIkRpbmFtaXplRGl2TWVzc2FnZUVycm9yIilbMF07DQoJCSAgICAgICAgICAgICAgICBpZihtc2dFcnJvciAmJiBtc2dFcnJvci5pbm5lckhUTUwubGVuZ3RoKSB7DQoJCSAgICAgICAgICAgICAgICAgICAgbXNnRXJyb3Iuc3R5bGUuZGlzcGxheSA9ICJibG9jayI7DQoJCSAgICAgICAgICAgICAgICB9DQoJCSAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2UNCgkJICAgICAgICAgICAgfQ0KDQoJCSAgICAgICAgICAgIC8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi8NCgkJICAgICAgICAgICAgLy8gRXNjcmV2ZSB2YWxvcmVzIG5vcyBjYW1wb3MgaGlkZGVuIChxdWFuZG8gbmVjZXNzw6FyaW8pDQoJCSAgICAgICAgICAgIC8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi8NCg0KCQkgICAgICAgICAgICAvLyBMaXN0YXMgZGUgVmFsb3JlcyBNdWx0aXBsb3MgKExWTSkNCgkJICAgICAgICAgICAgdmFyIGx2bUVsZW1lbnRzID0gZm9ybS5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCJ0eXBlX0xWTSIpOw0KCQkgICAgICAgICAgICB2YXIgY2hlY2tib3hlcywgY2hlY2tlZFZhbHVlczsNCgkJICAgICAgICAgICAgdmFyIGhkTmFtZTsNCgkJICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsdm1FbGVtZW50cy5sZW5ndGg7IGkrKykgew0KCQkgICAgICAgICAgICAgICAgaGROYW1lID0gbHZtRWxlbWVudHNbaV0uZ2V0QXR0cmlidXRlKCJoZC1uYW1lIik7DQoNCgkJICAgICAgICAgICAgICAgIGNoZWNrYm94ZXMgPSBmb3JtLmdldEVsZW1lbnRzQnlDbGFzc05hbWUoImNoa18iK2hkTmFtZSk7DQoJCSAgICAgICAgICAgICAgICBjaGVja2VkVmFsdWVzID0gIiI7DQoNCgkJICAgICAgICAgICAgICAgIGlmKGNoZWNrYm94ZXMubGVuZ3RoID4gMCl7DQoJCSAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgayA9IDA7IGsgPCBjaGVja2JveGVzLmxlbmd0aDsgaysrKSB7DQoJCSAgICAgICAgICAgICAgICAgICAgICAgIGlmKGNoZWNrYm94ZXNba10uY2hlY2tlZCl7DQoJCSAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaGVja2VkVmFsdWVzICs9ICJ8IitjaGVja2JveGVzW2tdLnZhbHVlOw0KCQkgICAgICAgICAgICAgICAgICAgICAgICB9DQoJCSAgICAgICAgICAgICAgICAgICAgfQ0KCQkgICAgICAgICAgICAgICAgfQ0KCQkgICAgICAgICAgICAgICAgY2hlY2tlZFZhbHVlcyA9IGNoZWNrZWRWYWx1ZXMucmVwbGFjZSgifCIsIiIpOw0KCQkgICAgICAgICAgICAgICAgZm9ybS5lbGVtZW50c1tsdm1FbGVtZW50c1tpXS5nZXRBdHRyaWJ1dGUoImhkLW5hbWUiKV0udmFsdWUgPSBjaGVja2VkVmFsdWVzOw0KCQkgICAgICAgICAgICB9DQoNCgkJICAgICAgICAgICAgLy8gRGF0YXMNCgkJICAgICAgICAgICAgdGhpcy5zZXREYXRlVmFsdWVzKGZvcm0sICJ0eXBlX0RUIik7DQoJCSAgICAgICAgICAgIHRoaXMuc2V0RGF0ZVZhbHVlcyhmb3JtLCAidHlwZV9ESCIpOw0KCQkgICAgICAgICAgICANCgkJICAgICAgICAgICAgLy8gRmxvYXRzDQoJCSAgICAgICAgICAgIHZhciBmbHRFbGVtZW50cyA9IGZvcm0uZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSgidHlwZV9GTFQiKTsNCgkJICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBmbHRFbGVtZW50cy5sZW5ndGg7IGkrKykgew0KCQkgICAgICAgICAgICAgICAgZm9ybS5lbGVtZW50c1tmbHRFbGVtZW50c1tpXS5nZXRBdHRyaWJ1dGUoImhkLW5hbWUiKV0udmFsdWUgPSBmbHRFbGVtZW50c1tpXS52YWx1ZS5yZXBsYWNlKCIsIiwiLiIpOw0KCQkgICAgICAgICAgICB9Ow0KDQoJCSAgICAgICAgICAgIC8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi8NCgkJICAgICAgICAgICAgLy8gZmluYWxpemFuZG8uLi4NCgkJICAgICAgICAgICAgLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqLw0KDQoJCSAgICAgICAgICAgIC8vICBzZSBmb3IgcHJldmlldy4uLiBkw6EgbXNnIGRlIHN1Y2Vzc28gZSBjYWkgZm9yYSENCgkJICAgICAgICAgICAgdmFyIGlzUHJldmlldyA9IGZvcm0uZWxlbWVudHNbImlzUHJldmlldyJdOw0KCQkgICAgICAgICAgICBpZiAoaXNQcmV2aWV3KSB7DQoJCSAgICAgICAgICAgIAlkaW5Gb3Jtcy5SZXNldEZvcm1WYWx1ZXMoZm9ybSk7DQoJCSAgICAgICAgICAgIAlyZXR1cm4gZmFsc2UNCgkJICAgICAgICAgICAgfQ0KDQoJCSAgICAgICAgICAgIC8vIExFQURUUkFDS0VSDQoJCSAgICAgICAgICAgIC8vIFByZWNpc2Ftb3MgZGVzY29icmlyIHNlIG8gb2JqZXRvIGRlIGxlYWRUcmFja2VyIGV4aXN0ZSBubyBtZXNtbyBmcmFtZSBxdWUgZXN0ZSBmb3JtdWzDoXJpbyBlc3TDoSwgb3Ugc2UgZXN0w6Egbm8gcGFyZW50IChvdSBubyB0b3ApLg0KCQkgICAgICAgICAgICAvLyBVc2Ftb3MgYSByZWZlcmVuY2lhIGRlc3RlIGZyYW1lIGEgcGFydGlyIGRpc3RvLg0KCQkgICAgICAgICAgICAvLyBQYXJhIHRlciBvIG3DoXhpbW8gZGUgY29tcGF0aWJpbGlkYWRlLCB2ZXJpZmljbyBzZSBvIGJyb3dzZXIgc3Vwb3J0YSBlc3RlcyBvYmpldG9zLg0KCQkgICAgICAgICAgICAvLyBSZXNvbHZlIGlkZWFsbWVudGUgbyB1c28gZGUgbGVhZHRyYWNrZXIgcG9yIHBvcHVwcw0KDQoJCSAgICAgICAgICAgIC8vIGZheiB0cnktY2F0Y2ggcG9pcyBvIGZyYW1lIHBhcmVudC90b3AgcG9kZSBzZXIgZGUgb3V0cm8gZG9taW5pbywgaXN0byBnZXJhcsOhIHVtIGVycm8gZG8gdGlwbyBjcm9zcy1kb21haW4uDQoJCSAgICAgICAgICAgIHRyeSB7DQoJCQkgICAgICAgICAgICB2YXIgZnJhbWUNCgkJCSAgICAgICAgICAgIGlmICh0eXBlb2YgZGluTGVhZFRyYWNrZXIgIT09ICJ1bmRlZmluZWQiKSB7DQoJCQkgICAgICAgICAgICAJZnJhbWUgPSB3aW5kb3c7DQoJCQkgICAgICAgICAgICB9IGVsc2UgaWYgKHR5cGVvZiB3aW5kb3cucGFyZW50ICE9PSAidW5kZWZpbmVkIiAmJiB0eXBlb2Ygd2luZG93LnBhcmVudC5kaW5MZWFkVHJhY2tlciAhPT0gInVuZGVmaW5lZCIpIHsNCgkJCSAgICAgICAgICAgIAlmcmFtZSA9IHdpbmRvdy5wYXJlbnQ7DQoJCQkgICAgICAgICAgICB9IGVsc2UgaWYgKHR5cGVvZiB3aW5kb3cudG9wICE9PSAidW5kZWZpbmVkIiAmJiB0eXBlb2Ygd2luZG93LnRvcC5kaW5MZWFkVHJhY2tlciAhPT0gInVuZGVmaW5lZCIpIHsNCgkJCSAgICAgICAgICAgIAlmcmFtZSA9IHdpbmRvdy50b3A7DQoJCQkgICAgICAgICAgICB9DQoNCgkJCSAgICAgICAgICAgIC8vIHNlIGVuY29udHJhbW9zIGxlYWR0cmFja2VyIGVtIGFsZ3VtIGRvcyBmcmFtZXMsIHNldGEhDQoJCQkgICAgICAgICAgICBpZiAoIHR5cGVvZiBmcmFtZSAhPT0gInVuZGVmaW5lZCIgJiYgZnJhbWUuZGluTGVhZFRyYWNrZXIuaXNBY3RpdmUoKSkgew0KCQkJCQkJCXZhciBmb3JtRWxlbWVudHMgPSBmb3JtLmVsZW1lbnRzOw0KCQkJCQkJCWlmICggdHlwZW9mIGZvcm1FbGVtZW50cy5jbXAxICE9PSAidW5kZWZpbmVkIiApIHsNCgkJCQkJCQkJZnJhbWUuZGluTGVhZFRyYWNrZXIuU2V0TGVhZEVtYWlsKGZvcm1FbGVtZW50cy5jbXAxLnZhbHVlKTsNCgkJCQkJCQl9DQoJCQkJCQkJaWYgKCB0eXBlb2YgZm9ybUVsZW1lbnRzLmNtcDMgIT09ICJ1bmRlZmluZWQiICkgew0KCQkJCQkJCQlmcmFtZS5kaW5MZWFkVHJhY2tlci5TZXRMZWFkRXh0ZXJuYWxJZChmb3JtRWxlbWVudHMuY21wMy52YWx1ZSk7DQoJCQkJCQkJfQ0KCQkJCQkJfQ0KCQkJCQl9DQoJCQkJCWNhdGNoKGUpew0KCQkJCQkJY29uc29sZS53YXJuKCJMZWFkdHJhY2tlciBpZ25vcmVkIGJlY2F1c2Ugb2YgQ3Jvc3MtRG9tYWluIGVycm9yLiIpOw0KCQkJCQkJY29uc29sZS53YXJuKGUpOw0KCQkJCQl9DQoNCgkJICAgICAgICAgICAgdmFyIGlzQ2FwdGNoYSA9IHRoaXMuaGFzQ2FwdGNoYShmb3JtKTsNCgkJICAgICAgICAgICAgaWYoaXNDYXB0Y2hhKXsNCgkJICAgICAgICAgICAgICAgIGZvcm0uZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSgiRGluYW1pemVEaXZDYXB0Y2hhTWVzc2FnZSIpWzBdLnN0eWxlLmRpc3BsYXkgPSAibm9uZSI7DQoJCSAgICAgICAgICAgICAgICB2YXIgcmVjYXB0Y2hhID0gZm9ybS5lbGVtZW50c1siZy1yZWNhcHRjaGEtcmVzcG9uc2UiXTsNCgkJICAgICAgICAgICAgICAgIGlmIChyZWNhcHRjaGEudmFsdWUgPT09ICIiKXsNCgkJICAgICAgICAgICAgICAgICAgICBmb3JtLmdldEVsZW1lbnRzQnlDbGFzc05hbWUoIkRpbmFtaXplRGl2Q2FwdGNoYU1lc3NhZ2UiKVswXS5zdHlsZS5kaXNwbGF5ID0gImJsb2NrIjsNCgkJICAgICAgICAgICAgICAgICAgICBncmVjYXB0Y2hhLnJlc2V0KCk7IC8vIHZlciBzZSBwcmVjaXNhDQoJCSAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlOw0KCQkgICAgICAgICAgICAgICAgfQ0KCQkgICAgICAgICAgICB9DQoNCgkJICAgICAgICAgICAgLy8gU2UgbyBmb3JtIHVzYSAibXNnIiwgbsOjbyBmYXogYWN0aW9uIGNvbSByZWRpcmVjdC4NCgkJICAgICAgICAgICAgdmFyIGlzTXNnID0gZm9ybS5lbGVtZW50c1siaXNNc2ciXS52YWx1ZTsNCgkJICAgICAgICAgICAgdmFyIHJlZGlyZWN0RWxlbWVudCA9IGZvcm0uZWxlbWVudHNbInJlZGlyZWN0LXVybC1qcyJdID8gZm9ybS5lbGVtZW50c1sicmVkaXJlY3QtdXJsLWpzIl0gOiBmb3JtLmVsZW1lbnRzWyJyZWRpcmVjdC11cmwtcHAiXTsNCgkJICAgICAgICAgICAgaWYoaXNNc2cgPT0gInRydWUiIHx8IChyZWRpcmVjdEVsZW1lbnQgJiYgcmVkaXJlY3RFbGVtZW50LnZhbHVlICE9ICIiKSApew0KCQkgICAgICAgICAgICAgICAgdGhpcy5Mb2FkaW5nRm9ybShmb3JtKTsNCgkJICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTsgLy8gcG9zdGEgbyBjb250ZXVkbywgbWFzIG7Do28gZXhlY3V0YSBhY3Rpb24gZG8gZm9ybQ0KCQkgICAgICAgICAgICB9DQoNCgkJICAgICAgICAgICAgLy8gUG9zdGEgcHJvIG5vc3NvIHJlY2VpdmVyIGUgZXN0ZSBmYXLDoSB1bSByZWRpcmVjdC4NCgkJICAgICAgICAgICAgcmV0dXJuIHRydWU7DQoJCSAgICAgICAgfSwNCgkJICAgICAgICBzZXREYXRlVmFsdWVzOiBmdW5jdGlvbihmb3JtLCBjbGFzc05hbWUpew0KCQkgICAgICAgICAgICB2YXIgZHRFbGVtZW50cyA9IGZvcm0uZ2V0RWxlbWVudHNCeUNsYXNzTmFtZShjbGFzc05hbWUpOw0KCQkgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGR0RWxlbWVudHMubGVuZ3RoOyBpKyspIHsNCgkJICAgICAgICAgICAgICAgIGlmIChkdEVsZW1lbnRzW2ldLnZhbHVlID09ICIiKSB7DQoJCSAgICAgICAgICAgICAgICAgICAgY29udGludWU7DQoJCSAgICAgICAgICAgICAgICB9DQoJCSAgICAgICAgICAgICAgICBmb3JtLmVsZW1lbnRzW2R0RWxlbWVudHNbaV0uZ2V0QXR0cmlidXRlKCJoZC1uYW1lIildLnZhbHVlID0gdGhpcy5wcmVwYXJlRGF0ZShkdEVsZW1lbnRzW2ldLnZhbHVlLCBkdEVsZW1lbnRzW2ldLmdldEF0dHJpYnV0ZSgiZm9ybWF0IikpOw0KCQkgICAgICAgICAgICB9Ow0KCQkgICAgICAgIH0sDQoJCSAgICAgICAgLy8gTk9WTywgYXBlbmFzIGxhbmRpbmcgcGFnZQ0KCQkgICAgICAgIFNldENvb2tpZTogZnVuY3Rpb24oY25hbWUsIGN2YWx1ZSwgZXhkYXlzKXsNCgkJICAgICAgICAgICAgdmFyIGQgPSBuZXcgRGF0ZSgpOw0KCQkgICAgICAgICAgICBkLnNldFRpbWUoZC5nZXRUaW1lKCkgKyAoZXhkYXlzKjI0KjYwKjYwKjEwMDApKTsNCgkJICAgICAgICAgICAgdmFyIGV4cGlyZXMgPSAiZXhwaXJlcz0iKyBkLnRvVVRDU3RyaW5nKCk7DQoJCSAgICAgICAgICAgIGRvY3VtZW50LmNvb2tpZSA9IGNuYW1lICsgIj0iICsgY3ZhbHVlICsgIjsiICsgZXhwaXJlcyArICI7cGF0aD0vIjsNCgkJICAgICAgICB9LA0KCQkgICAgICAgIGhhc0NhcHRjaGE6IGZ1bmN0aW9uKGZvcm0pew0KCQkgICAgICAgICAgICAvLyBEZXRlY3RhIHNlIGV4aXN0ZSBlc3RlIGVsZW1lbnRvIChkZXByZWNhdGVkKSBkZSBjYXB0Y2hhLg0KCQkgICAgICAgICAgICBpZiAoZm9ybS5lbGVtZW50c1siZG56LWNhcHRjaGEtZ29vZ2xlIl0gIT0gdW5kZWZpbmVkKSB7DQoJCSAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTsNCgkJICAgICAgICAgICAgfQ0KCQkgICAgICAgICAgICAvLyBWYWxpZGHDp8OjbyBub3JtYWwNCgkJICAgICAgICAgICAgdmFyIGFjdGlvbiA9IGZvcm0uZ2V0QXR0cmlidXRlKCJhY3Rpb24iKTsNCgkJICAgICAgICAgICAgaWYgKGFjdGlvbiA9PT0gbnVsbCkgew0KCQkgICAgICAgICAgICAJcmV0dXJuIGZhbHNlOw0KCQkgICAgICAgICAgICB9DQoNCgkJICAgICAgICAgICAgYWN0aW9uID0gYWN0aW9uLnNwbGl0KCIvIik7DQoJCSAgICAgICAgICAgIGlmIChhY3Rpb24ubGVuZ3RoID09IDgpew0KCQkgICAgICAgICAgICAgICAgaWYoYWN0aW9uWzddID09IDEpew0KCQkgICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlOw0KCQkgICAgICAgICAgICAgICAgfQ0KCQkgICAgICAgICAgICB9DQoJCSAgICAgICAgICAgIHJldHVybiBmYWxzZTsNCgkJICAgICAgICB9LA0KCQkgICAgICAgIExvYWRpbmdGb3JtOiBmdW5jdGlvbihmb3JtKXsNCgkJICAgICAgICAgICAgLy8NCgkJICAgICAgICAgICAgaWYgKGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJEaW5hbWl6ZUlmcmFtZUZvcm1JbnRlZ3JhdGlvbiIpID09IHVuZGVmaW5lZCl7DQoJCSAgICAgICAgICAgICAgICB2YXIgaWZybSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImlmcmFtZSIpOw0KCQkgICAgICAgICAgICAgICAgaWZybS5zZXRBdHRyaWJ1dGUoImlkIiwgIkRpbmFtaXplSWZyYW1lRm9ybUludGVncmF0aW9uIik7DQoJCSAgICAgICAgICAgICAgICBpZnJtLnNldEF0dHJpYnV0ZSgibmFtZSIsICJEaW5hbWl6ZUlmcmFtZUZvcm1JbnRlZ3JhdGlvbiIpOw0KCQkgICAgICAgICAgICAgICAgaWZybS5zdHlsZS5kaXNwbGF5ID0gIm5vbmUiOw0KCQkgICAgICAgICAgICAgICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChpZnJtKTsNCgkJICAgICAgICAgICAgfQ0KDQoJCSAgICAgICAgICAgIGlmICh0aGlzLkdldENvb2tpZSgiZGluVHJhZmZpY1NvdXJjZSIpKSB7DQoJCSAgICAgICAgICAgICAgICAvLyBNQU5URVIgQ09NIElELCBTw5MgUFJFQ0lTQU1PUyBERSBVTSBQT1IgZG9jdW1lbnQNCgkJICAgICAgICAgICAgICAgIGlmIChkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgiX19kaW5UcmFmZmljU291cmNlIikpIHsNCgkJICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgiX19kaW5UcmFmZmljU291cmNlIikuc2V0QXR0cmlidXRlKCJ2YWx1ZSIsIHRoaXMuR2V0Q29va2llKCJkaW5UcmFmZmljU291cmNlIikpOw0KCQkgICAgICAgICAgICAgICAgfSBlbHNlIHsNCgkJICAgICAgICAgICAgICAgICAgICB2YXIgdHMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJpbnB1dCIpOw0KCQkgICAgICAgICAgICAgICAgICAgIHRzLnR5cGUgPSAiaGlkZGVuIjsNCgkJICAgICAgICAgICAgICAgICAgICB0cy5uYW1lID0gIl9fZGluVHJhZmZpY1NvdXJjZSI7DQoJCSAgICAgICAgICAgICAgICAgICAgLy8gTUFOVEVSIENPTSBJRCwgU8OTIFBSRUNJU0FNT1MgREUgVU0gUE9SIGRvY3VtZW50DQoJCSAgICAgICAgICAgICAgICAgICAgdHMuaWQgPSAiX19kaW5UcmFmZmljU291cmNlIjsNCgkJICAgICAgICAgICAgICAgICAgICB0cy52YWx1ZSA9IHRoaXMuR2V0Q29va2llKCJkaW5UcmFmZmljU291cmNlIik7DQoJCSAgICAgICAgICAgICAgICAgICAgZm9ybS5hcHBlbmRDaGlsZCh0cyk7ICAgICAgICAgICAgICAgDQoJCSAgICAgICAgICAgICAgICB9DQoJCSAgICAgICAgICAgIH0NCg0KCQkgICAgICAgICAgICB0aGlzLlNwaW5uZXIoZm9ybSwgdHJ1ZSk7DQoNCgkJCQkJdmFyIHJlZGlyZWN0RWxlbWVudCA9IGZvcm0uZWxlbWVudHNbInJlZGlyZWN0LXVybC1wcCJdOw0KCQkJCQlpZiAocmVkaXJlY3RFbGVtZW50ICYmIHJlZGlyZWN0RWxlbWVudC52YWx1ZSAhPSAiIikgew0KCQkJCQkJdGhpcy5SZXF1ZXN0KGZvcm0uZ2V0QXR0cmlidXRlKCJhY3Rpb24iKSsiLyIsIHRoaXMuc2VyaWFsaXplKGZvcm0pLCBmb3JtKTsNCgkJCQkJfSBlbHNlIHsNCgkJCQkJICAgIC8vIFVzYSB1bSAiaW1nIiBwYXJhIGZhemVyIHVtYSByZXF1aXNpw6fDo28NCgkJCQkJICAgIHZhciBpbWdSZXEgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJpbWciKTsNCgkJCQkJICAgIGltZ1JlcS5zZXRBdHRyaWJ1dGUoImlkIiwgIkRpbmFtaXplSW1nUmVzcG9uc2UiKTsNCgkJCQkJICAgIGltZ1JlcS5zdHlsZS5kaXNwbGF5ID0gIm5vbmUiOyAvLyByZWR1bmRhbmNpYQ0KDQoJCQkJCSAgICBpbWdSZXEub25sb2FkID0gZnVuY3Rpb24gKCkgew0KCQkJCQkgICAgICAgICAvLyBMYW5kaW5nUGFnZQ0KCQkJCQkgICAgICAgIHJlZGlyZWN0RWxlbWVudCA9IGZvcm0uZWxlbWVudHNbInJlZGlyZWN0LXVybC1qcyJdOw0KCQkJCQkgICAgICAgIGlmIChyZWRpcmVjdEVsZW1lbnQgJiYgcmVkaXJlY3RFbGVtZW50LnZhbHVlICE9ICIiKSB7DQoJCQkJCSAgICAgICAgICAgIGxvY2F0aW9uLmhyZWYgPSByZWRpcmVjdEVsZW1lbnQudmFsdWU7DQoJCQkJCSAgICAgICAgfQ0KCQkJCQkgICAgICAgIC8vIEZpbSBMYW5kaW5nUGFnZQ0KCQkJCQkgICAgICAgIGRpbkZvcm1zLlNwaW5uZXIoZm9ybSwgZmFsc2UpOw0KCQkJCQkgICAgICAgIGRpbkZvcm1zLlJlc2V0Rm9ybVZhbHVlcyhmb3JtKTsNCgkJCQkJICAgIH0NCgkJCQkJICAgIGltZ1JlcS5vbmVycm9yID0gZnVuY3Rpb24gKCkgew0KCQkJCQkgICAgICAgIGRpbkZvcm1zLlNwaW5uZXIoZm9ybSwgZmFsc2UpOw0KDQoJCQkJCSAgICAgICAgLy8gZWxlbWVudG8gZGVwcmVjYXRlZA0KCQkJCQkgICAgICAgIHZhciBtc2dFcnJvckRlcCA9IGZvcm0uZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSgiZGl2TWVzc2FnZUVycm9yIilbMF07DQoJCQkJCSAgICAgICAgaWYobXNnRXJyb3JEZXApIHsNCgkJCQkJICAgICAgICAgICAgbXNnRXJyb3JEZXAuc3R5bGUuZGlzcGxheSA9ICJibG9jayI7DQoJCQkJCSAgICAgICAgfQ0KDQoJCQkJCSAgICAgICAgdmFyIG1zZ0FsZXJ0ID0gZm9ybS5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCJEaW5hbWl6ZURpdk1lc3NhZ2VBbGVydCIpWzBdOw0KCQkJCQkgICAgICAgIGlmKG1zZ0FsZXJ0KSB7DQoJCQkJCSAgICAgICAgICAgIG1zZ0FsZXJ0LnN0eWxlLmRpc3BsYXkgPSAiYmxvY2siOw0KCQkJCQkgICAgICAgIH0NCgkJCQkJICAgIH0NCgkJCQkJICAgIGltZ1JlcS5zcmMgPSBmb3JtLmdldEF0dHJpYnV0ZSgiYWN0aW9uIikgKyAiLz8iICsgdGhpcy5zZXJpYWxpemUoZm9ybSkgKyAiJmE9IiArIE1hdGguZmxvb3IoKE1hdGgucmFuZG9tKCkqOTk5OTkpKzEpOw0KCQkJCQkgICAgZm9ybS5hcHBlbmRDaGlsZChpbWdSZXEpOw0KCQkgICAgICAgICAgICB9DQoJCSAgICAgICAgfSwNCgkJICAgICAgICBSZXF1ZXN0OiBmdW5jdGlvbih1cmwsIHBhcmFtcywgZm9ybSl7DQoJCSAgICAgICAgCXZhciB4bWxodHRwID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7DQoJCSAgICAgICAgCXhtbGh0dHAub25yZWFkeXN0YXRlY2hhbmdlID0gZnVuY3Rpb24oKSB7DQoJCSAgICAgICAgICAgIAlpZiAoeG1saHR0cC5yZWFkeVN0YXRlID09IFhNTEh0dHBSZXF1ZXN0LkRPTkUpIHsgICAvLyBYTUxIdHRwUmVxdWVzdC5ET05FID09IDQNCgkJICAgICAgICAgICAgICAgIAlpZiAoeG1saHR0cC5zdGF0dXMgPj0gMjAwICYmIHhtbGh0dHAuc3RhdHVzIDw9IDI5OSkgew0KCQkgICAgICAgICAgICAgICAgICAgIAlwYXJlbnQubG9jYXRpb24uaHJlZiA9IGZvcm0uZWxlbWVudHNbInJlZGlyZWN0LXVybC1wcCJdLnZhbHVlOw0KCQkgICAgICAgICAgICAgICAgICAgIAlkaW5Gb3Jtcy5TcGlubmVyKGZvcm0sIGZhbHNlKTsNCiAgICAgICAgICAgICAgICAJCQkJZGluRm9ybXMuUmVzZXRGb3JtVmFsdWVzKGZvcm0pOw0KCQkgICAgICAgICAgICAgICAgCX0gZWxzZSB7DQoJCSAgICAgICAgICAgICAgICAgICAgCWRpbkZvcm1zLlNwaW5uZXIoZm9ybSwgZmFsc2UpOw0KCQkJCSAgICAgICAgICAgICAgICAvLyBlbGVtZW50byBkZXByZWNhdGVkDQoJCQkJICAgICAgICAgICAgICAgIHZhciBtc2dFcnJvckRlcCA9IGZvcm0uZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSgiZGl2TWVzc2FnZUVycm9yIilbMF07DQoJCQkJICAgICAgICAgICAgICAgIGlmKG1zZ0Vycm9yRGVwKSB7DQoJCQkJICAgICAgICAgICAgICAgICAgICBtc2dFcnJvckRlcC5zdHlsZS5kaXNwbGF5ID0gImJsb2NrIjsNCgkJCQkgICAgICAgICAgICAgICAgfQ0KCQkJCSAgICAgICAgICAgICAgICB2YXIgbXNnQWxlcnQgPSBmb3JtLmdldEVsZW1lbnRzQnlDbGFzc05hbWUoIkRpbmFtaXplRGl2TWVzc2FnZUFsZXJ0IilbMF07DQoJCQkJICAgICAgICAgICAgICAgIGlmKG1zZ0FsZXJ0KSB7DQoJCQkJICAgICAgICAgICAgICAgICAgICBtc2dBbGVydC5zdHlsZS5kaXNwbGF5ID0gImJsb2NrIjsNCgkJCQkgICAgICAgICAgICAgICAgfQ0KCQkgICAgICAgICAgICAgICAgCX0NCgkJICAgICAgICAgICAgCX0NCgkJICAgICAgICAJfTsNCgkJICAgICAgICAJaWYgKHR5cGVvZiBwYXJhbXMgPT09ICJzdHJpbmciICYmIHBhcmFtcyAhPT0gIiIpIHsNCgkJCQkJCXVybCArPSAiPyIgKyBwYXJhbXM7IC8vIGVuY29kZVVSSShwYXJhbXMpOw0KCQkJICAgICAgICB9DQoJCSAgICAgICAgCQ0KCQkgICAgICAgIAl4bWxodHRwLm9wZW4oIlBPU1QiLCB1cmwsIHRydWUpOw0KCQkgICAgICAgIAl4bWxodHRwLnNlbmQoKTsNCgkJICAgIAl9LA0KCQkgICAgICAgIFNwaW5uZXI6IGZ1bmN0aW9uKGZvcm0sIHNob3cpew0KCQkgICAgICAgICAgICAvLyBtYW50ZXIgdmVyc8OjbyBwb3IgY29tcGF0aWJpbGlkYWRlPw0KCQkgICAgICAgICAgICB2YXIgc3VibWl0RWxlbWVudCA9IGZvcm0uZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSgiZGluU3VibWl0IilbMF07DQoJCSAgICAgICAgICAgIHZhciBzcGlubmVyRWxlbWVudCA9IGZvcm0uZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSgic3Bpbm5lciIpWzBdOw0KDQoJCSAgICAgICAgICAgIGlmIChzaG93KSB7DQoJCSAgICAgICAgICAgICAgICBpZiAoc3Bpbm5lckVsZW1lbnQpDQoJCSAgICAgICAgICAgICAgICAgICAgc3Bpbm5lckVsZW1lbnQuc3R5bGUuZGlzcGxheSA9ICJibG9jayI7DQoJCSAgICAgICAgICAgICAgICANCgkJICAgICAgICAgICAgICAgIGlmIChzdWJtaXRFbGVtZW50KQ0KCQkgICAgICAgICAgICAgICAgICAgIHN1Ym1pdEVsZW1lbnQudmFsdWUgPSAiIjsNCg0KCQkgICAgICAgICAgICB9ZWxzZXsNCgkJICAgICAgICAgICAgICAgIGlmIChzcGlubmVyRWxlbWVudCkNCgkJICAgICAgICAgICAgICAgICAgICBzcGlubmVyRWxlbWVudC5zdHlsZS5kaXNwbGF5ID0gIm5vbmUiOw0KDQoJCSAgICAgICAgICAgICAgICBpZiAoc3VibWl0RWxlbWVudCkNCgkJICAgICAgICAgICAgICAgICAgICBzdWJtaXRFbGVtZW50LnZhbHVlID0gc3VibWl0RWxlbWVudC5nZXRBdHRyaWJ1dGUoIm9yaWdpbmFsLXZhbHVlIik7DQoJCSAgICAgICAgICAgIH0NCgkJICAgICAgICB9LA0KCQkgICAgICAgIEdldENvb2tpZTogZnVuY3Rpb24oY25hbWUpew0KCQkgICAgICAgICAgICB2YXIgbmFtZSA9IGNuYW1lICsgIj0iOw0KCQkgICAgICAgICAgICB2YXIgZGVjb2RlZENvb2tpZSA9IGRlY29kZVVSSUNvbXBvbmVudChkb2N1bWVudC5jb29raWUpOw0KCQkgICAgICAgICAgICB2YXIgY2EgPSBkZWNvZGVkQ29va2llLnNwbGl0KCI7Iik7DQoJCSAgICAgICAgICAgIGZvcih2YXIgaSA9IDA7IGkgPGNhLmxlbmd0aDsgaSsrKSB7DQoJCSAgICAgICAgICAgICAgICB2YXIgYyA9IGNhW2ldOw0KCQkgICAgICAgICAgICAgICAgd2hpbGUgKGMuY2hhckF0KDApID09ICIgIikgew0KCQkgICAgICAgICAgICAgICAgICAgIGMgPSBjLnN1YnN0cmluZygxKTsNCgkJICAgICAgICAgICAgICAgIH0NCgkJICAgICAgICAgICAgICAgIGlmIChjLmluZGV4T2YobmFtZSkgPT0gMCkgew0KCQkgICAgICAgICAgICAgICAgICAgIHJldHVybiBjLnN1YnN0cmluZyhuYW1lLmxlbmd0aCwgYy5sZW5ndGgpOw0KCQkgICAgICAgICAgICAgICAgfQ0KCQkgICAgICAgICAgICB9DQoJCSAgICAgICAgICAgIHJldHVybiAiIjsNCgkJICAgICAgICB9LA0KCQkgICAgICAgIFJlc2V0Rm9ybVZhbHVlczogZnVuY3Rpb24oZm9ybSl7DQoJCSAgICAgICAgICAgIC8vIGpxdWVyeSBleGlzdGU/DQoJCSAgICAgICAgICAgIGlmICh0eXBlb2YoJCkgIT0gInVuZGVmaW5lZCIpew0KCQkgICAgICAgICAgICAgICAgLy8gaUNoZWNrIGV4aXN0ZT8NCgkJICAgICAgICAgICAgICAgIGlmICggKHR5cGVvZigkKCkuaUNoZWNrKSAhPSAidW5kZWZpbmVkIikgKXsNCgkJICAgICAgICAgICAgICAgICAgICAkKGZvcm0pLmZpbmQoImlucHV0W3R5cGU9XCJjaGVja2JveFwiXTpub3QoLmNzc09ubHkpIikuaUNoZWNrKCJ1bmNoZWNrIik7DQoJCSAgICAgICAgICAgICAgICB9DQoJCSAgICAgICAgICAgIH0NCg0KCQkgICAgICAgICAgICB2YXIgbXNnU3VjY2VzcyA9IGZvcm0uZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSgiRGluYW1pemVEaXZNZXNzYWdlU3VjY2VzcyIpWzBdOw0KCQkgICAgICAgICAgICBpZihtc2dTdWNjZXNzKSB7DQoJCSAgICAgICAgICAgICAgICBtc2dTdWNjZXNzLnN0eWxlLmRpc3BsYXkgPSAiYmxvY2siOw0KCQkgICAgICAgICAgICB9DQoJCSAgICAgICAgICAgIHZhciBpbWdSZXF1ZXN0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoIkRpbmFtaXplSW1nUmVzcG9uc2UiKTsNCgkJICAgICAgICAgICAgaWYoaW1nUmVxdWVzdCkgew0KCQkgICAgICAgICAgICAgICAgaW1nUmVxdWVzdC5yZW1vdmUoKTsNCgkJICAgICAgICAgICAgfQ0KCQkgICAgICAgICAgICBmb3JtLnJlc2V0KCk7DQoJCSAgICAgICAgfSwNCgkJICAgICAgICBMaW1wYUF2aXNvczogZnVuY3Rpb24oZm9ybSl7DQoJCSAgICAgICAgICAgIHZhciBtc2dTdWNjZXNzID0gZm9ybS5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCJEaW5hbWl6ZURpdk1lc3NhZ2VTdWNjZXNzIilbMF07DQoJCSAgICAgICAgICAgIGlmKG1zZ1N1Y2Nlc3MpDQoJCSAgICAgICAgICAgICAgICBtc2dTdWNjZXNzLnN0eWxlLmRpc3BsYXkgPSAibm9uZSI7DQoNCgkJICAgICAgICAgICAgdmFyIG1zZ0FsZXJ0ID0gZm9ybS5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCJEaW5hbWl6ZURpdk1lc3NhZ2VBbGVydCIpWzBdOw0KCQkgICAgICAgICAgICBpZihtc2dBbGVydCkNCgkJICAgICAgICAgICAgICAgIG1zZ0FsZXJ0LnN0eWxlLmRpc3BsYXkgPSAibm9uZSI7DQoNCgkJICAgICAgICAgICAgdmFyIG1zZ0Vycm9yID0gZm9ybS5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCJEaW5hbWl6ZURpdk1lc3NhZ2VFcnJvciIpWzBdOw0KCQkgICAgICAgICAgICBpZihtc2dFcnJvcikNCgkJICAgICAgICAgICAgICAgIG1zZ0Vycm9yLnN0eWxlLmRpc3BsYXkgPSAibm9uZSI7DQoNCgkJICAgICAgICAgICAgLy8gZWxlbWVudG8gZGVwcmVjYXRlZCwgZGUgbGFuZGluZ1BhZ2UNCgkJICAgICAgICAgICAgdmFyIG1zZ0Vycm9yRGVwID0gZm9ybS5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCJkaXZNZXNzYWdlRXJyb3IiKVswXTsNCgkJICAgICAgICAgICAgaWYobXNnRXJyb3JEZXApDQoJCSAgICAgICAgICAgICAgICBtc2dFcnJvckRlcC5zdHlsZS5kaXNwbGF5ID0gIm5vbmUiOw0KDQoJCSAgICAgICAgICAgIHZhciBtc2dDYXB0Y2hhID0gZm9ybS5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCJEaW5hbWl6ZURpdkNhcHRjaGFNZXNzYWdlIilbMF07DQoJCSAgICAgICAgICAgIGlmKG1zZ0NhcHRjaGEpDQoJCSAgICAgICAgICAgICAgICBtc2dDYXB0Y2hhLnN0eWxlLmRpc3BsYXkgPSAibm9uZSI7DQoJCSAgICAgICAgfSwNCgkJICAgICAgICB2YWxpZGF0ZUVtYWlsOiBmdW5jdGlvbihlbWFpbCl7DQoJCSAgICAgICAgICAgIHZhciByZSA9IC9eKFthLXpBLVowLTlfListXSkrXEAoKFthLXpBLVowLTktXSkrXC4pKyhbYS16QS1aMC05XXsyLDR9KSskLzsNCgkJICAgICAgICAgICAgcmV0dXJuIHJlLnRlc3QoZW1haWwpOw0KCQkgICAgICAgIH0sDQoJCSAgICAgICAgcHJlcGFyZURhdGU6IGZ1bmN0aW9uKGRhdGUsIGZvcm1hdCl7DQoJCSAgICAgICAgICAgIHZhciBuZXdEYXRlLCB0aW1lOw0KCQkgICAgICAgICAgICBmb3JtYXQgPSBmb3JtYXQuc3Vic3RyKDAsMTApLnJlcGxhY2UoIi8iLCIiKS5yZXBsYWNlKCIvIiwiIikucmVwbGFjZSgiLSIsIiIpLnJlcGxhY2UoIi0iLCIiKTsNCgkJICAgICAgICAgICAgdGltZSA9IGRhdGUuc3Vic3RyKDEwLDE1KTsNCg0KCQkgICAgICAgICAgICBpZihmb3JtYXQgPT0gIkRETU1BQUFBIil7DQoJCSAgICAgICAgICAgICAgICBuZXdEYXRlID0gZGF0ZVs2XStkYXRlWzddK2RhdGVbOF0rZGF0ZVs5XSArIi0iKyBkYXRlWzNdK2RhdGVbNF0gKyItIisgZGF0ZVswXStkYXRlWzFdOw0KCQkgICAgICAgICAgICB9ZWxzZSBpZihmb3JtYXQgPT0gIk1NRERBQUFBIil7DQoJCSAgICAgICAgICAgICAgICBuZXdEYXRlID0gZGF0ZVs2XStkYXRlWzddK2RhdGVbOF0rZGF0ZVs5XSArIi0iKyBkYXRlWzBdK2RhdGVbMV0gKyItIisgZGF0ZVszXStkYXRlWzRdOw0KCQkgICAgICAgICAgICB9ZWxzZSBpZihmb3JtYXQgPT0gIkFBQUFNTUREIil7DQoJCSAgICAgICAgICAgICAgICBuZXdEYXRlID0gZGF0ZVswXStkYXRlWzFdK2RhdGVbMl0rZGF0ZVszXSArIi0iKyBkYXRlWzVdK2RhdGVbNl0gKyItIisgZGF0ZVs4XStkYXRlWzldOw0KCQkgICAgICAgICAgICB9DQoNCgkJICAgICAgICAgICAgcmV0dXJuIG5ld0RhdGUrdGltZTsNCgkJICAgICAgICB9LA0KCQkgICAgICAgIGV4aXN0RGF0ZTogZnVuY3Rpb24oZGF0ZSx0aW1lKXsNCgkJICAgICAgICAgICAgaWYodGltZSl7DQoJCSAgICAgICAgICAgICAgICBpZihkYXRlLmxlbmd0aCAhPSAxNil7DQoJCSAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlOw0KCQkgICAgICAgICAgICAgICAgfQ0KCQkgICAgICAgICAgICB9ZWxzZSBpZighdGltZSl7DQoJCSAgICAgICAgICAgICAgICBpZihkYXRlLmxlbmd0aCAhPSAxMCl7DQoJCSAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlOw0KCQkgICAgICAgICAgICAgICAgfQ0KCQkgICAgICAgICAgICAgICAgZGF0ZSArPSIgMDA6MDAiOw0KCQkgICAgICAgICAgICB9DQoNCgkJICAgICAgICAgICAgdmFyIE5FV0RBVEUgPSBuZXcgRGF0ZShkYXRlLnJlcGxhY2UoIi0iLCIvIikucmVwbGFjZSgiLSIsIi8iKSk7DQoJCSAgICAgICAgICAgIHZhciBzdHJOZXdkYXRlOw0KDQoJCSAgICAgICAgICAgIHZhciB5ID0gTkVXREFURS5nZXRGdWxsWWVhcigpLnRvU3RyaW5nKCk7DQoJCSAgICAgICAgICAgIHZhciBtID0gKE5FV0RBVEUuZ2V0TW9udGgoKSsxKS50b1N0cmluZygpOw0KCQkgICAgICAgICAgICB2YXIgZCAgPSBORVdEQVRFLmdldERhdGUoKS50b1N0cmluZygpOw0KCQkgICAgICAgICAgICB2YXIgaCAgPSBORVdEQVRFLmdldEhvdXJzKCkudG9TdHJpbmcoKTsNCgkJICAgICAgICAgICAgdmFyIG1pbiAgPSBORVdEQVRFLmdldE1pbnV0ZXMoKS50b1N0cmluZygpOw0KCQkgICAgICAgICAgICBzdHJOZXdkYXRlID0geSArIi0iKyAobVsxXT9tOiIwIittWzBdKSArIi0iKyAoZFsxXT9kOiIwIitkWzBdKSArIiAiKyAoaFsxXT9oOiIwIitoWzBdKSArICI6IiArIChtaW5bMV0/bWluOiIwIittaW5bMF0pOw0KDQoJCSAgICAgICAgICAgIGlmKGRhdGUgIT0gc3RyTmV3ZGF0ZSl7DQoJCSAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7DQoJCSAgICAgICAgICAgIH0NCg0KCQkgICAgICAgICAgICByZXR1cm4gdHJ1ZTsNCgkJICAgICAgICB9LA0KCQkgICAgICAgIGFkZENsYXNzOiBmdW5jdGlvbiggY2xhc3NuYW1lLCBlbGVtZW50ICkgew0KCQkgICAgICAgICAgICB2YXIgY24gPSBlbGVtZW50LmNsYXNzTmFtZTsNCgkJICAgICAgICAgICAgaWYoIGNuLmluZGV4T2YoIGNsYXNzbmFtZSApICE9IC0xICkgew0KCQkgICAgICAgICAgICAgICAgcmV0dXJuOw0KCQkgICAgICAgICAgICB9DQoJCSAgICAgICAgICAgIGlmKCBjbiAhPSAiIiApIHsNCgkJICAgICAgICAgICAgICAgIGNsYXNzbmFtZSA9ICIgIitjbGFzc25hbWU7DQoJCSAgICAgICAgICAgIH0NCgkJICAgICAgICAgICAgZWxlbWVudC5jbGFzc05hbWUgPSBjbitjbGFzc25hbWU7DQoJCSAgICAgICAgfSwNCgkJICAgICAgICByZW1vdmVDbGFzczogZnVuY3Rpb24oIGNsYXNzbmFtZSwgZWxlbWVudCApIHsNCgkJICAgICAgICAgICB2YXIgY24gPSBlbGVtZW50LmNsYXNzTmFtZTsgICAgICAgICAgICAgICAgICAgICANCgkJICAgICAgICAgICB2YXIgcnhwID0gbmV3IFJlZ0V4cCggIlxccz9cXGIiK2NsYXNzbmFtZSsiXFxiIiwgImciICk7DQoJCSAgICAgICAgICAgY24gPSBjbi5yZXBsYWNlKCByeHAsICIiICk7DQoJCSAgICAgICAgICAgZWxlbWVudC5jbGFzc05hbWUgPSBjbjsNCgkJICAgICAgICB9LA0KCQkgICAgICAgIC8vZnVuY2FvIGRvIGdvb2dsZSBmYXogbyBzZXJpYWxpemUgZXN0aWxvIEpRdWVyeQ0KCQkgICAgICAgIHNlcmlhbGl6ZTogZnVuY3Rpb24oZm9ybSl7aWYoIWZvcm18fGZvcm0ubm9kZU5hbWUhPT0iRk9STSIpe3JldHVybiB9dmFyIGksaixxPVtdO2ZvcihpPWZvcm0uZWxlbWVudHMubGVuZ3RoLTE7aT49MDtpPWktMSl7aWYoZm9ybS5lbGVtZW50c1tpXS5uYW1lPT09IiIpe2NvbnRpbnVlfXN3aXRjaChmb3JtLmVsZW1lbnRzW2ldLm5vZGVOYW1lKXtjYXNlIklOUFVUIjpzd2l0Y2goZm9ybS5lbGVtZW50c1tpXS50eXBlKXtjYXNlInRleHQiOmNhc2UiaGlkZGVuIjpjYXNlInBhc3N3b3JkIjpjYXNlImJ1dHRvbiI6Y2FzZSJyZXNldCI6Y2FzZSJzdWJtaXQiOnEucHVzaChmb3JtLmVsZW1lbnRzW2ldLm5hbWUrIj0iK2VuY29kZVVSSUNvbXBvbmVudChmb3JtLmVsZW1lbnRzW2ldLnZhbHVlKSk7YnJlYWs7Y2FzZSJjaGVja2JveCI6Y2FzZSJyYWRpbyI6aWYoZm9ybS5lbGVtZW50c1tpXS5jaGVja2VkKXtxLnB1c2goZm9ybS5lbGVtZW50c1tpXS5uYW1lKyI9IitlbmNvZGVVUklDb21wb25lbnQoZm9ybS5lbGVtZW50c1tpXS52YWx1ZSkpfWJyZWFrO2Nhc2UiZmlsZSI6YnJlYWt9YnJlYWs7Y2FzZSJURVhUQVJFQSI6cS5wdXNoKGZvcm0uZWxlbWVudHNbaV0ubmFtZSsiPSIrZW5jb2RlVVJJQ29tcG9uZW50KGZvcm0uZWxlbWVudHNbaV0udmFsdWUpKTticmVhaztjYXNlIlNFTEVDVCI6c3dpdGNoKGZvcm0uZWxlbWVudHNbaV0udHlwZSl7Y2FzZSJzZWxlY3Qtb25lIjpxLnB1c2goZm9ybS5lbGVtZW50c1tpXS5uYW1lKyI9IitlbmNvZGVVUklDb21wb25lbnQoZm9ybS5lbGVtZW50c1tpXS52YWx1ZSkpO2JyZWFrO2Nhc2Uic2VsZWN0LW11bHRpcGxlIjpmb3Ioaj1mb3JtLmVsZW1lbnRzW2ldLm9wdGlvbnMubGVuZ3RoLTE7aj49MDtqPWotMSl7aWYoZm9ybS5lbGVtZW50c1tpXS5vcHRpb25zW2pdLnNlbGVjdGVkKXtxLnB1c2goZm9ybS5lbGVtZW50c1tpXS5uYW1lKyI9IitlbmNvZGVVUklDb21wb25lbnQoZm9ybS5lbGVtZW50c1tpXS5vcHRpb25zW2pdLnZhbHVlKSl9fWJyZWFrfWJyZWFrO2Nhc2UiQlVUVE9OIjpzd2l0Y2goZm9ybS5lbGVtZW50c1tpXS50eXBlKXtjYXNlInJlc2V0IjpjYXNlInN1Ym1pdCI6Y2FzZSJidXR0b24iOnEucHVzaChmb3JtLmVsZW1lbnRzW2ldLm5hbWUrIj0iK2VuY29kZVVSSUNvbXBvbmVudChmb3JtLmVsZW1lbnRzW2ldLnZhbHVlKSk7YnJlYWt9YnJlYWt9fXJldHVybiBxLmpvaW4oIiYiKX0sDQoJCSAgICB9Ow0KCQl9DQoNCgkJLy8NCgkJaWYgKCBkb2N1bWVudC5yZWFkeVN0YXRlID09PSAiY29tcGxldGUiICkgew0KCQkgICAgZGluRm9ybXMub25Mb2FkKCk7DQoJCX1lbHNlIHsNCgkJICAgIGlmICh3aW5kb3cuYXR0YWNoRXZlbnQpIHsNCgkJICAgICAgICB3aW5kb3cuYXR0YWNoRXZlbnQoImxvYWQiLCBkaW5Gb3Jtcy5vbkxvYWQpOw0KCQkgICAgfSBlbHNlIHsNCgkJICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigibG9hZCIsIGRpbkZvcm1zLm9uTG9hZCk7DQoJCSAgICB9DQoJCX0NCgkJPC9zY3JpcHQ+","height":"618","is_mobile_active":true,"redirect_buttom":null,"remember_closed":true,"scroll_show":null,"show_filter":[{"exp":"carrinho/","type":"!CONTAINS"},{"exp":"checkout/","type":"!CONTAINS"}],"show_mode":"time","width":"650"}],"primary_color":"#ccc"},"leadTracking":{"ACTIVE":true,"AUTOMATION_URL_RULES":{"1":{"10":{"RULES":[],"TEST_URLS":[],"TITLE":"Best Seller"},"11":{"RULES":[{"TYPE":"CONTAINS","VALUE":"novidades"}],"TEST_URLS":[],"TITLE":"Novidades"},"12":{"RULES":[],"TEST_URLS":[],"TITLE":"Sandlias"},"13":{"RULES":[{"TYPE":"CONTAINS","VALUE":"sapatos"}],"TEST_URLS":[],"TITLE":"Sapatos"},"14":{"RULES":[{"TYPE":"CONTAINS","VALUE":"bolsas"}],"TEST_URLS":[],"TITLE":"Bolsas"},"15":{"RULES":[{"TYPE":"CONTAINS","VALUE":"outlet"}],"TEST_URLS":[],"TITLE":"Outlet"},"16":{"RULES":[{"TYPE":"CONTAINS","VALUE":"todos"}],"TEST_URLS":[],"TITLE":"Todos"},"19":{"RULES":[{"TYPE":"CONTAINS","VALUE":"mocassim"}],"TEST_URLS":[],"TITLE":"Mocassim"},"20":{"RULES":[{"TYPE":"CONTAINS","VALUE":"tenis"}],"TEST_URLS":[],"TITLE":"Tenis"},"8":{"RULES":[{"TYPE":"CONTAINS","VALUE":"carrinho/"}],"TEST_URLS":[],"TITLE":"Oportunidade"},"9":{"RULES":[{"TYPE":"CONTAINS","VALUE":"pedidos/sucesso"}],"TEST_URLS":["https://www.antolie.com.br/pedidos/sucesso/102716/"],"TITLE":"Cliente"}}},"HASH":"c094","HISTORY_URL_RULES":[],"LIST":"1","REQUIRE_CONSENT":false},"dinWhatsAppIntegration":{"forms":null}};var dinVERSION='1.0';var dinFunctions={request:function(method,url,params=null){var xmlhttp=new XMLHttpRequest();xmlhttp.onreadystatechange=function(){if(xmlhttp.readyState==XMLHttpRequest.DONE){if(xmlhttp.status>=200&&xmlhttp.status<=299){}else{dinLogger.Write(dinLogger.DEBUG,'Request returned status code '+xmlhttp.status);}}}
if(params!=null&&typeof params!=='string'){var len=params.length;if(len!=undefined){for(var x=0;x<len;x++){if(typeof params[x]==='object'&&params[x]!=null){var and="&";if(x==0){and="?";}
url+=and+Object.keys(params[x])+"="+encodeURIComponent(params[x][Object.keys(params[x])])}}}}
if(typeof method!=="string"||method===""){method="POST";}
xmlhttp.open(method,url,true);xmlhttp.send();},requestKeepAlive:function(url,params){if(typeof params==="string"&&params!==""){url+="?"+params;}
if(navigator.sendBeacon){dinLogger.Write(dinLogger.DEBUG,'Request using sendBeacon()');navigator.sendBeacon(url,{})
return}
dinLogger.Write(dinLogger.DEBUG,'Request using XMLHttpRequest()');var xmlhttp=new XMLHttpRequest();xmlhttp.onreadystatechange=function(){if(xmlhttp.readyState==XMLHttpRequest.DONE){if(xmlhttp.status>=200&&xmlhttp.status<=299){}else{dinLogger.Write(dinLogger.DEBUG,'Request returned status code '+xmlhttp.status);}}}
xmlhttp.open("POST",url,false);xmlhttp.send();},requestFetch:function(url,data){if(typeof data!=="object"){data={};}
return fetch(url,{method:'POST',mode:'cors',cache:'no-cache',credentials:'omit',headers:{},redirect:'follow',referrer:'client',keepalive:true,});},setCookie:function(cname,cvalue,exdays){var d=new Date();d.setTime(d.getTime()+(exdays*24*60*60*1000));var expires="expires="+d.toUTCString();document.cookie=cname+"="+cvalue+";"+expires+";path=/";dinLogger.Write(dinLogger.DEBUG,"Cookie set. cname:["+cname+"] cvalue:["+cvalue+"] exdays:["+exdays+"]");},getCookie:function(cname){var name=cname+"=";var allCookies=document.cookie;var ca=allCookies.split(';');for(var i=0;i<ca.length;i++){var c=ca[i];while(c.charAt(0)==' '){c=c.substring(1);}
if(c.indexOf(name)==0){return decodeURIComponent(c.substring(name.length,c.length));}}
return"";},addCookieToForm:function(contentTarget,formTarget){if(formTarget!=undefined){if(dinFunctions.getCookie('dinTrafficSource')){if(contentTarget.querySelector('#__dinTrafficSource')!=null){contentTarget.querySelector('#__dinTrafficSource').setAttribute('value',dinFunctions.getCookie('dinTrafficSource'));return}
var ts=document.createElement('input');ts.type='hidden';ts.name='__dinTrafficSource';ts.id='__dinTrafficSource';ts.value=dinFunctions.getCookie('dinTrafficSource');formTarget.appendChild(ts);}}},deleteCookie:function(cname){this.setCookie(cname,"",-1);dinLogger.Write(dinLogger.DEBUG,"Cookie deleted. cname:["+cname+"]");},base64Encode:function(str){return btoa(encodeURIComponent(str).replace(/%([0-9A-F]{2})/g,function toSolidBytes(match,p1){return String.fromCharCode('0x'+p1);}))},base64Decode:function(str){return decodeURIComponent(atob(str).split('').map(function(c){return'%'+('00'+c.charCodeAt(0).toString(16)).slice(-2);}).join(''));},prepareDate:function(date,format){var newDate,time;format=format.substr(0,10).replace("/","").replace("/","").replace("-","").replace("-","");time=date.substr(10,15);if(format=="DDMMAAAA"){newDate=date[6]+date[7]+date[8]+date[9]+"-"+date[3]+date[4]+"-"+date[0]+date[1];}else if(format=="MMDDAAAA"){newDate=date[6]+date[7]+date[8]+date[9]+"-"+date[0]+date[1]+"-"+date[3]+date[4];}else if(format=="AAAAMMDD"){newDate=date[0]+date[1]+date[2]+date[3]+"-"+date[5]+date[6]+"-"+date[8]+date[9];}
return newDate+time;},isCardNumber:function(n){var e,t,o,r=0,i=0;if('string'!=typeof n)return false;if(t=n.replace(/\D/g,''),(o=t.length)<14)return false;for(;o--;){e=parseInt(t.charAt(o),10)<<i;r+=e-9*(e>9);i^=1;}
return r%10==0&&r>0;},validateEmail:function(email){var regex=/^([a-zA-Z0-9_.+-])+\@(([a-zA-Z0-9-])+\.)+([a-zA-Z0-9]{2,4})+$/;return regex.test(email);},isMobileRes:function(){var width=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth;if(dinFunctions.checkOrientation()=='portrait')return(width<500);var height=window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight;return(height<500)},matchesRulesParser:function(url,show_filterin,type,value){var show_filter=[];var exRules=[];var coRules=[];var ncRules=[];var len=show_filterin.length;for(var x=0;x<len;x++){switch(show_filterin[x][type]){case"EQUAL":exRules.push(show_filterin[x][value]);break;case"CONTAINS":coRules.push(show_filterin[x][value]);break;case"!CONTAINS":ncRules.push(show_filterin[x][value]);break;}}
if(exRules.length){var filter={filterType:"EQUAL",filterRules:exRules};show_filter.push(filter);}
if(coRules.length){var filter={filterType:"CONTAINS",filterRules:coRules};show_filter.push(filter);}
if(ncRules.length){var filter={filterType:"!CONTAINS",filterRules:ncRules};show_filter.push(filter);}
var activate=this.matchesRules(url,show_filter)
if(!activate){dinLogger.Write(dinLogger.DEBUG,"Discarded for not attending to a certain url rule");}
return activate;},matchesRules:function(url,show_filter){var urlSplitt=url.split('/').slice(3).join('/');activate=true;var len=show_filter.length;endLoop:for(var x=0;x<len;x++){switch(show_filter[x].filterType){case"EQUAL":activate=false;var lenIn=show_filter[x].filterRules.length;for(var y=0;y<lenIn;y++){if(show_filter[x].filterRules[y]=="/"){show_filter[x].filterRules[y]="";}
if(show_filter[x].filterRules[y]==urlSplitt){activate=true
break endLoop;}}
break;case"CONTAINS":activate=false;var lenIn=show_filter[x].filterRules.length;for(var y=0;y<lenIn;y++){var regex=new RegExp(dinFunctions.escapeRegExp(show_filter[x].filterRules[y]),"i");if(regex.test(urlSplitt)){activate=true
break;}}
break;case"!CONTAINS":var lenIn=show_filter[x].filterRules.length;for(var y=0;y<lenIn;y++){var regex=new RegExp(dinFunctions.escapeRegExp(show_filter[x].filterRules[y]),"i");if(regex.test(urlSplitt)){activate=false
break;}}
break;}}
return activate;},getQueryParams:function(queryString){queryString=queryString.split("+").join(" ");var params={},tokens,re=/[?&]?([^=]+)=([^&]*)/g;while(tokens=re.exec(queryString)){params[decodeURIComponent(tokens[1])]=decodeURIComponent(tokens[2]);}
return params;},escapeRegExp:function(str){return str.replace(/([.*+?^=!:${}()|\[\]\/\\])/g,"\\$1");},replaceAll:function(str,find,replace){return str.replace(new RegExp(dinFunctions.escapeRegExp(find),'g'),replace);},isExampleEmail:function(email){if(email!==undefined&&(email==="email@dominio.com"||email==="email@domain.com")){dinLogger.Write(dinLogger.WARN,"Example email '"+email+"' ignored.");return true}
return false},getDomainPathUrl:function(){return window.location.href.split("?")[0].split("#")[0];},reduceSelectOptions:function(contentTarget,maxTextSize){var options=contentTarget.querySelectorAll("option");var len=options.length;if(len>0){for(var x=0;x<len;x++){if(options[x].textContent.length>maxTextSize){options[x].title=options[x].textContent;options[x].textContent=options[x].textContent.substring(0,maxTextSize)+"...";}}}},attachEventOnElement:function(element,eventType,eventFunction){if(element.attachEvent){element.attachEvent('on'+eventType,eventFunction);dinLogger.Write(dinLogger.DEBUG,"event ["+eventType+"] attached to the element ["+element+"] using [attachEvent] the function ["+eventFunction+"]");return}
element.addEventListener(eventType,eventFunction,false);dinLogger.Write(dinLogger.DEBUG,"event ["+eventType+"] attached to the element ["+element+"] using [addEventListener] the function ["+eventFunction+"]");},getReferrer:function(){return document.referrer?document.referrer.match(/:\/\/(.[^/]+)/)[1]:"";},hasWhatsForm:function(){var width=(document.documentElement.clientWidth-10);var height=(document.documentElement.clientHeight-10);var arrayofelements=document.elementsFromPoint(width,height);if(arrayofelements.length>0){for(var x=0;x<arrayofelements.length;x++){if(arrayofelements[x].classList.contains('dinWhatsFormDialog')||arrayofelements[x].classList.contains("dinWhatsFormIco"))return true;}}
return false},addViewportMetaTag:function(){var viewportmeta=document.querySelector('meta[name=viewport]');if(viewportmeta==null||viewportmeta.length<=0){var meta=document.createElement('meta');meta.name="viewport";meta.content="width=device-width,height=device-height,initial-scale=1";document.querySelector('head').appendChild(meta);}},calcScrollPercentage:function(perc){var html=document.documentElement;maxDocumentSize=html.scrollHeight
if(dinFunctions.isMobileRes())maxDocumentSize*=0.95
var h=maxDocumentSize-html.clientHeight;return Math.floor((h/100)*perc);},fixDialogHeight:function(dialogElement,heightIncrease=null){if(dialogElement==undefined||dialogElement.style.display==''||dialogElement.style.display=='none'){return}
var iframeContent=dialogElement.querySelector('iframe').contentWindow.document;var contentElement=iframeContent.querySelector('.content');var fatherElement=contentElement.parentElement;var contentHeight=fatherElement.clientHeight;if(contentHeight==0){var imgElement=fatherElement.querySelector('.img');contentHeight=Math.max(contentElement.clientHeight,imgElement.clientHeight);}
if(heightIncrease!=null)contentHeight+=heightIncrease;dialogElement.style.height=contentHeight+'px';},checkOrientation:function(){var width=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth;var height=window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight;if(width>height)return'landscape'
return'portrait'},validateDuplicity:function(form,name){var inputs=form.querySelectorAll('input[name="'+name+'"]');if(inputs.length>1){var type="";for(var i=inputs.length-1;i>=0;i--){if(i==inputs.length){type=inputs.type
continue;}
if(inputs[i].type!==type){return true}}}
return false;},hasSkipAttribute:function(element){return element.hasAttribute('dinSkipCapture');}};var dinTargetForm={config:dinConfigs.dinTargetForm,dialogElement:{},backElement:null,msgElement:null,dialogIsOpened:false,dialogsHasClosed:{},formsConfig:{},timeElement:null,mouseoutElement:null,scrollElement:null,formId:0,Init:function(){dinLogger.Write(dinLogger.DEBUG,"InitPopup called");var url=window.location.href;var appendIn=document.body;dinFunctions.addViewportMetaTag();var style=document.createElement('div');style.id='dinTargetFormStyle';style.innerHTML=this.cssStyle();appendIn.appendChild(style);if(this.config.popover){dinLogger.Write(dinLogger.DEBUG,"Found "+this.config.popover.length+" 'popover' popups");if(this.config.popover.length>0){var len=this.config.popover.length;for(var p=0;p<len;p++){var popUpActivate=true;dinLogger.Write(dinLogger.DEBUG,"'popover' popup ["+p+"]");if(this.config.popover[p].show_filter&&this.config.popover[p].show_filter.length>0){popUpActivate=dinFunctions.matchesRulesParser(url,this.config.popover[p].show_filter,"type","exp");}
if(popUpActivate){this.appendForm('popover',this.config.popover[p],appendIn);}}
if(popUpActivate){this.backElement=document.createElement('div');this.backElement.id='dinTargetFormBackground';appendIn.appendChild(this.backElement);}}}
if(this.config.scrollbox){dinLogger.Write(dinLogger.DEBUG,"Found "+this.config.scrollbox.length+" 'scrollbox' popups");if(this.config.scrollbox.length>0){var len=this.config.scrollbox.length;for(var p=0;p<len;p++){var popUpActivate=true;dinLogger.Write(dinLogger.DEBUG,"'scrollbox' popup ["+p+"]");if(this.config.scrollbox[p].show_filter&&this.config.scrollbox[p].show_filter.length>0){popUpActivate=dinFunctions.matchesRulesParser(url,this.config.scrollbox[p].show_filter,"type","exp");}
if(popUpActivate){this.appendForm('scrollbox',this.config.scrollbox[p],appendIn);}}}}
if(this.config.topbar){dinLogger.Write(dinLogger.DEBUG,"Found "+this.config.topbar.length+" 'topbar' popups");if(this.config.topbar.length>0){var len=this.config.topbar.length;for(var p=0;p<len;p++){var popUpActivate=true;dinLogger.Write(dinLogger.DEBUG,"'topbar' popup ["+p+"]");if(this.config.topbar[p].show_filter&&this.config.topbar[p].show_filter.length>0){popUpActivate=dinFunctions.matchesRulesParser(url,this.config.topbar[p].show_filter,"type","exp");}
if(popUpActivate){this.appendForm('topbar',this.config.topbar[p],appendIn);}}}}
if(this.config.embedded){dinLogger.Write(dinLogger.DEBUG,"Found "+this.config.embedded.length+" 'embedded' popups");if(this.config.embedded.length>0){var len=this.config.embedded.length;for(var p=0;p<len;p++){var popUpActivate=true;dinLogger.Write(dinLogger.DEBUG,"'embedded' popup ["+p+"]");if(this.config.embedded[p].show_filter&&this.config.embedded[p].show_filter.length>0){popUpActivate=dinFunctions.matchesRulesParser(url,this.config.embedded[p].show_filter,"type","exp");}
if(popUpActivate){var findFor=this.config.embedded[p].insert_into;var appendInE=document.getElementById(findFor);if(!appendInE){appendInE=document.getElementsByClassName(findFor);if(!appendInE){continue;}
for(var ai=0;ai<appendInE.length;++ai){this.appendForm('embedded',this.config.embedded[p],appendInE[ai]);}
continue;}
this.appendForm('embedded',this.config.embedded[p],appendInE);}}}}
this.msgElement=document.createElement('div');this.msgElement.id='dinTargetFormMessage';appendIn.appendChild(this.msgElement);if(this.mouseoutElement!=null){var me=this;var fn=function(ev){if(ev.toElement==null&&ev.relatedTarget==null){dinLogger.Write(dinLogger.DEBUG,"Mouse outside document. Opening popup");me.openDialog(me.mouseoutElement.formId);}};dinFunctions.attachEventOnElement(window,'mouseout',fn)}
if(this.scrollElement!=null){var me=this;var fn=function(ev){if(window.scrollY>=me.scrollElement.scroll){dinLogger.Write(dinLogger.DEBUG,"Required scroll triggered ["+me.scrollElement.scroll+"]. Opening popup");me.openDialog(me.scrollElement.formId);}};dinFunctions.attachEventOnElement(window,'scroll',fn)
var fnResize=function(ev){if(me.dialogsHasClosed[me.scrollElement.formId]){return;}
if(me.scrollElement.percent>0){me.scrollElement.scroll=dinFunctions.calcScrollPercentage(me.scrollElement.percent);}}
dinFunctions.attachEventOnElement(window,'resize',fnResize)}
if(this.timeElement!=null){var me=this;window.setTimeout(function(){dinLogger.Write(dinLogger.DEBUG,"Delay elapsed ["+me.timeElement.delay+"s]. Opening popup");me.openDialog(me.timeElement.formId);},me.timeElement.delay*1000);}
if(this.config.local_mode=='embedded'){this.config.close_buttom='';}
dinLogger.Write(dinLogger.DEBUG,"InitPopup done");},appendForm:function(mode,conf,appendIn){this.formId++;var me=this;var dialogElement=document.createElement('div');dialogElement.id='dinTargetFormDialog'+this.formId;dialogElement.setAttribute('dinTargetFormId',this.formId);dialogElement.className='dinTargetFormDialog '+mode;dialogElement.style.height=conf.height+'px';if(mode!="topbar"){dialogElement.style.width=conf.width+'px';}
var content=document.createElement('div');content.className='dinTargetFormContent';var iframe=document.createElement('iframe');content.appendChild(iframe);dialogElement.appendChild(content);if(conf.close_buttom=='X'){var close=document.createElement('div');close.className='dinTargetFormCloseButtom';close.innerHTML="X";dialogElement.appendChild(close);close.onclick=function(){var formId=this.parentNode.getAttribute('dinTargetFormId');me.closeDialog(formId);}}
appendIn.appendChild(dialogElement);var iframeHtml=dinFunctions.base64Decode(conf.dialog_html);var iframeContent=iframe.contentWindow.document;iframeContent.open();iframeContent.write(iframeHtml);iframeContent.close();var button=iframeContent.getElementById("closeButton");if(button!=undefined){button.onclick=function(){if(conf.redirect_buttom!=undefined&&conf.redirect_buttom!=""){location.href=conf.redirect_buttom;}
me.closeDialog(dialogElement.getAttribute('dinTargetFormId'));}}
var form=iframeContent.getElementsByClassName("formIntegration")[0];if(form==undefined){form=iframeContent.getElementById("formIntegration");}
dinFunctions.addCookieToForm(iframeContent,form)
if(conf.redirect_buttom!=undefined&&conf.redirect_buttom!=""){if(form!=undefined){var fn=function(){var inputError=iframeContent.getElementsByClassName("field-error");if(!inputError.length){setTimeout(function(){location.href=conf.redirect_buttom;},2000);}}
dinFunctions.attachEventOnElement(form,'submit',fn)}}
if(conf.close_buttom!='X'&&form!=undefined){var fn=function(){var inputError=iframeContent.getElementsByClassName("field-error");if(!inputError.length){setTimeout(function(){me.closeDialog(dialogElement.getAttribute('dinTargetFormId'));},2000);}}
dinFunctions.attachEventOnElement(form,'submit',fn)}
this.formsConfig[this.formId]=conf;if(mode=='embedded'){return;}
switch(conf.show_mode){case"mouse_out":var moe={formId:this.formId};if(this.mouseoutElement){dinLogger.Write(dinLogger.DEBUG,"Popup ignored. There is already a popup appended in the 'mouse out' trigger. FormId ["+moe.formId+"]");break;}
this.mouseoutElement=moe;break;case"scroll_move":var scrollShow=conf.scroll_show;var perc=0;if(scrollShow.indexOf('%')!=-1){perc=parseInt(scrollShow);if(!isNaN(perc)){var scrollShow=dinFunctions.calcScrollPercentage(perc);}}
var se={scroll:scrollShow,formId:this.formId,percent:perc};if(this.scrollElement!=null){if(this.scrollElement.scroll>se.scroll){dinLogger.Write(dinLogger.DEBUG,"Popup ignored. There is already a popup appended in the 'scroll' trigger. FormId ["+this.scrollElement.formId+"]");}else{dinLogger.Write(dinLogger.DEBUG,"Popup ignored. There is already a popup appended in the 'scroll' trigger. FormId ["+se.formId+"]");break;}}
this.scrollElement=se;break;default:var te={delay:conf.delay_open,formId:this.formId};if(this.timeElement!=null){if(this.timeElement.delay>te.delay){dinLogger.Write(dinLogger.DEBUG,"Popup ignored. There is already a popup appended in the 'time' trigger. FormId ["+this.timeElement.formId+"]");}else{dinLogger.Write(dinLogger.DEBUG,"Popup ignored. There is already a popup appended in the 'time' trigger. FormId ["+te.formId+"]");break;}}
this.timeElement=te;break;}
this.dialogElement[this.formId]=dialogElement;dinLogger.Write(dinLogger.DEBUG,"Popup append done");},openDialog:function(formId){if(this.dialogIsOpened||this.dialogsHasClosed[formId]){return;}
var conf=this.formsConfig[formId];if(conf&&conf.remember_closed&&dinFunctions.getCookie('dinTargetForm_dead')==1){return;}
var ff=this.dialogElement[formId];if(!ff||(dinFunctions.isMobileRes()&&(conf.is_mobile_active==undefined||!conf.is_mobile_active))||(ff.classList.contains('scrollbox')&&dinFunctions.hasWhatsForm())){return;}
ff.style.display='block';if(this.backElement!=null&&ff.classList.contains('popover')){this.backElement.style.display='block';}
dinFunctions.fixDialogHeight(ff,this.getHeightIncrease(ff));var me=this;var fnResize=function(ev){if(me.dialogsHasClosed[formId]){return;}
dinFunctions.fixDialogHeight(ff,me.getHeightIncrease(ff));}
dinFunctions.attachEventOnElement(window,'resize',fnResize)
this.dialogIsOpened=formId;},closeDialog:function(formId){var ff=this.dialogElement[formId];if(!this.dialogIsOpened||!ff||ff.style.display=='none'){return;}
ff.style.display='none';if(this.backElement!=null){this.backElement.style.display='none';}
this.dialogIsOpened=false;this.dialogsHasClosed[formId]=true;var conf=this.formsConfig[formId];if(conf&&conf.remember_closed){dinFunctions.setCookie('dinTargetForm_dead','1',conf.cookie_dead_days);}},closeMessage:function(){this.msgElement.style.display='none';},FormClosed:function(msg){if(this.dialogIsOpened){var conf=this.formsConfig[this.dialogIsOpened];if(conf.close_after_submit){this.closeDialog(this.dialogIsOpened);}}
if(msg){this.msgElement.innerHTML='<div class="dinTargetFormCloseButtom" onclick="dinTargetForm.closeMessage()">X</div><span style="display: table-cell; vertical-align: middle;">'+msg+'</span>';this.msgElement.style.display='table';}},cssStyle:function(){var style=`

  <style type="text/css">

   .dinTargetFormDialog, .dinTargetFormContent, .dinTargetFormContent iframe { box-sizing: content-box; }

   @viewport { width: device-width; height: device-height; zoom: 1.0 ; }



   @-ms-viewport { width: device-width; height: device-height; }



   @media screen and (max-width: 500px) { .dinTargetFormDialog.popover { width: 80%; max-width: 90%; max-height: 80%; } .dinTargetFormDialog.scrollbox { max-width: 65%; } }

   @media screen and (min-width: 501px) and (max-width: 850px) { .dinTargetFormDialog.popover { width: 80%; max-width: 90%; max-height: 80%; } .dinTargetFormDialog.scrollbox { max-width: 65%; } }

   @media screen and (min-width: 851px) { .dinTargetFormDialog.popover { max-width: 90%; min-width: initial; max-height: 95vh} }

   #dinTargetFormBackground { z-index: 999999998; position: fixed; top: 0; left: 0; height: 100vh; width: 100vw; background-color: #000000; opacity: 0.25; display: none; }

   #dinTargetFormMessage { z-index: 999999998; position: fixed; text-align: center; font-family: Arial; font-size: 14px; margin: auto; top: 50%; left: 50%; display: none; width: 400px; height: 100px; margin-top: -50px; margin-left: -200px; background-color: `+this.config.primary_color+`; }

   .dinTargetFormDialog:not(.embedded) { z-index: 999999999; position: fixed; display: none; -webkit-overflow-scrolling:touch!important; overflow-y: auto!important; overflow-x: hidden; }



   .dinTargetFormDialog.popover { margin: auto; top: 50%; left: 50%; transform: translate(-50%, -50%); border: none; background-color: transparent; padding: 10px; }



   .dinTargetFormDialog.scrollbox { max-height: 90%; right: 0; bottom: 0; }

   .dinTargetFormDialog.topbar { right: 0; top: 0; width: 100vw; max-height: 45vh; }

   /* Boto de fechar */

   .dinTargetFormCloseButtom { position: absolute; width: 22px; height: 22px; background-color: #ffffff; cursor: pointer; font-size: 13px; font-family: Arial; font-weight: bolder; line-height: 20px; text-align: center; }

   .dinTargetFormDialog.popover .dinTargetFormCloseButtom, #dinTargetFormMessage .dinTargetFormCloseButtom { right: 0; top: 0; border-radius: 50%; border: 2px solid `+this.config.primary_color+`; }

   .dinTargetFormDialog.scrollbox .dinTargetFormCloseButtom { right: 0; top: 0; }

   .dinTargetFormDialog.topbar .dinTargetFormCloseButtom { right: 0; bottom: 0; position: absolute}

   /* Fim boto */

   .dinTargetFormDialog:not(.embedded) .dinTargetFormContent { width: 100%; height: 100%; }

   .dinTargetFormContent iframe { border: 0px; width: 100%; height: 100%; position: absolute; top:0; left:0; right:0; bottom:0; margin: auto;}

   .dinTargetFormDialog.popover .dinTargetFormContent iframe { width: calc(100% - 20px); height: calc(100% - 20px) }

  </style>`;return style;},getHeightIncrease:function(dialogElement){var iframeContent=dialogElement.querySelector('iframe').contentWindow.document;var contentElement=iframeContent.querySelector('.content');var fatherElement=contentElement.parentElement;switch(fatherElement.className){case'scrollbox-03':case'scrollbox-04':return 20;default:return null;}
return null;}}
var dinWhatsForm={config:dinConfigs.dinWhatsAppIntegration,dialogElement:{},formsConfig:{},formId:0,Init:function(){if(this.config&&this.config.forms){dinLogger.Write(dinLogger.DEBUG,"InitWhatsIntegration Called");var url=window.location.href;var appendIn=document.body;dinFunctions.addViewportMetaTag();var style=document.createElement('div');style.id='dinWhatsFormStyle';style.innerHTML=this.cssStyle();appendIn.appendChild(style);var configObject=this.config.forms;if(configObject.length){var shouldDisplay=true,len=configObject.length;dinLogger.Write(dinLogger.DEBUG,"Found "+len+" 'whatsapp integrations");for(var p=0;p<len;p++){dinLogger.Write(dinLogger.DEBUG,"WhatsApp Integration ["+p+"]");if(configObject[p].show_filter&&configObject[p].show_filter.length){shouldDisplay=dinFunctions.matchesRulesParser(url,configObject[p].show_filter,"filterType","filterRules");}
if(shouldDisplay){this.appendForm(configObject[p],appendIn);break;}}}
dinLogger.Write(dinLogger.DEBUG,"InitWhatsIntegration done");}},appendForm:function(conf,appendIn){this.formId++;var me=this;var dialogElement=document.createElement('div');dialogElement.id='dinWhatsFormDialog'+this.formId;dialogElement.setAttribute('dinWhatsFormId',this.formId);dialogElement.className='dinWhatsFormDialog';dialogElement.style.display='block';var content=document.createElement('div');content.className='dinWhatsFormContent hideContent';var iframe=document.createElement('iframe');content.appendChild(iframe);dialogElement.appendChild(content);whatsIcoDiv=document.createElement('div');whatsIcoDiv.id='dinWhatsFormIco';whatsIcoDiv.className='dinWhatsFormIco';whatsIcoImg=document.createElement('img');whatsIcoImg.src='https://dl.dnzdns.com/i/whats01';closeIcoDiv=document.createElement('div');whatsIcoDiv.appendChild(closeIcoDiv);whatsIcoDiv.appendChild(whatsIcoImg)
dialogElement.appendChild(whatsIcoDiv);appendIn.appendChild(dialogElement);if(conf.check_shake==="shake"){dialogElement.classList.add('dinShake');}
if(conf.icon_whats_position==="left"){dialogElement.classList.add('dinBottomLeft');}
var fn=function(e){if(whatsIcoDiv.contains(e.target)){content.classList.toggle('hideContent')
closeIcoDiv.classList.toggle('close')
if(content.classList.contains('hideContent')){setTimeout(function(){if(content.classList.contains('hideContent')){dialogElement.style.height='';dialogElement.style.width='';}},1000);return;}
dialogElement.style.width='250px';dialogElement.style.height='350px';dinFunctions.fixDialogHeight(dialogElement,20)
return;}
if(!content.contains(e.target)&&!content.classList.contains('hideContent')){content.classList.add('hideContent');if(closeIcoDiv.classList.contains('close')){closeIcoDiv.classList.remove('close')}
setTimeout(function(){if(content.classList.contains('hideContent')){dialogElement.style.height='';dialogElement.style.width='';}},1000);}};dinFunctions.attachEventOnElement(window,'click',fn)
var iframeHtml=dinFunctions.base64Decode(conf.dialog_html);var iframeContent=iframe.contentWindow.document;iframeContent.open();iframeContent.write(iframeHtml);iframeContent.close();if(!dinFunctions.isMobileRes()){dinFunctions.reduceSelectOptions(iframeContent,23)}
var form=iframeContent.querySelector('.formIntegration');if(form==undefined)form=iframeContent.querySelector('#formIntegration')
dinFunctions.addCookieToForm(iframeContent,form)
this.formsConfig[this.formId]=conf;this.dialogElement[this.formId]=dialogElement;dinLogger.Write(dinLogger.DEBUG,"WhatsApp Form append done");},cssStyle:function(){var style=`

  <style type="text/css">

  @viewport { width: device-width; height: device-height; zoom: 1.0 ; }

  @-ms-viewport { width: device-width; height: device-height;}

  .dinWhatsFormDialog { z-index: 999999999; position: fixed; right: 0; bottom: 0;max-width: 80vw; max-height: calc(98vh - 70px); }

  .dinWhatsFormDialog.dinBottomLeft{right: unset; left: 0;}

  .dinWhatsFormDialog .dinWhatsFormContent { width: 100%; height: 100%; -webkit-overflow-scrolling:touch; overflow: auto; }

  .dinWhatsFormDialog > .dinWhatsFormContent iframe { border: 0px; width: 100%; height: 100%; position: absolute; top:0;left:0;right:0;bottom:0;}

  .dinWhatsFormDialog > .dinWhatsFormContent{ right: 7px; bottom: 70px; position: absolute; visibility: visible; transition: 1s; -webkit-box-shadow: 1px 1px 5px 1px rgba(50, 50, 50, 0.75); -moz-box-shadow: 1px 1px 5px 1px rgba(50, 50, 50, 0.75); box-shadow: 1px 1px 5px 1px rgba(50, 50, 50, 0.75); border-radius: 25px; }

  .dinWhatsFormDialog.dinBottomLeft > .dinWhatsFormContent{right: 0px; left: 7px;}

  .dinWhatsFormDialog > .dinWhatsFormContent.hideContent{ right: -300px; opacity: 0; visibility: hidden; transition: 1s; }

  .dinWhatsFormDialog.dinBottomLeft > .dinWhatsFormContent.hideContent{ right: 0px; left: -300px;}

  .dinWhatsFormDialog > .dinWhatsFormIco { float: right; position: fixed; opacity: 0.75; bottom: 3px; right: 7px; cursor: pointer; }

  .dinWhatsFormDialog.dinBottomLeft > .dinWhatsFormIco {float: left; left: 7px; right:unset;}

  .dinWhatsFormDialog > .dinWhatsFormIco img{ width: 100%; transition: 1s; }

  .dinWhatsFormDialog > .dinWhatsFormIco .close ~img { opacity: 0; }

  .dinWhatsFormDialog > .dinWhatsFormIco .close { margin: 7px; display: flex; position: absolute; width: 60%; height: 60%; opacity: .6; border: 4px solid; border-radius: 50%; justify-content: center; align-items: center; }

  .dinWhatsFormDialog > .dinWhatsFormIco .close:hover { opacity: 1; }

  .dinWhatsFormDialog > .dinWhatsFormIco .close:before, .dinWhatsFormIco .close:after { position: absolute; content: ' '; height: 80%; width: 6px; background-color: #333; }

  .dinWhatsFormDialog > .dinWhatsFormIco .close:before { transform: rotate(45deg); }

  .dinWhatsFormDialog > .dinWhatsFormIco .close:after { transform: rotate(-45deg); }

  .dinWhatsFormDialog.dinShake > .dinWhatsFormIco { animation: dinShake 5s; animation-iteration-count: infinite; }

  @keyframes dinShake {

    0.0% { transform: translate(1px, 1px) rotate(0deg); }

    0.5% { transform: translate(-1px, -2px) rotate(-2deg); }

    1.0% { transform: translate(-3px, 0px) rotate(2deg); }

    1.5% { transform: translate(3px, 2px) rotate(0deg); }

    2.0% { transform: translate(1px, -1px) rotate(2deg); }

    2.5% { transform: translate(-1px, 2px) rotate(-2deg); }

    3.0% { transform: translate(-3px, 1px) rotate(0deg); }

    3.5% { transform: translate(3px, 1px) rotate(-2deg); }

    4.0% { transform: translate(-1px, -1px) rotate(2deg); }

    4.5% { transform: translate(1px, 2px) rotate(0deg); }

    5.0% { transform: translate(1px, -2px) rotate(-2deg); }

    5.5% { transform: translate(-1px, -1px) rotate(2deg); }

    6.0% { transform: translate(1px, 1px) rotate(0deg); }

  }

  </style>`;return style;}}
var dinSearchForm={DebugMode:false,Init:function(){if(dinConfigs.crawlForms){var form=document.getElementsByTagName("form");for(var i=0;i<form.length;i++){if(dinFunctions.hasSkipAttribute(form[i])){dinLogger.Write(dinLogger.DEBUG,"Form ignored because dinSkipCapture attribute - ",form[i]);continue}
dinFunctions.attachEventOnElement(form[i],'submit',this.processForm)
dinLogger.Write(dinLogger.DEBUG,"Event attached to form ",form[i]);}}else{dinLogger.Write(dinLogger.DEBUG,"Forms wont be crawled");}},processForm:function(event){var form=event.currentTarget;var formAction=form.getAttribute("action");var labelList={};if(formAction!=undefined&&formAction.search(/^http[s]?:\/\/[^\/]*\/in\/[0-9]*\/[^\/]*\//)==0){dinLogger.Write(dinLogger.DEBUG,"Dinamize's form ignored",form);return;}
if(dinSearchForm.DebugMode){debugger;}
if(formAction==undefined){formAction="Missing action form";dinLogger.Write(dinLogger.DEBUG,"Form without an action ",form);}
dinFunctions.addCookieToForm(document,form)
var urlPage=document.location.href;var uriPage=urlPage.replace(/^[a-z]*:\/\/[^\/]*/,"")
formAction=formAction.replace(urlPage,"");formAction=formAction.replace(uriPage,"");if(formAction==""){formAction="Missing action form";}
var labels=document.getElementsByTagName("label");for(var l=0;l<labels.length;l++){if(labels[l].htmlFor){labelList[labels[l].htmlFor]=labels[l].textContent;}}
var elemList={};var findEmail=false;var emailLeadTracker="";for(var e=0;e<form.elements.length;e++){var elem=form.elements[e];if(dinFunctions.hasSkipAttribute(elem)){dinLogger.Write(dinLogger.DEBUG,"Element ignored because dinSkipCapture attribute - ",elem.name);continue;}
elemName=elem.name.replace(/\[\]/g,"");if(elemName==""){dinLogger.Write(dinLogger.INFO,"Ignoring nameless element on post ",elem);continue;}
if(dinFunctions.validateDuplicity(form,elemName)){dinLogger.Write(dinLogger.ERROR,"Found different type inputs with same name - ",elemName);}
switch(elem.tagName){case"INPUT":switch(elem.type){case"checkbox":if(typeof(elemList[elemName])=="undefined"){elemList[elemName]=[];}
if(elem.checked==true){if(labelList[elem.id]!=undefined){elemList[elemName].push(labelList[elem.id]);}else{elemList[elemName].push(elem.value);}}
break;case"radio":if(elem.checked==true){elemList[elemName]=(labelList[elem.id]!=undefined)?labelList[elem.id]:elem.value;}
break;case"password":case"submit":case"file":case"button":case"reset":dinLogger.Write(dinLogger.INFO,"Field ignored. Type:["+elem.type+"] ",elem);break;case"email":if(dinFunctions.validateEmail(elem.value)){elemList["{{cmp1}}"]=elem.value
findEmail=true;}else{dinLogger.Write(dinLogger.WARN,"Not a valid e-mail ",elem);}
elemList[elemName]=elem.value
break;default:if(elem.type=="hidden"&&elemName.match(/^_token[a-f0-9]{32,}$/)){dinLogger.Write(dinLogger.INFO,"Field discarded for variable name _tokenXXXX",elem);break;}
elemList[elemName]=elem.value
var normalize=elemName.replace(/[-_]/,"").trim().toLowerCase();if(normalize=="email"){if(dinFunctions.validateEmail(elem.value)){elemList["{{cmp1}}"]=elem.value
findEmail=true;}else{dinLogger.Write(dinLogger.WARN,"Not a valid e-mail ",elem);}}else{if(dinFunctions.isCardNumber(elem.value)){dinLogger.Write(dinLogger.INFO,"Value discarded for Credit Card field ",elem);elemList[elemName]="**************";}}
if(elem.type=="hidden"&&elem.value.length>100){elemList[elemName]="(...)";dinLogger.Write(dinLogger.INFO,"Value discarded for large hidden field ",elem);}
break;}
break;case"SELECT":elemList[elemName]=[];var optionElements=elem.getElementsByTagName('option');for(var y=0;y<optionElements.length;y++){var opt=optionElements.item(y);if(opt.selected){elemList[elemName].push(opt.label);}}
break;case"TEXTAREA":dinLogger.Write(dinLogger.INFO,"Textarea ignored ",elem);break;default:elemList[elemName]=elem.value;break;}}
form.querySelector('#__dinTrafficSource').remove();var ignoreElements=["captcha","_wpcf7","_wpcf7_version","_wpcf7_unit_tag","_wpnonce","_wpcf7_is_ajax_call","_wpcf7_locale","g-recaptcha-response","_viewstate","_previouspage","_viewstategenerator"];for(var i=0;i<ignoreElements.length;i++){elemList[ignoreElements[i]]=undefined;}
var listCode=dinConfigs.listCode;var updateMode=dinConfigs.updateMode;var fieldList={};if(dinConfigs.formHashConfig&&dinConfigs.formHashConfig[formAction]!=undefined){var formData=dinConfigs.formHashConfig[formAction];listCode=formData["listCode"];updateMode=formData["updateMode"];if(typeof formData["fieldRules"]==="undefined"||formData["fieldRules"]==null){dinLogger.Write(dinLogger.DEBUG,"No rules configured for this form",formAction);}else{if(formData["fieldRules"]["Variable"]!=undefined){elemList["{{cmp1}}"]=undefined;for(var elemName in formData["fieldRules"]["Variable"]){if(elemList[elemName]!=undefined){var fieldData=formData["fieldRules"]["Variable"][elemName];if(typeof elemList[elemName]==='string'){var oldValue=elemList[elemName];switch(fieldData["Type"]){case"DT":case"DH":var dateFormat=fieldData["Extras"]["format"];fieldList["cmp"+fieldData["Field"]]=dinFunctions.prepareDate(oldValue,dateFormat);break;case"FLT":var separator=fieldData["Extras"]["separator"];switch(separator){case",":var newValue=oldValue.replace(".","");var newValue2=newValue.replace(",",".");fieldList["cmp"+fieldData["Field"]]=newValue2;break;case".":var newValue=oldValue.replace(",","");fieldList["cmp"+fieldData["Field"]]=newValue;break;}
break;case"LV-2":var find=fieldData["Extras"]["separator"];var regFind=new RegExp(find,'g');var newValue=oldValue.replace(regFind,"|");fieldList["cmp"+fieldData["Field"]]=newValue;fieldList["cmp"+fieldData["Field"]+"_action"]=fieldData["Extras"]["action"];break;case"PHN":var arrNum=oldValue.match(/\d+/g)
if(arrNum!=null){oldValue=arrNum.join("")}
fieldList["cmp"+fieldData["Field"]]=oldValue;var insertDDI=fieldData["Extras"]["insertDDI"];if(insertDDI!=undefined&&insertDDI=="S"){var ddi=fieldData["Extras"]["ddi"];fieldList["cmp"+fieldData["Field"]]=ddi+oldValue;}
break;default:fieldList["cmp"+fieldData["Field"]]=oldValue;break;}}else if(typeof elemList[elemName]==='object'){var oldValue=elemList[elemName];if(fieldData["Type"]=="LV-2"){fieldList["cmp"+fieldData["Field"]]=oldValue.join("|");fieldList["cmp"+fieldData["Field"]+"_action"]=fieldData["Extras"]["action"];}else{fieldList["cmp"+fieldData["Field"]]=oldValue[0];}}else{dinLogger.Write(dinLogger.ERROR,"Field: '"+elemName+"' | Type: "+typeof elemList[elemName]);}}}}
if(formData["fieldRules"]["Fixed"]!=undefined){for(var x in formData["fieldRules"]["Fixed"]){fieldList["cmp"+formData["fieldRules"]["Fixed"][x]["Field"]]=formData["fieldRules"]["Fixed"][x]["Value"];if(formData["fieldRules"]["Fixed"][x]["Type"]=="LV-2"){fieldList["cmp"+formData["fieldRules"]["Fixed"][x]["Field"]+"_action"]=formData["fieldRules"]["Fixed"][x]["Extras"]["action"];}}}}}else{if(!findEmail){dinLogger.Write(dinLogger.WARN,"No valid email found.",form);return;}}
var email="";var externalCode="";if(typeof fieldList.cmp1==="string"&&fieldList.cmp1!==""){email=fieldList.cmp1;}
if(typeof fieldList.cmp3==="string"&&fieldList.cmp3!==""){externalCode=fieldList.cmp3;}
if(typeof elemList["{{cmp1}}"]==="string"&&elemList["{{cmp1}}"]!==""){email=elemList["{{cmp1}}"];}
if(typeof elemList["{{cmp3}}"]==="string"&&elemList["{{cmp3}}"]!==""){externalCode=elemList["{{cmp3}}"];}
if(email===""&&externalCode===""){dinLogger.Write(dinLogger.WARN,"This form was mapped, but no valid email or external code was found. If you filled the form correctly, you'll need to remap it by deleting it's configuration and creating a new one.",form);return}
if(typeof dinLeadTracker!=="undefined"&&dinLeadTracker.isActive()){if(email!==""){dinLeadTracker.SetLeadEmail(email);}
if(externalCode!==""){dinLeadTracker.SetLeadExternalId(externalCode);}}
var sendElement={url:document.location.href.split("?")[0],title:document.title,formId:form.id,formAction:formAction,elemList:elemList,fieldList:fieldList,version:dinVERSION,listCode:listCode,updateMode:updateMode,};var jsonStr=JSON.stringify(sendElement);if(jsonStr==undefined){dinLogger.Write(dinLogger.ERROR,"Couldn't generate form's json ",sendElement);return;}
dinFunctions.requestKeepAlive('//receiver.emkt.dinamize.com/inc/'+dinConfigs.clientCode+'/'+dinConfigs.siteCode+'/'+encodeURIComponent(dinFunctions.base64Encode(jsonStr)),Math.floor((Math.random()*99999)+1));dinLogger.Write(dinLogger.DEBUG,"Data sent to Dinamize ",form);}}
var dinLogger={DEBUG:4,INFO:3,WARN:2,ERROR:1,mode:0,Set:function(level){this.mode=level;},Write:function(level,msg){var slicedArgs=Array.prototype.slice.call(arguments,1);switch(level){case this.DEBUG:if(this.mode>=level){console.log.apply(this,slicedArgs);}
break;case this.INFO:if(this.mode>=level){console.info.apply(this,slicedArgs);}
break;case this.WARN:console.warn.apply(this,slicedArgs);break;case this.ERROR:console.error.apply(this,slicedArgs);break;}}};(function(global,factory){typeof exports==='object'&&typeof module!=='undefined'?factory(exports):typeof define==='function'&&define.amd?define(['exports'],factory):(factory((global.JSEncrypt={})));}(this,(function(exports){'use strict';var BI_RM="0123456789abcdefghijklmnopqrstuvwxyz";function int2char(n){return BI_RM.charAt(n);}
var b64map="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";var b64pad="=";function hex2b64(h){var i;var c;var ret="";for(i=0;i+3<=h.length;i+=3){c=parseInt(h.substring(i,i+3),16);ret+=b64map.charAt(c>>6)+b64map.charAt(c&63);}
if(i+1==h.length){c=parseInt(h.substring(i,i+1),16);ret+=b64map.charAt(c<<2);}
else if(i+2==h.length){c=parseInt(h.substring(i,i+2),16);ret+=b64map.charAt(c>>2)+b64map.charAt((c&3)<<4);}
while((ret.length&3)>0){ret+=b64pad;}
return ret;}
var extendStatics=function(d,b){extendStatics=Object.setPrototypeOf||({__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b;})||function(d,b){for(var p in b)if(b.hasOwnProperty(p))d[p]=b[p];};return extendStatics(d,b);};function __extends(d,b){extendStatics(d,b);function __(){this.constructor=d;}
d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __());}
var decoder$1;var Base64={decode:function(a){var i;if(decoder$1===undefined){var b64="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";var ignore="= \f\n\r\t\u00A0\u2028\u2029";decoder$1=Object.create(null);for(i=0;i<64;++i){decoder$1[b64.charAt(i)]=i;}
for(i=0;i<ignore.length;++i){decoder$1[ignore.charAt(i)]=-1;}}
var out=[];var bits=0;var char_count=0;for(i=0;i<a.length;++i){var c=a.charAt(i);if(c=="="){break;}
c=decoder$1[c];if(c==-1){continue;}
if(c===undefined){throw new Error("Illegal character at offset "+i);}
bits|=c;if(++char_count>=4){out[out.length]=(bits>>16);out[out.length]=(bits>>8)&0xFF;out[out.length]=bits&0xFF;bits=0;char_count=0;}
else{bits<<=6;}}
switch(char_count){case 1:throw new Error("Base64 encoding incomplete: at least 2 bits missing");case 2:out[out.length]=(bits>>10);break;case 3:out[out.length]=(bits>>16);out[out.length]=(bits>>8)&0xFF;break;}
return out;},re:/-----BEGIN [^-]+-----([A-Za-z0-9+\/=\s]+)-----END [^-]+-----|begin-base64[^\n]+\n([A-Za-z0-9+\/=\s]+)====/,unarmor:function(a){var m=Base64.re.exec(a);if(m){if(m[1]){a=m[1];}
else if(m[2]){a=m[2];}
else{throw new Error("RegExp out of sync");}}
return Base64.decode(a);}};var max=10000000000000;var Int10=(function(){function Int10(value){this.buf=[+value||0];}
Int10.prototype.mulAdd=function(m,c){var b=this.buf;var l=b.length;var i;var t;for(i=0;i<l;++i){t=b[i]*m+c;if(t<max){c=0;}
else{c=0|(t/max);t-=c*max;}
b[i]=t;}
if(c>0){b[i]=c;}};Int10.prototype.sub=function(c){var b=this.buf;var l=b.length;var i;var t;for(i=0;i<l;++i){t=b[i]-c;if(t<0){t+=max;c=1;}
else{c=0;}
b[i]=t;}
while(b[b.length-1]===0){b.pop();}};Int10.prototype.toString=function(base){if((base||10)!=10){throw new Error("only base 10 is supported");}
var b=this.buf;var s=b[b.length-1].toString();for(var i=b.length-2;i>=0;--i){s+=(max+b[i]).toString().substring(1);}
return s;};Int10.prototype.valueOf=function(){var b=this.buf;var v=0;for(var i=b.length-1;i>=0;--i){v=v*max+b[i];}
return v;};Int10.prototype.simplify=function(){var b=this.buf;return(b.length==1)?b[0]:this;};return Int10;}());var Stream=(function(){function Stream(enc,pos){this.hexDigits="0123456789ABCDEF";if(enc instanceof Stream){this.enc=enc.enc;this.pos=enc.pos;}
else{this.enc=enc;this.pos=pos;}}
Stream.prototype.get=function(pos){if(pos===undefined){pos=this.pos++;}
if(pos>=this.enc.length){throw new Error("Requesting byte offset "+pos+" on a stream of length "+this.enc.length);}
return("string"===typeof this.enc)?this.enc.charCodeAt(pos):this.enc[pos];};Stream.prototype.hexByte=function(b){return this.hexDigits.charAt((b>>4)&0xF)+this.hexDigits.charAt(b&0xF);};Stream.prototype.hexDump=function(start,end,raw){var s="";for(var i=start;i<end;++i){s+=this.hexByte(this.get(i));if(raw!==true){switch(i&0xF){case 0x7:s+="  ";break;case 0xF:s+="\n";break;default:s+=" ";}}}
return s;};return Stream;}());var ASN1=(function(){function ASN1(stream,header,length,tag,sub){if(!(tag instanceof ASN1Tag)){throw new Error("Invalid tag value.");}
this.stream=stream;this.header=header;this.length=length;this.tag=tag;this.sub=sub;}
ASN1.prototype.typeName=function(){switch(this.tag.tagClass){case 0:switch(this.tag.tagNumber){case 0x00:return"EOC";case 0x01:return"BOOLEAN";case 0x02:return"INTEGER";case 0x03:return"BIT_STRING";case 0x04:return"OCTET_STRING";case 0x05:return"NULL";case 0x06:return"OBJECT_IDENTIFIER";case 0x07:return"ObjectDescriptor";case 0x08:return"EXTERNAL";case 0x09:return"REAL";case 0x0A:return"ENUMERATED";case 0x0B:return"EMBEDDED_PDV";case 0x0C:return"UTF8String";case 0x10:return"SEQUENCE";case 0x11:return"SET";case 0x12:return"NumericString";case 0x13:return"PrintableString";case 0x14:return"TeletexString";case 0x15:return"VideotexString";case 0x16:return"IA5String";case 0x17:return"UTCTime";case 0x18:return"GeneralizedTime";case 0x19:return"GraphicString";case 0x1A:return"VisibleString";case 0x1B:return"GeneralString";case 0x1C:return"UniversalString";case 0x1E:return"BMPString";}
return"Universal_"+this.tag.tagNumber.toString();case 1:return"Application_"+this.tag.tagNumber.toString();case 2:return"["+this.tag.tagNumber.toString()+"]";case 3:return"Private_"+this.tag.tagNumber.toString();}};ASN1.prototype.toString=function(){return this.typeName()+"@"+this.stream.pos+"[header:"+this.header+",length:"+this.length+",sub:"+((this.sub===null)?"null":this.sub.length)+"]";};ASN1.prototype.posStart=function(){return this.stream.pos;};ASN1.prototype.posContent=function(){return this.stream.pos+this.header;};ASN1.prototype.posEnd=function(){return this.stream.pos+this.header+Math.abs(this.length);};ASN1.prototype.toHexString=function(){return this.stream.hexDump(this.posStart(),this.posEnd(),true);};ASN1.decodeLength=function(stream){var buf=stream.get();var len=buf&0x7F;if(len==buf){return len;}
if(len>6){throw new Error("Length over 48 bits not supported at position "+(stream.pos-1));}
if(len===0){return null;}
buf=0;for(var i=0;i<len;++i){buf=(buf*256)+stream.get();}
return buf;};ASN1.prototype.getHexStringValue=function(){var hexString=this.toHexString();var offset=this.header*2;var length=this.length*2;return hexString.substr(offset,length);};ASN1.decode=function(str){var stream;if(!(str instanceof Stream)){stream=new Stream(str,0);}
else{stream=str;}
var streamStart=new Stream(stream);var tag=new ASN1Tag(stream);var len=ASN1.decodeLength(stream);var start=stream.pos;var header=start-streamStart.pos;var sub=null;var getSub=function(){var ret=[];if(len!==null){var end=start+len;while(stream.pos<end){ret[ret.length]=ASN1.decode(stream);}
if(stream.pos!=end){throw new Error("Content size is not correct for container starting at offset "+start);}}
else{try{for(;;){var s=ASN1.decode(stream);if(s.tag.isEOC()){break;}
ret[ret.length]=s;}
len=start-stream.pos;}
catch(e){throw new Error("Exception while decoding undefined length content: "+e);}}
return ret;};if(tag.tagConstructed){sub=getSub();}
else if(tag.isUniversal()&&((tag.tagNumber==0x03)||(tag.tagNumber==0x04))){try{if(tag.tagNumber==0x03){if(stream.get()!=0){throw new Error("BIT STRINGs with unused bits cannot encapsulate.");}}
sub=getSub();for(var i=0;i<sub.length;++i){if(sub[i].tag.isEOC()){throw new Error("EOC is not supposed to be actual content.");}}}
catch(e){sub=null;}}
if(sub===null){if(len===null){throw new Error("We can't skip over an invalid tag with undefined length at offset "+start);}
stream.pos=start+Math.abs(len);}
return new ASN1(streamStart,header,len,tag,sub);};return ASN1;}());var ASN1Tag=(function(){function ASN1Tag(stream){var buf=stream.get();this.tagClass=buf>>6;this.tagConstructed=((buf&0x20)!==0);this.tagNumber=buf&0x1F;if(this.tagNumber==0x1F){var n=new Int10();do{buf=stream.get();n.mulAdd(128,buf&0x7F);}while(buf&0x80);this.tagNumber=n.simplify();}}
ASN1Tag.prototype.isUniversal=function(){return this.tagClass===0x00;};ASN1Tag.prototype.isEOC=function(){return this.tagClass===0x00&&this.tagNumber===0x00;};return ASN1Tag;}());var dbits;var canary=0xdeadbeefcafe;var j_lm=((canary&0xffffff)==0xefcafe);var BigInteger=(function(){function BigInteger(a,b,c){if(a!=null){if("number"==typeof a){console.warn("REMOVED")}
else if(b==null&&"string"!=typeof a){this.fromString(a,256);}
else{this.fromString(a,b);}}}
BigInteger.prototype.toString=function(b){if(this.s<0){return"-"+this.negate().toString(b);}
var k;if(b==16){k=4;}
else if(b==8){k=3;}
else if(b==2){k=1;}
else if(b==32){k=5;}
else if(b==4){k=2;}
else{return this.toRadix(b);}
var km=(1<<k)-1;var d;var m=false;var r="";var i=this.t;var p=this.DB-(i*this.DB)%k;if(i-->0){if(p<this.DB&&(d=this[i]>>p)>0){m=true;r=int2char(d);}
while(i>=0){if(p<k){d=(this[i]&((1<<p)-1))<<(k-p);d|=this[--i]>>(p+=this.DB-k);}
else{d=(this[i]>>(p-=k))&km;if(p<=0){p+=this.DB;--i;}}
if(d>0){m=true;}
if(m){r+=int2char(d);}}}
return m?r:"0";};BigInteger.prototype.negate=function(){var r=nbi();BigInteger.ZERO.subTo(this,r);return r;};BigInteger.prototype.abs=function(){return(this.s<0)?this.negate():this;};BigInteger.prototype.compareTo=function(a){var r=this.s-a.s;if(r!=0){return r;}
var i=this.t;r=i-a.t;if(r!=0){return(this.s<0)?-r:r;}
while(--i>=0){if((r=this[i]-a[i])!=0){return r;}}
return 0;};BigInteger.prototype.bitLength=function(){if(this.t<=0){return 0;}
return this.DB*(this.t-1)+nbits(this[this.t-1]^(this.s&this.DM));};BigInteger.prototype.mod=function(a){var r=nbi();this.abs().divRemTo(a,null,r);if(this.s<0&&r.compareTo(BigInteger.ZERO)>0){a.subTo(r,r);}
return r;};BigInteger.prototype.modPowInt=function(e,m){var z;if(e<256||m.isEven()){z=new Classic(m);}
else{z=new Montgomery(m);}
return this.exp(e,z);};BigInteger.prototype.clone=function(){var r=nbi();this.copyTo(r);return r;};BigInteger.prototype.intValue=function(){if(this.s<0){if(this.t==1){return this[0]-this.DV;}
else if(this.t==0){return-1;}}
else if(this.t==1){return this[0];}
else if(this.t==0){return 0;}
return((this[1]&((1<<(32-this.DB))-1))<<this.DB)|this[0];};BigInteger.prototype.signum=function(){if(this.s<0){return-1;}
else if(this.t<=0||(this.t==1&&this[0]<=0)){return 0;}
else{return 1;}};BigInteger.prototype.min=function(a){return(this.compareTo(a)<0)?this:a;};BigInteger.prototype.max=function(a){return(this.compareTo(a)>0)?this:a;};BigInteger.prototype.not=function(){var r=nbi();for(var i=0;i<this.t;++i){r[i]=this.DM&~this[i];}
r.t=this.t;r.s=~this.s;return r;};BigInteger.prototype.shiftLeft=function(n){var r=nbi();if(n<0){this.rShiftTo(-n,r);}
else{this.lShiftTo(n,r);}
return r;};BigInteger.prototype.subtract=function(a){var r=nbi();this.subTo(a,r);return r;};BigInteger.prototype.multiply=function(a){var r=nbi();this.multiplyTo(a,r);return r;};BigInteger.prototype.divide=function(a){var r=nbi();this.divRemTo(a,r,null);return r;};BigInteger.prototype.copyTo=function(r){for(var i=this.t-1;i>=0;--i){r[i]=this[i];}
r.t=this.t;r.s=this.s;};BigInteger.prototype.fromInt=function(x){this.t=1;this.s=(x<0)?-1:0;if(x>0){this[0]=x;}
else if(x<-1){this[0]=x+this.DV;}
else{this.t=0;}};BigInteger.prototype.fromString=function(s,b){var k;if(b==16){k=4;}
else if(b==8){k=3;}
else if(b==256){k=8;}
else if(b==2){k=1;}
else if(b==32){k=5;}
else if(b==4){k=2;}
else{this.fromRadix(s,b);return;}
this.t=0;this.s=0;var i=s.length;var mi=false;var sh=0;while(--i>=0){var x=(k==8)?(+s[i])&0xff:intAt(s,i);if(x<0){if(s.charAt(i)=="-"){mi=true;}
continue;}
mi=false;if(sh==0){this[this.t++]=x;}
else if(sh+k>this.DB){this[this.t-1]|=(x&((1<<(this.DB-sh))-1))<<sh;this[this.t++]=(x>>(this.DB-sh));}
else{this[this.t-1]|=x<<sh;}
sh+=k;if(sh>=this.DB){sh-=this.DB;}}
if(k==8&&((+s[0])&0x80)!=0){this.s=-1;if(sh>0){this[this.t-1]|=((1<<(this.DB-sh))-1)<<sh;}}
this.clamp();if(mi){BigInteger.ZERO.subTo(this,this);}};BigInteger.prototype.clamp=function(){var c=this.s&this.DM;while(this.t>0&&this[this.t-1]==c){--this.t;}};BigInteger.prototype.dlShiftTo=function(n,r){var i;for(i=this.t-1;i>=0;--i){r[i+n]=this[i];}
for(i=n-1;i>=0;--i){r[i]=0;}
r.t=this.t+n;r.s=this.s;};BigInteger.prototype.drShiftTo=function(n,r){for(var i=n;i<this.t;++i){r[i-n]=this[i];}
r.t=Math.max(this.t-n,0);r.s=this.s;};BigInteger.prototype.lShiftTo=function(n,r){var bs=n%this.DB;var cbs=this.DB-bs;var bm=(1<<cbs)-1;var ds=Math.floor(n/this.DB);var c=(this.s<<bs)&this.DM;for(var i=this.t-1;i>=0;--i){r[i+ds+1]=(this[i]>>cbs)|c;c=(this[i]&bm)<<bs;}
for(var i=ds-1;i>=0;--i){r[i]=0;}
r[ds]=c;r.t=this.t+ds+1;r.s=this.s;r.clamp();};BigInteger.prototype.rShiftTo=function(n,r){r.s=this.s;var ds=Math.floor(n/this.DB);if(ds>=this.t){r.t=0;return;}
var bs=n%this.DB;var cbs=this.DB-bs;var bm=(1<<bs)-1;r[0]=this[ds]>>bs;for(var i=ds+1;i<this.t;++i){r[i-ds-1]|=(this[i]&bm)<<cbs;r[i-ds]=this[i]>>bs;}
if(bs>0){r[this.t-ds-1]|=(this.s&bm)<<cbs;}
r.t=this.t-ds;r.clamp();};BigInteger.prototype.subTo=function(a,r){var i=0;var c=0;var m=Math.min(a.t,this.t);while(i<m){c+=this[i]-a[i];r[i++]=c&this.DM;c>>=this.DB;}
if(a.t<this.t){c-=a.s;while(i<this.t){c+=this[i];r[i++]=c&this.DM;c>>=this.DB;}
c+=this.s;}
else{c+=this.s;while(i<a.t){c-=a[i];r[i++]=c&this.DM;c>>=this.DB;}
c-=a.s;}
r.s=(c<0)?-1:0;if(c<-1){r[i++]=this.DV+c;}
else if(c>0){r[i++]=c;}
r.t=i;r.clamp();};BigInteger.prototype.multiplyTo=function(a,r){var x=this.abs();var y=a.abs();var i=x.t;r.t=i+y.t;while(--i>=0){r[i]=0;}
for(i=0;i<y.t;++i){r[i+x.t]=x.am(0,y[i],r,i,0,x.t);}
r.s=0;r.clamp();if(this.s!=a.s){BigInteger.ZERO.subTo(r,r);}};BigInteger.prototype.squareTo=function(r){var x=this.abs();var i=r.t=2*x.t;while(--i>=0){r[i]=0;}
for(i=0;i<x.t-1;++i){var c=x.am(i,x[i],r,2*i,0,1);if((r[i+x.t]+=x.am(i+1,2*x[i],r,2*i+1,c,x.t-i-1))>=x.DV){r[i+x.t]-=x.DV;r[i+x.t+1]=1;}}
if(r.t>0){r[r.t-1]+=x.am(i,x[i],r,2*i,0,1);}
r.s=0;r.clamp();};BigInteger.prototype.divRemTo=function(m,q,r){var pm=m.abs();if(pm.t<=0){return;}
var pt=this.abs();if(pt.t<pm.t){if(q!=null){q.fromInt(0);}
if(r!=null){this.copyTo(r);}
return;}
if(r==null){r=nbi();}
var y=nbi();var ts=this.s;var ms=m.s;var nsh=this.DB-nbits(pm[pm.t-1]);if(nsh>0){pm.lShiftTo(nsh,y);pt.lShiftTo(nsh,r);}
else{pm.copyTo(y);pt.copyTo(r);}
var ys=y.t;var y0=y[ys-1];if(y0==0){return;}
var yt=y0*(1<<this.F1)+((ys>1)?y[ys-2]>>this.F2:0);var d1=this.FV/yt;var d2=(1<<this.F1)/yt;var e=1<<this.F2;var i=r.t;var j=i-ys;var t=(q==null)?nbi():q;y.dlShiftTo(j,t);if(r.compareTo(t)>=0){r[r.t++]=1;r.subTo(t,r);}
BigInteger.ONE.dlShiftTo(ys,t);t.subTo(y,y);while(y.t<ys){y[y.t++]=0;}
while(--j>=0){var qd=(r[--i]==y0)?this.DM:Math.floor(r[i]*d1+(r[i-1]+e)*d2);if((r[i]+=y.am(0,qd,r,j,0,ys))<qd){y.dlShiftTo(j,t);r.subTo(t,r);while(r[i]<--qd){r.subTo(t,r);}}}
if(q!=null){r.drShiftTo(ys,q);if(ts!=ms){BigInteger.ZERO.subTo(q,q);}}
r.t=ys;r.clamp();if(nsh>0){r.rShiftTo(nsh,r);}
if(ts<0){BigInteger.ZERO.subTo(r,r);}};BigInteger.prototype.invDigit=function(){if(this.t<1){return 0;}
var x=this[0];if((x&1)==0){return 0;}
var y=x&3;y=(y*(2-(x&0xf)*y))&0xf;y=(y*(2-(x&0xff)*y))&0xff;y=(y*(2-(((x&0xffff)*y)&0xffff)))&0xffff;y=(y*(2-x*y%this.DV))%this.DV;return(y>0)?this.DV-y:-y;};BigInteger.prototype.isEven=function(){return((this.t>0)?(this[0]&1):this.s)==0;};BigInteger.prototype.exp=function(e,z){if(e>0xffffffff||e<1){return BigInteger.ONE;}
var r=nbi();var r2=nbi();var g=z.convert(this);var i=nbits(e)-1;g.copyTo(r);while(--i>=0){z.sqrTo(r,r2);if((e&(1<<i))>0){z.mulTo(r2,g,r);}
else{var t=r;r=r2;r2=t;}}
return z.revert(r);};BigInteger.prototype.chunkSize=function(r){return Math.floor(Math.LN2*this.DB/Math.log(r));};BigInteger.prototype.toRadix=function(b){if(b==null){b=10;}
if(this.signum()==0||b<2||b>36){return"0";}
var cs=this.chunkSize(b);var a=Math.pow(b,cs);var d=nbv(a);var y=nbi();var z=nbi();var r="";this.divRemTo(d,y,z);while(y.signum()>0){r=(a+z.intValue()).toString(b).substr(1)+r;y.divRemTo(d,y,z);}
return z.intValue().toString(b)+r;};BigInteger.prototype.fromRadix=function(s,b){this.fromInt(0);if(b==null){b=10;}
var cs=this.chunkSize(b);var d=Math.pow(b,cs);var mi=false;var j=0;var w=0;for(var i=0;i<s.length;++i){var x=intAt(s,i);if(x<0){if(s.charAt(i)=="-"&&this.signum()==0){mi=true;}
continue;}
w=b*w+x;if(++j>=cs){this.dMultiply(d);this.dAddOffset(w,0);j=0;w=0;}}
if(j>0){this.dMultiply(Math.pow(b,j));this.dAddOffset(w,0);}
if(mi){BigInteger.ZERO.subTo(this,this);}};BigInteger.prototype.dMultiply=function(n){this[this.t]=this.am(0,n-1,this,0,0,this.t);++this.t;this.clamp();};BigInteger.prototype.dAddOffset=function(n,w){if(n==0){return;}
while(this.t<=w){this[this.t++]=0;}
this[w]+=n;while(this[w]>=this.DV){this[w]-=this.DV;if(++w>=this.t){this[this.t++]=0;}
++this[w];}};BigInteger.prototype.square=function(){var r=nbi();this.squareTo(r);return r;};return BigInteger;}());var NullExp=(function(){function NullExp(){}
NullExp.prototype.convert=function(x){return x;};NullExp.prototype.revert=function(x){return x;};NullExp.prototype.mulTo=function(x,y,r){x.multiplyTo(y,r);};NullExp.prototype.sqrTo=function(x,r){x.squareTo(r);};return NullExp;}());var Classic=(function(){function Classic(m){this.m=m;}
Classic.prototype.convert=function(x){if(x.s<0||x.compareTo(this.m)>=0){return x.mod(this.m);}
else{return x;}};Classic.prototype.revert=function(x){return x;};Classic.prototype.reduce=function(x){x.divRemTo(this.m,null,x);};Classic.prototype.mulTo=function(x,y,r){x.multiplyTo(y,r);this.reduce(r);};Classic.prototype.sqrTo=function(x,r){x.squareTo(r);this.reduce(r);};return Classic;}());var Montgomery=(function(){function Montgomery(m){this.m=m;this.mp=m.invDigit();this.mpl=this.mp&0x7fff;this.mph=this.mp>>15;this.um=(1<<(m.DB-15))-1;this.mt2=2*m.t;}
Montgomery.prototype.convert=function(x){var r=nbi();x.abs().dlShiftTo(this.m.t,r);r.divRemTo(this.m,null,r);if(x.s<0&&r.compareTo(BigInteger.ZERO)>0){this.m.subTo(r,r);}
return r;};Montgomery.prototype.revert=function(x){var r=nbi();x.copyTo(r);this.reduce(r);return r;};Montgomery.prototype.reduce=function(x){while(x.t<=this.mt2){x[x.t++]=0;}
for(var i=0;i<this.m.t;++i){var j=x[i]&0x7fff;var u0=(j*this.mpl+(((j*this.mph+(x[i]>>15)*this.mpl)&this.um)<<15))&x.DM;j=i+this.m.t;x[j]+=this.m.am(0,u0,x,i,0,this.m.t);while(x[j]>=x.DV){x[j]-=x.DV;x[++j]++;}}
x.clamp();x.drShiftTo(this.m.t,x);if(x.compareTo(this.m)>=0){x.subTo(this.m,x);}};Montgomery.prototype.mulTo=function(x,y,r){x.multiplyTo(y,r);this.reduce(r);};Montgomery.prototype.sqrTo=function(x,r){x.squareTo(r);this.reduce(r);};return Montgomery;}());function nbi(){return new BigInteger(null);}
function parseBigInt(str,r){return new BigInteger(str,r);}
function am1(i,x,w,j,c,n){while(--n>=0){var v=x*this[i++]+w[j]+c;c=Math.floor(v/0x4000000);w[j++]=v&0x3ffffff;}
return c;}
function am2(i,x,w,j,c,n){var xl=x&0x7fff;var xh=x>>15;while(--n>=0){var l=this[i]&0x7fff;var h=this[i++]>>15;var m=xh*l+h*xl;l=xl*l+((m&0x7fff)<<15)+w[j]+(c&0x3fffffff);c=(l>>>30)+(m>>>15)+xh*h+(c>>>30);w[j++]=l&0x3fffffff;}
return c;}
function am3(i,x,w,j,c,n){var xl=x&0x3fff;var xh=x>>14;while(--n>=0){var l=this[i]&0x3fff;var h=this[i++]>>14;var m=xh*l+h*xl;l=xl*l+((m&0x3fff)<<14)+w[j]+c;c=(l>>28)+(m>>14)+xh*h;w[j++]=l&0xfffffff;}
return c;}
if(j_lm&&(navigator.appName=="Microsoft Internet Explorer")){BigInteger.prototype.am=am2;dbits=30;}
else if(j_lm&&(navigator.appName!="Netscape")){BigInteger.prototype.am=am1;dbits=26;}
else{BigInteger.prototype.am=am3;dbits=28;}
BigInteger.prototype.DB=dbits;BigInteger.prototype.DM=((1<<dbits)-1);BigInteger.prototype.DV=(1<<dbits);var BI_FP=52;BigInteger.prototype.FV=Math.pow(2,BI_FP);BigInteger.prototype.F1=BI_FP-dbits;BigInteger.prototype.F2=2*dbits-BI_FP;var BI_RC=[];var rr;var vv;rr="0".charCodeAt(0);for(vv=0;vv<=9;++vv){BI_RC[rr++]=vv;}
rr="a".charCodeAt(0);for(vv=10;vv<36;++vv){BI_RC[rr++]=vv;}
rr="A".charCodeAt(0);for(vv=10;vv<36;++vv){BI_RC[rr++]=vv;}
function intAt(s,i){var c=BI_RC[s.charCodeAt(i)];return(c==null)?-1:c;}
function nbv(i){var r=nbi();r.fromInt(i);return r;}
function nbits(x){var r=1;var t;if((t=x>>>16)!=0){x=t;r+=16;}
if((t=x>>8)!=0){x=t;r+=8;}
if((t=x>>4)!=0){x=t;r+=4;}
if((t=x>>2)!=0){x=t;r+=2;}
if((t=x>>1)!=0){x=t;r+=1;}
return r;}
BigInteger.ZERO=nbv(0);BigInteger.ONE=nbv(1);var Arcfour=(function(){function Arcfour(){this.i=0;this.j=0;this.S=[];}
Arcfour.prototype.init=function(key){var i;var j;var t;for(i=0;i<256;++i){this.S[i]=i;}
j=0;for(i=0;i<256;++i){j=(j+this.S[i]+key[i%key.length])&255;t=this.S[i];this.S[i]=this.S[j];this.S[j]=t;}
this.i=0;this.j=0;};Arcfour.prototype.next=function(){var t;this.i=(this.i+1)&255;this.j=(this.j+this.S[this.i])&255;t=this.S[this.i];this.S[this.i]=this.S[this.j];this.S[this.j]=t;return this.S[(t+this.S[this.i])&255];};return Arcfour;}());function prng_newstate(){return new Arcfour();}
var rng_psize=256;var rng_state;var rng_pool=null;var rng_pptr;if(rng_pool==null){rng_pool=[];rng_pptr=0;var t=void 0;if(window.crypto&&window.crypto.getRandomValues){var z=new Uint32Array(256);window.crypto.getRandomValues(z);for(t=0;t<z.length;++t){rng_pool[rng_pptr++]=z[t]&255;}}
var onMouseMoveListener_1=function(ev){this.count=this.count||0;if(this.count>=256||rng_pptr>=rng_psize){if(window.removeEventListener){window.removeEventListener("mousemove",onMouseMoveListener_1,false);}
else if(window.detachEvent){window.detachEvent("onmousemove",onMouseMoveListener_1);}
return;}
try{var mouseCoordinates=ev.x+ev.y;rng_pool[rng_pptr++]=mouseCoordinates&255;this.count+=1;}
catch(e){}};if(window.addEventListener){window.addEventListener("mousemove",onMouseMoveListener_1,false);}
else if(window.attachEvent){window.attachEvent("onmousemove",onMouseMoveListener_1);}}
function rng_get_byte(){if(rng_state==null){rng_state=prng_newstate();while(rng_pptr<rng_psize){var random=Math.floor(65536*Math.random());rng_pool[rng_pptr++]=random&255;}
rng_state.init(rng_pool);for(rng_pptr=0;rng_pptr<rng_pool.length;++rng_pptr){rng_pool[rng_pptr]=0;}
rng_pptr=0;}
return rng_state.next();}
var SecureRandom=(function(){function SecureRandom(){}
SecureRandom.prototype.nextBytes=function(ba){for(var i=0;i<ba.length;++i){ba[i]=rng_get_byte();}};return SecureRandom;}());function pkcs1pad2(s,n){if(n<s.length+11){console.error("Message too long for RSA");return null;}
var ba=[];var i=s.length-1;while(i>=0&&n>0){var c=s.charCodeAt(i--);if(c<128){ba[--n]=c;}
else if((c>127)&&(c<2048)){ba[--n]=(c&63)|128;ba[--n]=(c>>6)|192;}
else{ba[--n]=(c&63)|128;ba[--n]=((c>>6)&63)|128;ba[--n]=(c>>12)|224;}}
ba[--n]=0;var rng=new SecureRandom();var x=[];while(n>2){x[0]=0;while(x[0]==0){rng.nextBytes(x);}
ba[--n]=x[0];}
ba[--n]=2;ba[--n]=0;return new BigInteger(ba);}
var RSAKey=(function(){function RSAKey(){this.n=null;this.e=0;this.d=null;this.p=null;this.q=null;this.dmp1=null;this.dmq1=null;this.coeff=null;}
RSAKey.prototype.doPublic=function(x){return x.modPowInt(this.e,this.n);};RSAKey.prototype.encrypt=function(text){var m=pkcs1pad2(text,(this.n.bitLength()+7)>>3);if(m==null){return null;}
var c=this.doPublic(m);if(c==null){return null;}
var h=c.toString(16);if((h.length&1)==0){return h;}
else{return"0"+h;}};return RSAKey;}());var JSEncryptRSAKey=(function(_super){__extends(JSEncryptRSAKey,_super);function JSEncryptRSAKey(key){var _this=_super.call(this)||this;if(key){if(typeof key==="string"){_this.parseKey(key);}
else if(JSEncryptRSAKey.hasPrivateKeyProperty(key)||JSEncryptRSAKey.hasPublicKeyProperty(key)){_this.parsePropertiesFrom(key);}}
return _this;}
JSEncryptRSAKey.prototype.parseKey=function(pem){try{var modulus=0;var public_exponent=0;var reHex=/^\s*(?:[0-9A-Fa-f][0-9A-Fa-f]\s*)+$/;var der=reHex.test(pem)?Hex.decode(pem):Base64.unarmor(pem);var asn1=ASN1.decode(der);if(asn1.sub.length===3){asn1=asn1.sub[2].sub[0];}
if(asn1.sub.length===9){modulus=asn1.sub[1].getHexStringValue();this.n=parseBigInt(modulus,16);public_exponent=asn1.sub[2].getHexStringValue();this.e=parseInt(public_exponent,16);var private_exponent=asn1.sub[3].getHexStringValue();this.d=parseBigInt(private_exponent,16);var prime1=asn1.sub[4].getHexStringValue();this.p=parseBigInt(prime1,16);var prime2=asn1.sub[5].getHexStringValue();this.q=parseBigInt(prime2,16);var exponent1=asn1.sub[6].getHexStringValue();this.dmp1=parseBigInt(exponent1,16);var exponent2=asn1.sub[7].getHexStringValue();this.dmq1=parseBigInt(exponent2,16);var coefficient=asn1.sub[8].getHexStringValue();this.coeff=parseBigInt(coefficient,16);}
else if(asn1.sub.length===2){var bit_string=asn1.sub[1];var sequence=bit_string.sub[0];modulus=sequence.sub[0].getHexStringValue();this.n=parseBigInt(modulus,16);public_exponent=sequence.sub[1].getHexStringValue();this.e=parseInt(public_exponent,16);}
else{return false;}
return true;}
catch(ex){return false;}};JSEncryptRSAKey.hasPublicKeyProperty=function(obj){obj=obj||{};return(obj.hasOwnProperty("n")&&obj.hasOwnProperty("e"));};JSEncryptRSAKey.prototype.parsePropertiesFrom=function(obj){this.n=obj.n;this.e=obj.e;if(obj.hasOwnProperty("d")){this.d=obj.d;this.p=obj.p;this.q=obj.q;this.dmp1=obj.dmp1;this.dmq1=obj.dmq1;this.coeff=obj.coeff;}};return JSEncryptRSAKey;}(RSAKey));var JSEncrypt=(function(){function JSEncrypt(options){options=options||{};this.default_key_size=parseInt(options.default_key_size,10)||1024;this.default_public_exponent=options.default_public_exponent||"010001";this.log=true;this.key=null;}
JSEncrypt.prototype.setKey=function(key){if(this.log&&this.key){console.warn("A key was already set, overriding existing.");}
this.key=new JSEncryptRSAKey(key);};JSEncrypt.prototype.setPublicKey=function(pubkey){this.setKey(pubkey);};JSEncrypt.prototype.encrypt=function(str){try{return hex2b64(this.getKey().encrypt(str));}
catch(ex){return false;}};JSEncrypt.prototype.getKey=function(cb){if(!this.key){this.key=new JSEncryptRSAKey();if(cb&&{}.toString.call(cb)==="[object Function]"){this.key.generateAsync(this.default_key_size,this.default_public_exponent,cb);return;}
this.key.generate(this.default_key_size,this.default_public_exponent);}
return this.key;};JSEncrypt.version="3.0.0-rc.1";return JSEncrypt;}());window.JSEncrypt=JSEncrypt;exports.JSEncrypt=JSEncrypt;exports.default=JSEncrypt;Object.defineProperty(exports,'__esModule',{value:true});})));var dinLeadTracker={COOKIE_NAME:"dinLeadTrack",TYPE_EMAIL:"EM",TYPE_EXTERNAL_CODE:"CE",TYPE_ID:"ID",TYPE_POSCLICK:"PC",POSCLICK_URL:"https://receiver.posclick.dinamize.com",PUBLIC_KEY:"-----BEGIN RSA PUBLIC KEY-----\nMIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEAsXbGia7iTXEjq1/K2+Sj\nJA519Kvm4AloHv/gG9iu+9NrEMG8VMmI7eX9qBOoJk+qX13+mQaP2xbJP3XUYqsf\nPFDHjCyGNN3BfneZ8lAexr3JvMYw2DTKL4QNSTix8V3SPoBaqpCfm7BwTulng1YB\n9MZUJjv0Cjp3auICiOZEtfJPWd74YJ5NfgJYYU4q6ub/CNSgcgRzqZyciPFP7Hy7\nyLF17UF+miteKzOLfE+v6E9uTcT5drObBoTTlmXoRW1nBi90huZdz+wxIH1xm6S+\nmcDUDec6S7KXzRjseNgL2NsRNuE35M6exYQD2XLPkS5yDc8JdhswTeWJghHfIY4V\nHQIDAQAB\n-----END RSA PUBLIC KEY-----",LastUrlPosted:"",StoredPosclickId:"",DebugMode:false,Init:function(){if(this.isActive()){dinLogger.Write(dinLogger.DEBUG,"LeadTracking is active");}else{dinLogger.Write(dinLogger.DEBUG,"LeadTracking is inactive");return}
var referer=dinFunctions.getReferrer();var hostname=window.location.hostname;if(referer!==""&&referer!=hostname){this.setReferrer(referer);}
var query=dinFunctions.getQueryParams(document.location.search);if(typeof query.__dPosclick!=="undefined"){dinLogger.Write(dinLogger.DEBUG,"LeadTracker: Posclick info detected");if(this.getUserConsent()){this.setLeadPosclick(query.__dPosclick);return}
dinLogger.Write(dinLogger.DEBUG,"LeadTracker: Posclick info will be used when the user give consent to be tracked");this.StoredPosclickId=query.__dPosclick;return}
this.post();},encrypt:function(str){if(str.length>245){dinLogger.Write(dinLogger.ERROR,"LeadTracker: Email is too big for encryption");return;}
var encrypt=new JSEncrypt({"default_key_size":2048});encrypt.setPublicKey(this.PUBLIC_KEY);str=encrypt.encrypt(str);str=dinFunctions.replaceAll(str,"+","-")
str=dinFunctions.replaceAll(str,"/","_")
return str;},SetLeadEmail:function(email){if(typeof email!=="string"||email.trim()===""){return}
if(dinFunctions.isExampleEmail(email)){return}
if(!this.getUserConsent()){dinLogger.Write(dinLogger.DEBUG,"LeadTracker: The user didnt give consent to save his info on cookies");return}
this.setCookieUserInfo(this.TYPE_EMAIL,this.encrypt(email));},SetLeadExternalId:function(id){if(typeof id!=="string"){return}
this.setCookieUserInfo(this.TYPE_EXTERNAL_CODE,id);},setLeadPosclick:function(pcInfo){this.setCookieUserInfo(this.TYPE_POSCLICK,pcInfo);},SetLeadId:function(id){if(typeof id==="number"){id=id.toString(10);}
if(typeof id!=="string"||id.trim()===""){return}
this.setCookieUserInfo(this.TYPE_ID,id);},RemoveLeadInfo:function(){this.LastUrlPosted="";dinFunctions.deleteCookie(this.COOKIE_NAME);},getCookieObj:function(){var cookie=dinFunctions.getCookie(this.COOKIE_NAME);var cookieObj={};if(cookie!==""){cookieObj=JSON.parse(atob(cookie));}
return cookieObj;},setCookieObj:function(cookieObj){var cookieData=btoa(JSON.stringify(cookieObj));dinFunctions.setCookie(this.COOKIE_NAME,cookieData,90);},setCookieUserInfo:function(user_info_type,user_info){if(!this.isActive()){dinLogger.Write(dinLogger.DEBUG,"LeadTracker: Will not set cookie. LeadTracker is inactive");return}
if(!this.getUserConsent()){dinLogger.Write(dinLogger.DEBUG,"LeadTracker: The user didnt give consent to save his info on cookies");return}
this.StoredPosclickId="";dinLogger.Write(dinLogger.DEBUG,"LeadTracker: Setting lead info on cookie. Type:["+user_info_type+"]");var cookieObj=dinLeadTracker.getCookieObj();cookieObj.user_info_type=user_info_type;cookieObj.user_info=user_info;dinLeadTracker.setCookieObj(cookieObj);this.post();},SetUserConsent:function(consent){var cookieObj=dinLeadTracker.getCookieObj();cookieObj.consent=consent;if(!consent){cookieObj.user_info_type=undefined;cookieObj.user_info=undefined;}
dinLeadTracker.setCookieObj(cookieObj);if(consent&&this.StoredPosclickId!=""){dinLogger.Write(dinLogger.DEBUG,"LeadTracker: Consent given. The stored posclick info will be used");this.setLeadPosclick(this.StoredPosclickId);}},getUserConsent:function(){if(!this.isActive()){dinLogger.Write(dinLogger.DEBUG,"LeadTracker: Will not set cookie. LeadTracker is inactive");return}
if(typeof dinConfigs.leadTracking.REQUIRE_CONSENT==="undefined"||!dinConfigs.leadTracking.REQUIRE_CONSENT){dinLogger.Write(dinLogger.DEBUG,"LeadTracker: Will not ask for consent")
return true;}
var cookieObj=dinLeadTracker.getCookieObj();if(typeof cookieObj.consent==="undefined"){dinLogger.Write(dinLogger.DEBUG,"LeadTracker: No consent info on cookie")
return false;}
return cookieObj.consent;},isActive:function(){if(typeof dinConfigs.leadTracking==="undefined"||dinConfigs.leadTracking==null){return false;}
if(typeof dinConfigs.leadTracking.ACTIVE==="undefined"||dinConfigs.leadTracking.ACTIVE==null){return false;}
return dinConfigs.leadTracking.ACTIVE},validate:function(ignoreCookie){if(typeof ignoreCookie!=="boolean"){ignoreCookie=false;}
if(!this.isActive()){dinLogger.Write(dinLogger.DEBUG,"LeadTracker: Inactive");return false;}
if(!this.getUserConsent()){dinLogger.Write(dinLogger.DEBUG,"LeadTracker: The user didnt give consent to be tracked")
return false;}
if(this.LastUrlPosted===dinFunctions.getDomainPathUrl()){dinLogger.Write(dinLogger.DEBUG,"LeadTracker: This url was already posted");return false;}
if(!ignoreCookie){var cookieObj=dinLeadTracker.getCookieObj();if(typeof cookieObj.user_info_type==="undefined"||typeof cookieObj.user_info==="undefined"){dinLogger.Write(dinLogger.DEBUG,"LeadTracker: There is no user info on cookie to post");return false;}}
return this.checkUrlRules();},checkUrlRules:function(){var url=window.location.href;if(typeof dinConfigs.leadTracking.HISTORY_URL_RULES==="undefined"||dinConfigs.leadTracking.HISTORY_URL_RULES.length===0){dinLogger.Write(dinLogger.DEBUG,"LeadTracker: No history config. All browsing will be tracked");return true;}
if(dinFunctions.matchesRulesParser(url,dinConfigs.leadTracking.HISTORY_URL_RULES,"TYPE","VALUE")){dinLogger.Write(dinLogger.DEBUG,"LeadTracker: This url matched a history rule");return true;}
var list=dinConfigs.leadTracking.LIST;if(typeof dinConfigs.leadTracking.AUTOMATION_URL_RULES==="undefined"||dinConfigs.leadTracking.AUTOMATION_URL_RULES.length===0||typeof dinConfigs.leadTracking.AUTOMATION_URL_RULES[list]==="undefined"||dinConfigs.leadTracking.AUTOMATION_URL_RULES[list].length===0){dinLogger.Write(dinLogger.DEBUG,"LeadTracker: This url didnt match any rules");return false;}
var triggers=dinConfigs.leadTracking.AUTOMATION_URL_RULES[list];for(trigId in triggers){if(triggers[trigId].RULES.length===0){dinLogger.Write(dinLogger.DEBUG,"LeadTracker: Found an automation without url rules. All browsing will be tracked");return true;}
if(dinFunctions.matchesRulesParser(url,triggers[trigId].RULES,"TYPE","VALUE")){dinLogger.Write(dinLogger.DEBUG,"LeadTracker: This url matched a automation rule");return true;}}
dinLogger.Write(dinLogger.DEBUG,"LeadTracker: Url didnt match any rule");return false;},setReferrer:function(referer){dinLogger.Write(dinLogger.DEBUG,"LeadTracker: Trying to set referrer");if(typeof referer!=="string"||referer===""){dinLogger.Write(dinLogger.DEBUG,"LeadTracker: Empty referrer");return}
var cookieObj=dinLeadTracker.getCookieObj();if(cookieObj.referrer_posted){dinLogger.Write(dinLogger.DEBUG,"LeadTracker: Referrer already posted");return}
dinLogger.Write(dinLogger.DEBUG,"LeadTracker: Setting referrer");if(cookieObj.referrer!==referer){cookieObj.referrer=referer;cookieObj.referrer_posted=false;dinLeadTracker.setCookieObj(cookieObj);}},useReferrer:function(){var cookieObj=dinLeadTracker.getCookieObj();if(typeof cookieObj.referrer==="undefined"||cookieObj.referrer===""){return"";}
if(typeof cookieObj.referrer_posted==="undefined"||cookieObj.referrer_posted){return"";}
cookieObj.referrer_posted=true;dinLeadTracker.setCookieObj(cookieObj);return cookieObj.referrer;},post:function(){dinLogger.Write(dinLogger.DEBUG,"LeadTracker: Starting to post");if(!this.validate()){return}
var cookieObj=dinLeadTracker.getCookieObj();var params=[{"type":cookieObj.user_info_type},{"value":cookieObj.user_info},{"list":dinConfigs.leadTracking.LIST},{"s":dinConfigs.siteCode},{"x-referrer":window.location.href}];var referrer=this.useReferrer();if(referrer!==""){params.push({"referrer":referrer})}
this.LastUrlPosted=dinFunctions.getDomainPathUrl();dinFunctions.request("POST",this.POSCLICK_URL+"/leadtracking/"+dinConfigs.leadTracking.HASH+"/"+dinConfigs.clientCode+"/",params);dinLogger.Write(dinLogger.DEBUG,"LeadTracker: Access submitted successfully");}}
var _dPosclickSite=String(dinConfigs.siteCode);var dinPosclick={version:"1.0",Init:function(){var query=this.getQueryParams(document.location.search);if(query.__dPosclick!=undefined){this.setCookie('_dPosclickCookie',query.__dPosclick);}
var value=this.getCookie("_dPosclickCookie");if(value!=null&&value!=""){var tagScript=document.createElement('script');tagScript.type='text/javascript';tagScript.async=true;tagScript.src='https://receiver.posclick.dinamize.com/posclick/js/'+this.version+'?dPosclickCookie='+value+'&dPosclickSite='+dinConfigs.siteCode;var altScriptTag=document.getElementsByTagName('script')[0];altScriptTag.parentNode.insertBefore(tagScript,altScriptTag);}},getQueryParams:function(querystring){querystring=querystring.split("+").join(" ");var params={},tokens,regexpStr=/[?&]?([^=]+)=([^&]*)/g;while(tokens=regexpStr.exec(querystring)){params[decodeURIComponent(tokens[1])]=decodeURIComponent(tokens[2]);}
return params;},setCookie:function(name,val){var Exdate=new Date();var Time=Exdate.getTime();Time+=3600*1000;Exdate.setTime(Time);document.cookie=name+'='+val+'; expires='+Exdate.toGMTString()+'; path=/';},getCookie:function(name){var I,X,Y,arrayCookies=document.cookie.split(";");for(I=0;I<arrayCookies.length;I++){X=arrayCookies[I].substr(0,arrayCookies[I].indexOf("="));Y=arrayCookies[I].substr(arrayCookies[I].indexOf("=")+1);X=X.replace(/^\s+|\s+$/g,"");if(X==name){return unescape(Y);}}},RegisterAccess:function(method,params){if(dinFunctions.isExampleEmail(params.cmp1)){return}
if(!params.cmp1&&!params.cmp3){var c=dinLeadTracker.getCookieObj();var hasInfo=false;switch(c.user_info_type){case dinLeadTracker.TYPE_EMAIL:params.cmp1_crypt=c.user_info;hasInfo=true;break;case dinLeadTracker.TYPE_EXTERNAL_CODE:params.cmp3=c.user_info;hasInfo=true;break;case dinLeadTracker.TYPE_ID:params.contact_id=c.user_info;hasInfo=true;break}
if(hasInfo){dinLogger.Write(dinLogger.DEBUG,"LeadTracker: Recover cookie info");}}
var cookieVal=this.getCookie("_dPosclickCookie");if(cookieVal!=null&&cookieVal!=""){this.setCookie('_dPosclickCookie',cookieVal);params["_dAutomationGtmCookie"]=cookieVal;}
var hashVal=this.getCookie("_dAutomationGtmSessionCookie");if(hashVal!=null&&hashVal!=""){params["_dAutomationGtmSessionCookie"]=hashVal;this.setCookie('_dAutomationGtmSessionCookie',hashVal);}else{var newVal=new Date().getTime();newVal+="."+Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15);params["_dAutomationGtmSessionCookie"]=newVal;this.setCookie('_dAutomationGtmSessionCookie',newVal);}
var imgTag=document.createElement('img');imgTag.src='https://receiver.posclick.dinamize.com/tagmanager/access/?method='+method+'&v=2&params='+encodeURIComponent(JSON.stringify(params))+'&a='+Math.floor((Math.random()*99999)+1);var altScriptTag=document.getElementsByTagName('script')[0];altScriptTag.parentNode.insertBefore(imgTag,altScriptTag);if(dinLeadTracker.isActive()){if(params.cmp3!==undefined&&params.cmp3!==""){dinLogger.Write(dinLogger.DEBUG,"LeadTracker: Lead set through posclick's RegisterAccess func");dinLeadTracker.SetLeadExternalId(params.cmp3);return}
if(params.cmp1!==undefined&&params.cmp1!==""){dinLogger.Write(dinLogger.DEBUG,"LeadTracker: Lead set through posclick's RegisterAccess func");dinLeadTracker.SetLeadEmail(params.cmp1);return}}},AddTimer:function(key,hash,params){params["_dAutomationGtmKey"]=key;params["_dAutomationGtmHash"]=hash;this.RegisterAccess("add_timer",params);},ReplaceTimer:function(key,hash,params){params["_dAutomationGtmKey"]=key;params["_dAutomationGtmHash"]=hash;params["replace_cart"]=true;this.RegisterAccess("add_timer",params);},CloseTimer:function(key,hash){var params={};params["_dAutomationGtmKey"]=key;params["_dAutomationGtmHash"]=hash;this.RegisterAccess("close_timer",params);},Access:function(key,hash,params){params["_dAutomationGtmKey"]=key;params["_dAutomationGtmHash"]=hash;this.RegisterAccess("access",params);}}
function _getdPosclickQueryParams(queryString){return dinPosclick.getQueryParams(queryString);}
function _setdPosclickCookie(name,value){dinPosclick.setCookie(name,value);}
function _getdPosclickCookie(name){return dinPosclick.getCookie(name);}
function _dAutomationGtmRegisterAccess(method,params){dinPosclick.RegisterAccess(method,params);}
function _dAutomationGtmAddTimer(key,hash,params){dinPosclick.AddTimer(key,hash,params);}
function _dAutomationGtmCloseTimer(key,hash){dinPosclick.CloseTimer(key,hash);}
function _dAutomationGtmAccess(key,hash,params){dinPosclick.Access(key,hash,params);}
if(typeof dinForms=="undefined"||dinForms.version<1.3){var dinForms={version:1.3,onLoad:function(){var forms=document.getElementsByClassName("formIntegration");for(var k=0;k<forms.length;++k){var inputElement=forms[k].getElementsByClassName("din-input-mask");for(var i=0;i<inputElement.length;++i){switch(inputElement[i].getAttribute("din-mask-type")){case"DT":case"DH":var str=inputElement[i].getAttribute("format");VMasker(inputElement[i]).maskPattern(str.replace(/D|M|A|Y|H/g,"9"));break;case"INT":VMasker(inputElement[i]).maskNumber();break;case"FLT":var str=inputElement[i].getAttribute("format");VMasker(inputElement[i]).maskMoney({separator:str});break;}}}
var referer=dinFunctions.getReferrer();var hostname=window.location.hostname;if(referer!=hostname){var jsonParams={"url":window.location.href,"referer":document.referrer};var cookieData=btoa(JSON.stringify(jsonParams));dinForms.SetCookie("dinTrafficSource",cookieData,90);}},ValidateForm:function(form){this.LimpaAvisos(form);var elem=form.elements;var enviar=true;for(var i=0;i<elem.length;i++){if(elem[i].type=="hidden"){continue}
var classList=elem[i].className.split(" ");this.removeClass("field-error",elem[i]);elem[i].value=elem[i].value.trim();if(classList.indexOf("type_EMAIL")!=-1){if(!this.validateEmail(elem[i].value)){this.addClass("field-error",elem[i]);enviar=false;}}
else if(classList.indexOf("type_DT")!=-1){if(elem[i].value!=""&&!this.existDate(this.prepareDate(elem[i].value,elem[i].getAttribute("format")),false)){this.addClass("field-error",elem[i]);enviar=false;}}
else if(classList.indexOf("type_DH")!=-1){if(elem[i].value!=""&&!this.existDate(this.prepareDate(elem[i].value,elem[i].getAttribute("format")),true)){this.addClass("field-error",elem[i]);enviar=false;}}
else if(classList.indexOf("type_PHN_NUM")!=-1){var fieldName=elem[i].getAttribute("hd-name");var text=elem[i].value;var patPhone=/\d+/g;var res;var resultNum="";var resultDDI="";res=text.match(patPhone);if(res!==null){resultNum=res.join("");}
form.elements[fieldName].value="";if(text!=""&&resultNum.length<3){this.addClass("field-error",elem[i]);enviar=false;}else if(resultNum.length>=3){text=form.elements[fieldName+"_DDI"].value
res=text.match(patPhone);if(res!==null){resultDDI=res.join("");form.elements[fieldName].value=resultDDI+resultNum;}else{this.addClass("field-error",form.elements[fieldName+"_DDI"]);enviar=false;}}}
if(classList.indexOf("field-required")!=-1){if(classList.indexOf("type_LVM")==-1){if(elem[i].value.trim()==""){this.addClass("field-error",elem[i]);enviar=false;}}
if(classList.indexOf("type_LVM")!=-1){var hdName=elem[i].getAttribute("hd-name");var ok=false;this.removeClass("field-error",form.getElementsByClassName("containerMultiple_"+hdName)[0]);var checkboxes=form.getElementsByClassName("chk_"+hdName);for(var j=0;j<checkboxes.length;j++){if(checkboxes[j].checked==true){ok=true;break;}}
if(!ok){this.addClass("field-error",form.getElementsByClassName("containerMultiple_"+hdName)[0]);enviar=false;}}}}
if(!enviar){var msgError=form.getElementsByClassName("DinamizeDivMessageError")[0];if(msgError&&msgError.innerHTML.length){msgError.style.display="block";}
return false}
var lvmElements=form.getElementsByClassName("type_LVM");var checkboxes,checkedValues;var hdName;for(var i=0;i<lvmElements.length;i++){hdName=lvmElements[i].getAttribute("hd-name");checkboxes=form.getElementsByClassName("chk_"+hdName);checkedValues="";if(checkboxes.length>0){for(var k=0;k<checkboxes.length;k++){if(checkboxes[k].checked){checkedValues+="|"+checkboxes[k].value;}}}
checkedValues=checkedValues.replace("|","");form.elements[lvmElements[i].getAttribute("hd-name")].value=checkedValues;}
this.setDateValues(form,"type_DT");this.setDateValues(form,"type_DH");var fltElements=form.getElementsByClassName("type_FLT");for(var i=0;i<fltElements.length;i++){form.elements[fltElements[i].getAttribute("hd-name")].value=fltElements[i].value.replace(",",".");};var isPreview=form.elements["isPreview"];if(isPreview){dinForms.ResetFormValues(form);return false}
try{var frame
if(typeof dinLeadTracker!=="undefined"){frame=window;}else if(typeof window.parent!=="undefined"&&typeof window.parent.dinLeadTracker!=="undefined"){frame=window.parent;}else if(typeof window.top!=="undefined"&&typeof window.top.dinLeadTracker!=="undefined"){frame=window.top;}
if(typeof frame!=="undefined"&&frame.dinLeadTracker.isActive()){var formElements=form.elements;if(typeof formElements.cmp1!=="undefined"){frame.dinLeadTracker.SetLeadEmail(formElements.cmp1.value);}
if(typeof formElements.cmp3!=="undefined"){frame.dinLeadTracker.SetLeadExternalId(formElements.cmp3.value);}}}
catch(e){console.warn("Leadtracker ignored because of Cross-Domain error.");console.warn(e);}
var isCaptcha=this.hasCaptcha(form);if(isCaptcha){form.getElementsByClassName("DinamizeDivCaptchaMessage")[0].style.display="none";var recaptcha=form.elements["g-recaptcha-response"];if(recaptcha.value===""){form.getElementsByClassName("DinamizeDivCaptchaMessage")[0].style.display="block";grecaptcha.reset();return false;}}
var isMsg=form.elements["isMsg"].value;var redirectElement=form.elements["redirect-url-js"]?form.elements["redirect-url-js"]:form.elements["redirect-url-pp"];if(isMsg=="true"||(redirectElement&&redirectElement.value!="")){this.LoadingForm(form);return false;}
return true;},setDateValues:function(form,className){var dtElements=form.getElementsByClassName(className);for(var i=0;i<dtElements.length;i++){if(dtElements[i].value==""){continue;}
form.elements[dtElements[i].getAttribute("hd-name")].value=this.prepareDate(dtElements[i].value,dtElements[i].getAttribute("format"));};},SetCookie:function(cname,cvalue,exdays){var d=new Date();d.setTime(d.getTime()+(exdays*24*60*60*1000));var expires="expires="+d.toUTCString();document.cookie=cname+"="+cvalue+";"+expires+";path=/";},hasCaptcha:function(form){if(form.elements["dnz-captcha-google"]!=undefined){return true;}
var action=form.getAttribute("action");if(action===null){return false;}
action=action.split("/");if(action.length==8){if(action[7]==1){return true;}}
return false;},LoadingForm:function(form){if(document.getElementById("DinamizeIframeFormIntegration")==undefined){var ifrm=document.createElement("iframe");ifrm.setAttribute("id","DinamizeIframeFormIntegration");ifrm.setAttribute("name","DinamizeIframeFormIntegration");ifrm.style.display="none";document.body.appendChild(ifrm);}
dinFunctions.addCookieToForm(document,form)
this.Spinner(form,true);var redirectElement=form.elements["redirect-url-pp"];if(redirectElement&&redirectElement.value!=""){this.Request(form.getAttribute("action")+"/",this.serialize(form),form);}else{var imgReq=document.createElement("img");imgReq.setAttribute("id","DinamizeImgResponse");imgReq.style.display="none";imgReq.onload=function(){redirectElement=form.elements["redirect-url-js"];if(redirectElement&&redirectElement.value!=""){location.href=redirectElement.value;}
dinForms.Spinner(form,false);dinForms.ResetFormValues(form);}
imgReq.onerror=function(){dinForms.Spinner(form,false);var msgErrorDep=form.getElementsByClassName("divMessageError")[0];if(msgErrorDep){msgErrorDep.style.display="block";}
var msgAlert=form.getElementsByClassName("DinamizeDivMessageAlert")[0];if(msgAlert){msgAlert.style.display="block";}}
imgReq.src=form.getAttribute("action")+"/?"+this.serialize(form)+"&a="+Math.floor((Math.random()*99999)+1);form.appendChild(imgReq);}},Request:function(url,params,form){var xmlhttp=new XMLHttpRequest();xmlhttp.onreadystatechange=function(){if(xmlhttp.readyState==XMLHttpRequest.DONE){if(xmlhttp.status>=200&&xmlhttp.status<=299){if((form.elements["redirect-url-pp"].value.includes(window.location.origin))){parent.location.href=form.elements["redirect-url-pp"].value;}else{window.open(form.elements["redirect-url-pp"].value,"_blank");}dinForms.Spinner(form,false);dinForms.ResetFormValues(form);}else{dinForms.Spinner(form,false);var msgErrorDep=form.getElementsByClassName("divMessageError")[0];if(msgErrorDep){msgErrorDep.style.display="block";}
var msgAlert=form.getElementsByClassName("DinamizeDivMessageAlert")[0];if(msgAlert){msgAlert.style.display="block";}}}};if(typeof params==="string"&&params!==""){url+="?"+params;}
xmlhttp.open("POST",url,true);xmlhttp.send();},Spinner:function(form,show){var submitElement=form.getElementsByClassName("dinSubmit")[0];var spinnerElement=form.getElementsByClassName("spinner")[0];if(show){if(spinnerElement)
spinnerElement.style.display="block";if(submitElement)
submitElement.value="";}else{if(spinnerElement)
spinnerElement.style.display="none";if(submitElement)
submitElement.value=submitElement.getAttribute("original-value");}},GetCookie:function(cname){var name=cname+"=";var decodedCookie=decodeURIComponent(document.cookie);var ca=decodedCookie.split(";");for(var i=0;i<ca.length;i++){var c=ca[i];while(c.charAt(0)==" "){c=c.substring(1);}
if(c.indexOf(name)==0){return c.substring(name.length,c.length);}}
return"";},ResetFormValues:function(form){if(typeof($)!="undefined"){if((typeof($().iCheck)!="undefined")){$(form).find("input[type=\"checkbox\"]:not(.cssOnly)").iCheck("uncheck");}}
var msgSuccess=form.getElementsByClassName("DinamizeDivMessageSuccess")[0];if(msgSuccess){msgSuccess.style.display="block";}
var imgRequest=document.getElementById("DinamizeImgResponse");if(imgRequest){imgRequest.remove();}
form.reset();},LimpaAvisos:function(form){var msgSuccess=form.getElementsByClassName("DinamizeDivMessageSuccess")[0];if(msgSuccess)
msgSuccess.style.display="none";var msgAlert=form.getElementsByClassName("DinamizeDivMessageAlert")[0];if(msgAlert)
msgAlert.style.display="none";var msgError=form.getElementsByClassName("DinamizeDivMessageError")[0];if(msgError)
msgError.style.display="none";var msgErrorDep=form.getElementsByClassName("divMessageError")[0];if(msgErrorDep)
msgErrorDep.style.display="none";var msgCaptcha=form.getElementsByClassName("DinamizeDivCaptchaMessage")[0];if(msgCaptcha)
msgCaptcha.style.display="none";},validateEmail:function(email){var re=/^([a-zA-Z0-9_.+-])+\@(([a-zA-Z0-9-])+\.)+([a-zA-Z0-9]{2,4})+$/;return re.test(email);},prepareDate:function(date,format){var newDate,time;format=format.substr(0,10).replace("/","").replace("/","").replace("-","").replace("-","");time=date.substr(10,15);if(format=="DDMMAAAA"){newDate=date[6]+date[7]+date[8]+date[9]+"-"+date[3]+date[4]+"-"+date[0]+date[1];}else if(format=="MMDDAAAA"){newDate=date[6]+date[7]+date[8]+date[9]+"-"+date[0]+date[1]+"-"+date[3]+date[4];}else if(format=="AAAAMMDD"){newDate=date[0]+date[1]+date[2]+date[3]+"-"+date[5]+date[6]+"-"+date[8]+date[9];}
return newDate+time;},existDate:function(date,time){if(time){if(date.length!=16){return false;}}else if(!time){if(date.length!=10){return false;}
date+=" 00:00";}
var NEWDATE=new Date(date.replace("-","/").replace("-","/"));var strNewdate;var y=NEWDATE.getFullYear().toString();var m=(NEWDATE.getMonth()+1).toString();var d=NEWDATE.getDate().toString();var h=NEWDATE.getHours().toString();var min=NEWDATE.getMinutes().toString();strNewdate=y+"-"+(m[1]?m:"0"+m[0])+"-"+(d[1]?d:"0"+d[0])+" "+(h[1]?h:"0"+h[0])+":"+(min[1]?min:"0"+min[0]);if(date!=strNewdate){return false;}
return true;},addClass:function(classname,element){var cn=element.className;if(cn.indexOf(classname)!=-1){return;}
if(cn!=""){classname=" "+classname;}
element.className=cn+classname;},removeClass:function(classname,element){var cn=element.className;var rxp=new RegExp("\\s?\\b"+classname+"\\b","g");cn=cn.replace(rxp,"");element.className=cn;},serialize:function(form){if(!form||form.nodeName!=="FORM"){return}var i,j,q=[];for(i=form.elements.length-1;i>=0;i=i-1){if(form.elements[i].name===""){continue}switch(form.elements[i].nodeName){case"INPUT":switch(form.elements[i].type){case"text":case"hidden":case"password":case"button":case"reset":case"submit":q.push(form.elements[i].name+"="+encodeURIComponent(form.elements[i].value));break;case"checkbox":case"radio":if(form.elements[i].checked){q.push(form.elements[i].name+"="+encodeURIComponent(form.elements[i].value))}break;case"file":break}break;case"TEXTAREA":q.push(form.elements[i].name+"="+encodeURIComponent(form.elements[i].value));break;case"SELECT":switch(form.elements[i].type){case"select-one":q.push(form.elements[i].name+"="+encodeURIComponent(form.elements[i].value));break;case"select-multiple":for(j=form.elements[i].options.length-1;j>=0;j=j-1){if(form.elements[i].options[j].selected){q.push(form.elements[i].name+"="+encodeURIComponent(form.elements[i].options[j].value))}}break}break;case"BUTTON":switch(form.elements[i].type){case"reset":case"submit":case"button":q.push(form.elements[i].name+"="+encodeURIComponent(form.elements[i].value));break}break}}return q.join("&")},};}
function dinLoadFunction(){dinLogger.Write(dinLogger.DEBUG,"dinLoadFunction called");var referer=dinFunctions.getReferrer();var hostname=window.location.hostname;if(referer!=hostname){var jsonParams={"url":window.location.href,"referer":document.referrer};var cookieData=btoa(JSON.stringify(jsonParams));dinFunctions.setCookie('dinTrafficSource',cookieData,90);}
dinTargetForm.Init();dinWhatsForm.Init();dinSearchForm.Init();dinLeadTracker.Init();dinPosclick.Init();dinForms.onLoad();dinLogger.Write(dinLogger.DEBUG,"dinLoadFunction done");}
if(dinConfigs.logLevel!==undefined){dinLogger.Set(dinConfigs.logLevel);}
if(document.readyState==='complete'){dinLogger.Write(dinLogger.DEBUG,"document was already loaded. Calling dinLoadFunction");dinLoadFunction();}else{dinFunctions.attachEventOnElement(window,'load',dinLoadFunction)}