var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.arrayIteratorImpl=function(a){var b=0;return function(){return b<a.length?{done:!1,value:a[b++]}:{done:!0}}};$jscomp.arrayIterator=function(a){return{next:$jscomp.arrayIteratorImpl(a)}};$jscomp.makeIterator=function(a){var b="undefined"!=typeof Symbol&&Symbol.iterator&&a[Symbol.iterator];if(b)return b.call(a);if("number"==typeof a.length)return $jscomp.arrayIterator(a);throw Error(String(a)+" is not an iterable or ArrayLike");};var cartstackbr_Class=function(){var a=this;this.debug=!1;this.rcMode=!0;this.cs_found=!1;this.cs_debug="undefined"==typeof cs_debug?"stage"==xe_core.vm&&1==xe_core.level?!0:!1:cs_debug;Object.entries||(Object.entries=function(b){for(var d=Object.keys(b),c=d.length,e=Array(c);c--;)e[c]=[d[c],b[d[c]]];return e});"function"!=typeof xe_getCacheTS&&(window.xe_getCacheTS=function(){return""});this.getProc=function(){var b={newlayer:window.btoa(window.location.href.toLowerCase()),cartstacktest:-1<window.location.href.toLowerCase().indexOf("cartstacktest=true")||""!=xe_readCookie("cs_debug")||"stage"==xe_core.vm&&(1==xe_core.level||9==xe_core.level)?"true":"",__utmc:"0,0",__utmz:"0",ref:"auto"},d="?";b=$jscomp.makeIterator(Object.entries(b));for(var c=b.next();!c.done;c=b.next()){var e=$jscomp.makeIterator(c.value);c=e.next().value;e=e.next().value;""!=e&&(d+="?"==d?c+"="+e:"&"+c+"="+e)}return"https://app.cartstack.com.br/activeAPI/cnct/proc"+(a.rcMode?"_rc"+(9==xe_core.level?"2":""):"")+".js"+d};this.init=function(){xe_core.vm&&console.log("[CartStack] Extension initing...");window.cartstackAPI={szEmail:"",szCartID:""};window.createCookie=function(){return window.xe_createCookie.apply(this,arguments)};window.readCookie=function(){return window.xe_readCookie.apply(this,arguments)};window.deleteCookie=function(){return window.xe_deleteCookie.apply(this,arguments)};xe_include("https://app.cartstack.com.br/activeAPI/cnct/core"+(a.rcMode?"_rc":"")+".js"+("stage"==xe_core.vm?"?ts="+String(+new Date):""),function(b){b.status&&xe_include(a.getProc(),function(d){d.status&&xe_core.hookEvent(xex_visitor.events.EMAIL_INPUT,function(){var c=Array.prototype.slice.call(arguments);if(xe_core.requireExtension("lgpd")&&!xe_core.callService("cookieConsent","MARKETING,EMAIL_MARKETING"))return!1;if(xe_isset(c[0])){for(var e=1,g=0;g<_cartstack.length;g++)"setEmail"==_cartstack[g][0]&&(_cartstack[g][1]=c[0].email,e=0);e&&_cartstack.push(["setEmail",c[0].email]);cartstackAPI.szEmail=c[0].email;switch(cs_event){case "capture":cs_pro_hit&&csPROHit(!0===cs_pro_hit?void 0:cs_pro_hit);break;case "checkout":a.cs_debug&&console.log("Email captured... sending cart..."),csAPICall(a.rcMode?"cart":cs_api_urls.cart,function(f){if(!1!==f){for(var k=0,h=0;h<_cartstack.length;h++)"setCartID"==_cartstack[h][0]&&(_cartstack[h][1]=f.cartid,k=1);0==k&&_cartstack.push(["setCartID",f.cartid]);""!=f.email&&xe_createCookie("cartstack.com-strictcart","@",1);createCookie("cartstack.com-cartid",f.cartid,365,!0);a.cs_debug&&console.log("[CartStack] xex_cartstackbr - @csAPICall(checkout), Strict: "+(""!==f.email?"true":"false"));cartstackAPI.szCartID=f.cartid;a.cs_debug&&alert(f.debug)}else a.cs_debug&&console.log("CartStack: Cart API Failed!")})}}else a.cs_debug&&console.log("CartStack: Email not changed...")})})})};xe_core.requireExtension("lgpd")&&(xe_core.hookEvent(xex_lgpd.events.COOKIE_CONSENT_INIT,function(){xe_core.vm&&console.log("[CartStack] LGPD Extension inited! Lets init...");a.cs_found&&a.init()}),xe_core.hookEvent(xex_lgpd.events.COOKIE_CONSENT,function(){var b=Array.prototype.slice.call(arguments);xe_isset(b[0],"string")&&"DENY"===b[0]&&(a.cs_debug&&console.log("[CartStack] - User just denied sharing cookies so we frozen any captures already sent to server!"),"function"===typeof cartstack_LGPD&&cartstack_LGPD(_cartstack))}));xe_core.hookEvent(XE_EVENTS.vars.ready,function(){if(xe_core.requireExtension("datatunnel.js","visitor.js"))var b=0,d=window.setInterval(function(){document.querySelector('script[src*="activeAPI/load.js"]')?(window.clearInterval(d),a.cs_found=!0,xe_core.vm&&console.log("[CartStack] XEngine ready! CartStack found..."),xe_core.requireExtension("lgpd")||(xe_core.vm&&console.log("[CartStack] LGPD Extension loaded... waiting..."),a.init())):5===++b&&(window.clearInterval(d),a.cs_found||xe_core.vm&&console.log("[CartStack] XEngine ready! CartStack not found!"))},1E3);else console.error("Required extensions not loaded...")})},xex_cartstackbr=new cartstackbr_Class;